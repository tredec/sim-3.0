(()=>{"use strict";const t=t=>document.querySelector(t),s=t=>document.createElement(t),i=(t,s,i)=>t.addEventListener(s,(()=>i()));function e(t,s){for(let i=0;i<t.length;i++)if(s===t[i])return i;return-1}function h(t=0){return new Promise((s=>setTimeout(s,t)))}const a=JSON.parse('{"Jp":["T1","T2","T3","T4","T5","T6","T7","T8","WSP","SL","EF","CSR2"],"S3":[["T1","T1C34","T1C4","T1Ratio","T1SolarXLII"],["T2","T2mc","T2ms","T2qs"],["T3","T3C11C12C21","T3noC11C13C21C33","T3noC13C32C33","T3noC13C33","T3noP1C13C33","T3Snax","T3Snax2","T3C11C12C21d","T3noC11C13C21C33d","T3noC11C13C33d","T3noC13C32C33d","T3noC13C33d","T3Play","T3Play2"],["T4","T4C12","T4C3","T4C4","T4C5","T4C56","T4C12d","T4C123d","T4C456dC12rcvMS","T4C356dC12rcv","T4C56d","T4C3d66"],["T5","T5Idle","T5AI2"],["T6","T6C3","T6C4","T6noC34","T6noC345","T6noC1234","T6snax","T6C3d","T6C4d","T6noC34d","T6noC345d","T6noC1234d","T6AI"],["T7","T7C12","T7C3","T7noC12","T7noC123","T7noC1234","T7C12d","T7C3d","T7PlaySpqcey"],["T8","T8noC3","T8noC5","T8noC35","T8snax","T8noC3d","T8noC5d","T8noC35d","T8d","T8Play","T8PlaySolarswap"],["WSP","WSPStopC1","WSPdStopC1"],["SL","SLStopA","SLStopAd","SLMS","SLMSd"],["EF","EFsnax","EFd","EFAI"],["CSR2","CSR2d","CSR2XL"]],"Sw":["All","Single sim","Chain","Steps","Amount","Time","Time diff."],"xy":["","","","Step length: ","Amount of pubs (Chain): ","Total Time: "],"CN":["<sigma> <t1>* [t2]* ... [wsp]* ... [csr2]* \\n\\n*[r/t/m] = rho/tau/total multiplier | default tau","","","","<Number>","<Hours>","<t1> [t1], ... , <t8> [t8] or <wsp> [wsp], ... , <csr2> [csr2]","<t1> [t1], ... , <t8> [t8] or <wsp> [wsp], ... , <csr2> [csr2]","<sigma 1> <sigma 2> [ct y/n] [idle strats only y/n]"]}');function o(t){return e(a.Jp,t)}function l(t){switch(t){case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":case"T7":case"T8":return 1;case"WSP":case"SL":case"CSR2":return.1;case"EF":return.4}throw`Invalid theory ${t}. Please contact the author of the sim.`}function r(t){return a.Jp[t]}function n(t){const s=String(t).split("e"),i=Number(s[1])+Math.log10(Math.max(1,Number(s[0])));return Number(i)}function u(t,s=3){const i=Math.floor(t),e=t-i,h=m(Math.pow(10,e),s);return(h>=10?h/10:h)+"e"+(h>=10?i+1:i)}function c(t){let s=Math.floor(t/60%60),i=Math.floor(t/3600%24),e=Math.floor(t/86400%365),h=Math.floor(t/31536e3),a="";return h>0&&(a+=h<1e6?h:u(Math.log10(h)),a+="y"),e>0&&(a+=e+"d"),a+=(i<10?"0":"")+i+"h",0===h&&(a+=(s<10?"0":"")+s+"m"),a}function v(t,s=5){return t>=1e6?u(Math.log10(t),3):m(t,s-Math.floor(Math.log10(Math.abs(t))))}function m(t,s){return Math.round(t*Math.pow(10,s))/Math.pow(10,s)}function b(t,s){const i=t>s?t:s,e=t>s?s:t,h=Math.floor(i),a=Math.pow(10,i-h),o=Math.floor(e),l=Math.pow(10,e-o);return h+Math.log10(a+l/Math.pow(10,h-o))}function d(t,s){const i=t>s?t:s,e=t>s?s:t,h=Math.floor(i),a=Math.pow(10,i-h),o=Math.floor(e),l=Math.pow(10,e-o);return h+Math.log10(a-l/Math.pow(10,h-o))}function p(t,s){let i=new Array(t).fill(s),e=[];if(!Array.isArray(s))return i;for(let t=0;t<i.length;t++)i[0][0].constructor===Array&&i[0][0][0].constructor===Array?e.push(...i[t]):e.push(i[t]);return e}function M(t){return Math.log10(t)}const f=Math.random()+1e-9;function g(t,s){return[t.theory,t.sigma,u(t.lastPub,2),u(t.pubRho,2),u((t.pubRho-t.lastPub)*l(t.theory),2),v(t.pubMulti),t.strat+s,v(t.maxTauH*l(t.theory)),c(Math.max(0,t.pubT-t.recovery.time)),[t.pubRho,t.recovery.recoveryTime?t.recovery.time:Math.max(0,t.pubT-t.recovery.time)]]}class T{constructor(t){var s,i,e,h;this.lvl=null!==(s=t.lvl)&&void 0!==s?s:0,this.cost=x(String(t.cost)),this.costInc=Math.log10(t.costInc),this.value="number"==typeof t.value||"string"==typeof t.value?x(String(t.value)):0,this.stepwisePowerSum=!0===(null===(i=t.stepwisePowerSum)||void 0===i?void 0:i.default)?{base:2,length:10}:"number"==typeof(null===(e=t.stepwisePowerSum)||void 0===e?void 0:e.base)&&"number"==typeof(null===(h=t.stepwisePowerSum)||void 0===h?void 0:h.length)?{base:t.stepwisePowerSum.base,length:t.stepwisePowerSum.length}:{base:0,length:0},this.varBase=t.varBase?t.varBase:10,t.firstFreeCost&&(this.buy(),this.cost-=this.costInc)}buy(){this.cost+=this.costInc,0!==this.stepwisePowerSum.base?this.value=this.value===f?Math.log10(this.stepwisePowerSum.base)*Math.floor(this.lvl/this.stepwisePowerSum.length):b(this.value,Math.log10(this.stepwisePowerSum.base)*Math.floor(this.lvl/this.stepwisePowerSum.length)):this.value=Math.log10(this.varBase)*(this.lvl+1),this.lvl++}reCalculate(){if(0!==this.stepwisePowerSum.base){let t=Math.floor(this.lvl/this.stepwisePowerSum.length),s=this.lvl-t*this.stepwisePowerSum.length,i=this.stepwisePowerSum.length/(this.stepwisePowerSum.base-1);this.value=d(Math.log10(i+s)+Math.log10(this.stepwisePowerSum.base)*t,Math.log10(i))}else this.value=Math.log10(this.varBase)*this.lvl}}function x(t){if("Infinity"===t)throw"Variable value reached Infinity";return"0"===t?f:/[e]/.test(t)?n(t):Math.log10(Number(t))}var y=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class w{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T1",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.variables=[new T({lvl:1,cost:5,costInc:2,value:1,stepwisePowerSum:{default:!0}}),new T({cost:100,costInc:10,varBase:2}),new T({cost:15,costInc:2,stepwisePowerSum:{default:!0}}),new T({cost:3e3,costInc:10,varBase:2}),new T({cost:1e4,costInc:Math.pow(2,4.5*Math.log2(10)),varBase:10}),new T({cost:1e10,costInc:Math.pow(2,8*Math.log2(10)),varBase:10})],this.term1=0,this.term2=0,this.term3=0,this.termRatio=0,this.c3Ratio=this.lastPub<300?1:this.lastPub<450?1.1:this.lastPub<550?2:this.lastPub<655?5:10,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...p(6,!0)],[!0,!0,!1,!1,!0,!0],[!0,!0,!1,!1,!1,!0],[()=>this.variables[0].cost+1<this.rho,()=>this.variables[1].cost+M(1.11)<this.rho,()=>this.variables[2].cost+this.termRatio+1<=this.rho,()=>this.variables[3].cost+this.termRatio<=this.rho,()=>this.variables[4].cost+M(this.c3Ratio)<this.rho,!0],[()=>this.variables[0].cost+M(5)<=this.rho&&this.variables[0].cost+M(6+this.variables[0].lvl%10)<=this.variables[1].cost&&this.variables[0].cost+M(15+this.variables[0].lvl%10)<(this.milestones[3]>0?this.variables[5].cost:1e3),()=>this.variables[1].cost+M(1.11)<this.rho,()=>this.variables[2].cost+this.termRatio+1<=this.rho,()=>this.variables[3].cost+this.termRatio<=this.rho,()=>this.variables[4].cost+M(this.c3Ratio)<this.rho,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[2]>0,()=>this.milestones[3]>0]}getMilestoneTree(){return[...new Array(5).fill([[0,0,0,0],[0,0,1,0],[0,0,1,1],[1,0,1,1],[1,1,1,1],[1,2,1,1],[1,3,1,1]])]}getTotMult(t){return Math.max(0,.164*t-M(3))+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return y(this,void 0,void 0,(function*(){let t=8*Math.ceil((this.lastPub-10)/8)+10,s=t-this.lastPub<3?t+2:t-this.lastPub<5?t-2+Math.log10(1.5):t-4+Math.log10(1.4),i=(t-this.lastPub<3?t:Math.floor(this.lastPub))+Math.log10(30);i=Math.max(8+Math.log10(30),i+Math.floor(s-i));let e=!1;for(;!e&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<176&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),(4!==this.stratIndex||this.rho<i||Y.forcedPubTime!==1/0)&&this.buyVariables(),e=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:4===this.stratIndex?this.pubRho>s:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,Y.forcedPubTime===1/0&&4===this.stratIndex?` ${this.lastPub<50?"":u(Math.min(this.pubRho,i),2)}`:""),4===this.stratIndex&&Y.varBuy.push([this.result[7],this.boughtVars]),this.result}))}tick(){this.term1=this.variables[2].value*(1+.05*this.milestones[1])+this.variables[3].value+(this.milestones[0]>0?M(1+this.rho/Math.LOG10E/100):0),this.term2=b(this.variables[4].value+.2*this.rho,this.variables[5].value+.3*this.rho),this.term3=this.variables[0].value+this.variables[1].value;let t=b(this.term1,this.term2)+this.term3+this.totMult+M(this.dt);this.rho=b(this.rho,t),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||Y.forcedPubTime!==1/0||4===this.stratIndex)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&4===this.stratIndex&&(2!==s&&3!==s||this.lastPub<350)){let t=["q1","q2","c1","c2","c3","c4"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.rho=d(this.rho,this.variables[s].cost),this.variables[s].buy(),t=!0}t&&(this.termRatio=Math.max(M(5),(this.term2-this.term1)*Number(this.milestones[3]>0)))}}var I=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class B{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T2",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q1=0,this.q2=0,this.q3=0,this.q4=0,this.r1=0,this.r2=0,this.r3=0,this.r4=0,this.variables=[new T({lvl:1,cost:10,costInc:2,value:1,stepwisePowerSum:{default:!0}}),new T({cost:5e3,costInc:2,stepwisePowerSum:{default:!0}}),new T({cost:3e25,costInc:3,stepwisePowerSum:{default:!0}}),new T({cost:8e50,costInc:4,stepwisePowerSum:{default:!0}}),new T({cost:2e6,costInc:2,stepwisePowerSum:{default:!0}}),new T({cost:3e9,costInc:2,stepwisePowerSum:{default:!0}}),new T({cost:4e25,costInc:3,stepwisePowerSum:{default:!0}}),new T({cost:5e50,costInc:4,stepwisePowerSum:{default:!0}})],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(8).fill(!0),[()=>this.curMult<4650,()=>this.curMult<2900,()=>this.curMult<2250,()=>this.curMult<1150,()=>this.curMult<4650,()=>this.curMult<2900,()=>this.curMult<2250,()=>this.curMult<1150],new Array(8).fill(!0),new Array(8).fill(!0)];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>1,()=>!0,()=>!0,()=>this.milestones[1]>0,()=>this.milestones[1]>1]}getMilestoneTree(){return[...new Array(4).fill([[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,1,0,0],[2,2,0,0],[2,2,1,0],[2,2,2,0],[2,2,3,0],[2,2,3,1],[2,2,3,2],[2,2,3,3]])]}getTotMult(t){return Math.max(0,.198*t-M(100))+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){let t=Math.min(10,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=[0,0,0,0];let s=[];if(this.stratIndex<2&&(s=[1,2,3,4]),2===this.stratIndex){let t=this.t%100;t<10?s=[3,4,1,2]:t<50?s=[1,2,3,4]:t<60?s=[3,4,1,2]:t<100&&(s=[2,1,3,4])}if(3===this.stratIndex){let t=1/0;this.lastPub>0&&(t=10),this.lastPub>75&&(t=200),this.lastPub>100&&(t=200),this.lastPub>125&&(t=200),this.lastPub>150&&(t=600),this.lastPub>200&&(t=100),this.lastPub>225&&(t=25),s=this.curMult<t?[1,2,3,4]:[3,4,1,2]}const i=[2,2,3,3];for(let e=0;e<s.length;e++)for(;this.milestones[s[e]-1]<i[s[e]-1]&&t>0;)this.milestones[s[e]-1]++,t--}simulate(){return I(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<250&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>15,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=M(this.dt);this.q1=b(this.q1,this.variables[0].value+this.q2+t),this.q2=b(this.q2,this.variables[1].value+this.q3+t),this.q3=this.milestones[0]>0?b(this.q3,this.variables[2].value+this.q4+t):this.q3,this.q4=this.milestones[0]>1?b(this.q4,this.variables[3].value+t):this.q4,this.r1=b(this.r1,this.variables[4].value+this.r2+t),this.r2=b(this.r2,this.variables[5].value+this.r3+t),this.r3=this.milestones[1]>0?b(this.r3,this.variables[6].value+this.r4+t):this.r3,this.r4=this.milestones[1]>1?b(this.r4,this.variables[7].value+t):this.r4;let s=this.q1*(1+.05*this.milestones[2])+this.r1*(1+.05*this.milestones[3])+this.totMult+t;this.rho=b(this.rho,s),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<15||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=d(this.rho,this.variables[t].cost),this.variables[t].buy()}}var C=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class P{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T3",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.currencies=[0,0,0],this.maxRho=0,this.variables=[new T({lvl:1,cost:10,costInc:1.18099,value:1,stepwisePowerSum:{default:!0}}),new T({cost:10,costInc:1.308,stepwisePowerSum:{default:!0}}),new T({cost:3e3,costInc:1.675,stepwisePowerSum:{default:!0}}),new T({cost:20,costInc:6.3496,varBase:2}),new T({cost:10,costInc:2.74,varBase:2}),new T({cost:1e3,costInc:1.965,varBase:2}),new T({cost:500,costInc:18.8343,varBase:2}),new T({cost:1e5,costInc:3.65,varBase:2}),new T({cost:1e5,costInc:2.27,varBase:2}),new T({cost:1e4,costInc:1248.27,varBase:2}),new T({cost:1e3,costInc:6.81744,varBase:2}),new T({cost:1e5,costInc:2.98,varBase:2})],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(12).fill(!0),[!0,!0,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!1,!0,!1,!1,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1],[!1,!0,!0,!1,!0,!1,!1,!0,!0,!1,!0,!1],[()=>this.curMult<1,!0,!0,!1,()=>!(this.curMult<1)||this.variables[4].cost+2<this.currencies[0],!1,!1,!0,!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1],[()=>this.curMult<1&&this.variables[0].cost+1<this.currencies[0],()=>this.variables[1].cost+M(3)<this.currencies[1],()=>this.variables[2].cost+M(5)<this.currencies[2],!1,()=>!(this.curMult<1)||this.variables[4].cost+2<this.currencies[0],!1,!1,()=>this.curMult<1||this.variables[7].cost+M(8)<this.currencies[1],!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1&&this.variables[11].cost+1<this.currencies[2]],[()=>this.variables[0].cost+M(7)<Math.min(this.variables[3].cost,this.variables[6].cost),()=>this.variables[1].cost+M(7)<this.variables[4].cost,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1],[()=>this.variables[0].cost+M(8)<this.variables[9].cost,()=>this.variables[1].cost+M(5)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+M(8)<this.variables[8].cost,!1,!0,!1,!1,!0,!0,!0,!0,!1],[()=>this.variables[0].cost+M(10)<Math.min(this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+M(4)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+M(10)<this.variables[8].cost,!1,!0,!1,!0,!0,!0,!0,!0,!1],[()=>this.variables[0].cost+M(8)<Math.min(this.variables[3].cost,this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+M(5)<Math.min(this.variables[4].cost,this.variables[7].cost),()=>this.variables[2].cost+M(8)<this.variables[8].cost,!0,!0,!1,!0,!0,!0,!0,!1,!1],[()=>this.variables[0].cost+M(10)<Math.min(this.variables[3].cost,this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+M(4)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+M(10)<this.variables[8].cost,!0,!0,!1,!0,!0,!0,!0,!0,!1],[()=>this.curMult<2&&this.variables[0].cost+M(8)<this.variables[9].cost,()=>!(this.curMult<2)||this.variables[1].cost+M(4)<Math.min(this.variables[4].cost,this.variables[10].cost)&&this.variables[1].cost+M(2)<this.variables[7].cost,()=>this.variables[2].cost+M(8)<this.variables[8].cost&&this.variables[2].cost+M(2)<this.variables[11].cost,!1,!0,!1,!1,()=>!(this.curMult<2)||this.variables[7].cost+M(2)<Math.min(this.variables[4].cost,this.variables[10].cost),!0,()=>this.curMult<2,!0,()=>this.variables[11].cost+M(4)<this.variables[8].cost],[()=>this.lastPub-this.maxRho>1&&this.variables[0].cost+M(8)<this.variables[9].cost,()=>(this.curMult<1.2?this.variables[1].cost+M(5)<this.variables[10].cost:this.variables[1].cost+M(8)<this.variables[4].cost)||this.curMult>2.4,()=>!(this.curMult<2.4)||this.variables[2].cost+M(8)<this.variables[8].cost,!1,()=>!(this.curMult<1.2)||this.variables[4].cost+2<this.variables[10].cost,!1,!1,()=>this.curMult<1.2?this.variables[7].cost+M(2.5)<this.variables[10].cost:this.variables[7].cost+M(8)<this.variables[4].cost,!0,()=>this.lastPub-this.maxRho>1,()=>this.curMult<1.2||this.curMult<2.4&&this.variables[10].cost+M(8)<this.variables[4].cost,()=>this.curMult<1.2&&this.variables[11].cost+M(10)<this.variables[8].cost]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>this.milestones[0]>0]}getMilestoneTree(){return[...new Array(15).fill([[0,0,0,0],[0,1,0,0],[0,2,0,0],[0,2,1,0],[0,2,2,0],[1,2,2,0],[1,2,2,1],[1,2,2,2]])]}getTotMult(t){return Math.max(0,.147*t+M(3))+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return C(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<175&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>9,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[1]),s=this.variables[1].value*(1+.05*this.milestones[2]),i=this.variables[2].value*(1+.05*this.milestones[3]),e=b(b(this.variables[3].value+t,this.variables[4].value+s),this.variables[5].value+i);this.currencies[0]=b(this.currencies[0],M(this.dt)+this.totMult+e);let h=b(b(this.variables[6].value+t,this.variables[7].value+s),this.variables[8].value+i);this.currencies[1]=b(this.currencies[1],M(this.dt)+this.totMult+h);let a=b(b(this.variables[9].value+t,this.variables[10].value+s),this.variables[11].value+i);this.currencies[2]=this.milestones[0]>0?b(this.currencies[2],M(this.dt)+this.totMult+a):0,this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<9||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--){let s=t%3;for(;this.currencies[s]>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.currencies[s]=d(this.currencies[s],this.variables[t].cost),this.variables[t].buy()}}}var S=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class R{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T4",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,2]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.recursionValue=t.recursionValue,this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new T({lvl:1,cost:5,costInc:1.305,value:1,stepwisePowerSum:{default:!0}}),new T({cost:20,costInc:3.75,varBase:2}),new T({cost:2e3,costInc:2.468,varBase:2}),new T({cost:1e4,costInc:4.85,varBase:3}),new T({cost:1e8,costInc:12.5,varBase:5}),new T({cost:1e10,costInc:58,varBase:10}),new T({cost:1e3,costInc:100,stepwisePowerSum:{default:!0}}),new T({cost:1e4,costInc:1e3,varBase:2})],this.variableSum=0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...p(8,!0)],[!0,!0,...p(6,!1)],[!1,!1,!0,...p(3,!1),!0,!0],[...p(3,!1),!0,!1,!1,!0,!0],[...p(4,!1),!0,!1,!0,!0],[...p(4,!1),!0,!0,!0,!0],[()=>this.variables[0].cost+1<this.variables[1].cost,!0,!1,!1,!1,!1,!1,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost),!0,!0,!1,!1,!1,()=>this.variables[6].cost+1<this.variables[7].cost,!0],[()=>this.variables[0].cost+1<this.variables[1].cost&&this.maxRho<this.lastPub,()=>this.maxRho<this.lastPub,!1,!0,!0,!0,!0,!0],[()=>this.variables[0].cost+1<this.variables[1].cost&&this.maxRho<this.lastPub,()=>this.maxRho<this.lastPub,!0,!1,!0,!0,!0,!0],[...p(4,!1),!0,!0,()=>this.variables[6].cost+1<this.variables[7].cost,!0],[!1,!1,()=>{var t;return this.variables[2].cost+.1<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)},...p(3,!1),()=>{var t;return this.variables[6].cost+M(10+this.variables[6].lvl%10)<=Math.min(this.variables[7].cost,this.variables[2].cost)&&this.variables[6].cost+M(10+this.variables[6].lvl%10)+1<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)},()=>{var t;return this.variables[7].cost+.5<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)&&(this.curMult<1||this.variables[7].cost+M(1.5)<=this.variables[2].cost)}]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>1,()=>this.milestones[0]>2,()=>!0,()=>!0]}getMilestoneTree(){return[[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,1,3]],[[0,0,0],[0,1,0]],[[0,0,0],[0,0,1],[0,0,2],[0,0,3]],[[0,0,0],[1,0,0],[1,0,1],[1,0,2],[1,0,3]],[[0,0,0],[1,0,0],[2,0,0],[2,0,1],[2,0,2],[2,0,3]],[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,3]],[[0,0,0],[0,1,0]],[[0,0,0],[0,1,0],[0,1,1],[0,1,2],[0,1,3]],[[0,0,0],[1,0,0],[1,0,1],[1,0,2],[1,0,3]],[[0,0,0],[0,1,0],[0,1,1],[0,1,2],[0,1,3],[1,1,3],[2,1,3],[3,1,3]],[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,3]],[[0,0,0],[0,0,1],[0,0,2],[0,0,3]]]}getTotMult(t){return Math.max(0,.165*t-M(4))+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));if(this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)],8===this.stratIndex){const s=[3,1,3];let i;this.milestones=[0,0,0],i=this.maxRho<this.lastPub?[2,3,1]:this.t%100<50?[3,1,2]:[1,3,2];let e=t;this.milestones=[0,0,0];for(let t=0;t<i.length;t++)for(;this.milestones[i[t]-1]<s[i[t]-1]&&e>0;)this.milestones[i[t]-1]++,e--}}simulate(t){return S(this,void 0,void 0,(function*(){if(null==this.recursionValue&&"T4C3d66"===this.strat&&Y.forcedPubTime===1/0){t.recursionValue=Number.MAX_VALUE;let s=yield new R(t).simulate(t);this.recursionValue=s[9][0]}let s=!1;for(;!s&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<176&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),s=Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:(this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>9,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,11===this.stratIndex?` q1:${this.variables[6].lvl} q2:${this.variables[7].lvl}`:""),this.result}))}tick(){let t=this.variables[6].value,s=this.variables[7].value,i=M(2)*this.milestones[2]+t+s-b(0,this.q);this.q=b(this.q,i+M(this.dt));let e=this.totMult+this.variableSum;this.rho=b(this.rho,e+M(this.dt)),this.t+=this.dt/1.5,this.dt*=11===this.stratIndex&&this.recursionValue===Number.MAX_VALUE?Math.min(1.3,10*this.ddt):this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<9||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=d(this.rho,this.variables[t].cost),this.variables[t].buy();let t=this.variables[0].value*(1+.15*this.milestones[1]),s=this.variables[1].value;this.variableSum=t+s,this.variables[2].lvl>0&&(this.variableSum=b(this.variableSum,this.variables[2].value+this.q)),this.variables[3].lvl>0&&(this.variableSum=b(this.variableSum,this.variables[3].value+2*this.q)),this.variables[4].lvl>0&&(this.variableSum=b(this.variableSum,this.variables[4].value+3*this.q)),this.variables[5].lvl>0&&(this.variableSum=b(this.variableSum,this.variables[5].value+4*this.q))}}var A=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class k{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T5",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new T({lvl:1,cost:10,costInc:1.61328,value:1,stepwisePowerSum:{default:!0}}),new T({cost:15,costInc:64,varBase:2}),new T({cost:1e6,costInc:1.18099,value:1,stepwisePowerSum:{default:!0}}),new T({cost:75,costInc:4.53725,varBase:2}),new T({cost:1e3,costInc:88550700,varBase:2})],this.c2worth=!0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[!0,!0,()=>this.maxRho+(this.lastPub-200)/165<this.lastPub,()=>this.c2worth,!0],[()=>this.variables[0].cost+M(3+this.variables[0].lvl%10)<=Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[4].cost:1e3),!0,()=>this.q+M(1.5)<this.variables[3].value+this.variables[4].value*(1+.05*this.milestones[2])||!this.c2worth,()=>this.c2worth,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getMilestoneTree(){return[...new Array(3).fill([[0,0,0],[0,1,0],[1,1,0],[2,1,0],[3,1,0],[3,1,1],[3,1,2]])]}getTotMult(t){return Math.max(0,.159*t)+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}calculateQ(t,s,i){let e=Math.log10(Math.E),h=-1/0;s+i>this.q?h=d(s+i,this.q):s+i<this.q&&(h=d(this.q,s+i));let a=s+i>=this.q?1:-1,o=0;return h>this.q?o=-Math.pow(10,s-t-i+a*Math.log10((h-this.q)/e)):h<this.q&&(o=Math.pow(10,s-t-i+a*Math.log10((this.q-h)/e))),s+i-Math.log10(1+1/Math.pow(Math.E,(o+this.dt)*Math.pow(10,t-s+i)))}simulate(){return A(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<150&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>7,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,1===this.stratIndex?" "+u(this.variables[2].cost,1):""),this.result}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[0]),s=this.milestones[1]>0?this.variables[4].value*(1+.05*this.milestones[2]):0;this.q=this.calculateQ(this.variables[2].value,this.variables[3].value,s);let i=t+this.variables[1].value+this.q;this.rho=b(this.rho,i+this.totMult+M(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<7||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=0,s=this.milestones[1]>0?this.variables[4].value*(1+.05*this.milestones[2]):0,i=this.calculateQ(this.variables[2].value,this.variables[3].value,s);this.c2worth=i>=this.variables[3].value+s+M(2/3);for(let e=this.variables.length-1;e>=0;e--)for(;this.rho>this.variables[e].cost&&this.conditions[this.stratIndex][e]()&&this.milestoneConditions[e]();)this.rho=d(this.rho,this.variables[e].cost),this.variables[e].buy(),3===e&&(t++,i=this.calculateQ(this.variables[2].value,this.variables[3].value+M(2)*t,s),this.c2worth=i>=this.variables[3].value+M(2)*t+this.variables[4].value*(1+.05*this.milestones[2])+M(2/3))}}var H=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class V{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T6",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.r=0,this.variables=[new T({lvl:1,cost:15,costInc:3,value:1,stepwisePowerSum:{default:!0}}),new T({cost:500,costInc:100,varBase:2}),new T({cost:1e25,costInc:1e5,stepwisePowerSum:{default:!0}}),new T({cost:1e30,costInc:1e10,varBase:2}),new T({cost:10,costInc:2,value:1,stepwisePowerSum:{default:!0}}),new T({cost:100,costInc:5,varBase:2}),new T({cost:1e7,costInc:1.255,stepwisePowerSum:{default:!0}}),new T({cost:1e25,costInc:5e5,varBase:2}),new T({cost:15,costInc:3.9,varBase:2})],this.k=0,this.stopC12=[0,0,!0],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!1,!1,!0,!1,!1],[!0,!0,!0,!0,!1,!1,!1,!0,!1],[!0,!0,!0,!0,!0,!0,!1,!1,!0],[!0,!0,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!1,!1,!1,!0],[!0,!0,!0,!0,()=>this.stopC12[2],()=>this.stopC12[2],!1,!1,!0],[()=>this.variables[0].cost+M(3)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[6].cost),!0,()=>this.variables[2].cost+M(3)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[6].cost),!0,!1,!1,!0,!1,!1],[()=>this.variables[0].cost+M(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[7].cost),!0,()=>this.variables[2].cost+M(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[7].cost),!0,!1,!1,!1,!0,!1],[()=>this.variables[0].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[2].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[4].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,!1,!1,!0],[()=>this.variables[0].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,()=>this.variables[2].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,()=>this.variables[4].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,!1,!1,!1],[()=>this.variables[0].cost+M(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[2].cost+M(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,!1,!1,!1,!1,!0],[!1]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[2]>0]}getMilestoneTree(){return[...new Array(13).fill([[0,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,0],[1,0,0,3],[1,0,1,3],[1,1,1,3]])]}getTotMult(t){return Math.max(0,.196*t)-M(50)+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}calculateIntegral(t,s,i,e,h){let a=t+s+this.q+this.r,o=i+2*this.q+this.r-M(2),l=this.milestones[1]>0?e+3*this.q+this.r-M(3):0,r=this.milestones[2]>0?h+this.q+2*this.r-M(2):0;return this.k=r-a,this.totMult+b(a,b(o,b(l,r)))}simulate(){return H(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<150&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>12,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,"T6snax"===this.strat?" "+u(this.stopC12[0],1):""),this.result}))}tick(){let t=this.variables[4].value*(1+.05*this.milestones[3]),s=d(this.calculateIntegral(t,this.variables[5].value,this.variables[6].value,this.variables[7].value,this.variables[8].value),this.rho);this.q=b(this.q,this.variables[0].value+this.variables[1].value+M(this.dt)),this.r=this.milestones[0]>0?b(this.r,this.variables[2].value+this.variables[3].value+M(this.dt)-3):0;let i=this.calculateIntegral(t,this.variables[5].value,this.variables[6].value,this.variables[7].value,this.variables[8].value);s=s>i?i:s,this.rho=Math.max(0,d(i,s)),this.k>.3?this.stopC12[1]++:this.stopC12[1]=0,this.stopC12[1]>30&&this.stopC12[2]&&(this.stopC12[0]=this.maxRho,this.stopC12[2]=!1),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<12||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){if(12!==this.stratIndex)for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=d(this.rho,this.variables[t].cost),this.variables[t].buy();else for(;;){let t=this.variables.map((t=>t.cost)),s=[M(7+this.variables[0].lvl%10),0,M(5+this.variables[2].lvl%10),0,Math.max(0,this.k)+M(8+this.variables[4].lvl%10),Math.max(0,this.k),1/0,1/0,-Math.min(0,this.k)],i=[Number.MAX_VALUE,-1];for(let e=this.variables.length-1;e>=0;e--)t[e]+s[e]<i[0]&&this.milestoneConditions[e]()&&(i=[t[e]+s[e],e]);if(!(-1!==i[1]&&t[i[1]]<this.rho))break;this.rho=d(this.rho,this.variables[i[1]].cost),this.variables[i[1]].buy()}}}var q=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class O{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T7",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.rho2=0,this.variables=[new T({lvl:1,cost:500,costInc:1.51572,value:1,stepwisePowerSum:{default:!0}}),new T({cost:10,costInc:1.275,value:1,stepwisePowerSum:{default:!0}}),new T({cost:40,costInc:8,varBase:2}),new T({cost:1e5,costInc:63,varBase:2}),new T({cost:10,costInc:2.82,varBase:2}),new T({cost:1e8,costInc:60,varBase:2}),new T({cost:100,costInc:2.81,varBase:2})],this.drho13=0,this.drho23=0,this.c2ratio=1/0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){this.lastPub>=100&&(this.c2ratio=100),this.lastPub>=175&&(this.c2ratio=10),this.lastPub>=250&&(this.c2ratio=20),this.lastPub>=275&&(this.c2ratio=50),this.lastPub>=300&&(this.c2ratio=1/0);let t=[[!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!1,!1,!1,!1],[!0,!1,!1,!0,!1,!1,!1],[!0,!1,!1,!0,!0,!0,!0],[!0,!1,!1,!1,!0,!0,!0],[!0,!1,!1,!1,!1,!0,!0],[()=>this.variables[0].cost+1<this.variables[2].cost,()=>this.variables[1].cost+M(8)<this.variables[2].cost,!0,!1,!1,!1,!1],[()=>this.variables[0].cost+1<this.variables[3].cost,!1,!1,!0,!1,!1,!1],[()=>this.variables[0].cost+M(4)<this.variables[6].cost,()=>this.variables[1].cost+M(10+this.variables[2].lvl)<this.variables[2].cost,()=>this.variables[2].cost+M(this.c2ratio)<this.variables[6].cost,()=>this.variables[3].cost+1<this.variables[6].cost,()=>this.variables[4].cost+1<this.variables[6].cost,()=>this.variables[5].cost+M(4)<this.variables[6].cost,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0,()=>this.milestones[0]>0,()=>this.milestones[2]>0,()=>this.milestones[3]>0]}getMilestoneTree(){return[[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,2],[1,1,1,1,3]],[[0,0,0,0,0],[0,0,0,0,1],[0,0,0,0,2],[0,0,0,0,3]],[[0,0,0,0,0],[0,1,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]],[[0,0,0,0,0],[1,0,0,0,0],[1,0,1,0,0],[1,0,1,1,0]],[[0,0,0,0,0],[1,0,0,0,0],[1,0,1,0,0],[1,0,1,1,0]],[[0,0,0,0,0],[0,0,0,0,1],[0,0,0,0,2],[0,0,0,0,3]],[[0,0,0,0,0],[0,1,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,2],[1,1,1,1,3]]]}getTotMult(t){return Math.max(0,.152*t)+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return q(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<175&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,"T7PlaySpqcey"===this.strat&&this.c2ratio!==1/0?this.c2ratio.toString():""),this.result}))}tick(){let t=this.variables[1].value*(1+.05*this.milestones[4])+this.variables[2].value,s=this.milestones[1]>0?M(1.5)+this.variables[3].value+this.rho/2:0,i=this.milestones[0]>0?this.variables[4].value:0,e=this.milestones[2]>0?M(1.5)+this.variables[5].value+this.rho2/2:0;this.drho13=this.milestones[3]>0?Math.min(this.drho13+2,Math.min(M(.5)+this.variables[6].value+this.rho2/2-this.rho/2,this.rho+2)):0,this.drho23=this.milestones[3]>0?Math.min(this.drho23+2,Math.min(M(.5)+this.variables[6].value+this.rho/2-this.rho2/2,this.rho2+2)):0;let h=M(this.dt)+this.variables[0].value+this.totMult;this.rho=b(this.rho,h+b(b(t,s),this.drho13)),this.rho2=b(this.rho2,h+b(b(i,e),this.drho23)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=d(this.rho,this.variables[t].cost),this.variables[t].buy()}}var L=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class E{constructor(t){var s;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="T8",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.variables=[new T({lvl:1,cost:10,costInc:1.5172,value:1,stepwisePowerSum:{default:!0}}),new T({cost:20,costInc:64,varBase:2}),new T({cost:100,costInc:Math.pow(2,1.15*Math.log2(3)),varBase:3}),new T({cost:100,costInc:Math.pow(2,1.15*Math.log2(5)),varBase:5}),new T({cost:100,costInc:Math.pow(2,1.15*Math.log2(7)),varBase:7})],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.bounds=[[[0,-20,20],[0,-27,27],[24.5,1,48]],[[.5,-23,24],[1,-25,27],[20.5,1,40]],[[1,-20,22],[-1.5,-21,18],[8,0,37]]],this.defaultStates=[[-6,-8,26],[-10.6,-4.4,28.6],[-6,15,0]],this.dts=[.02,.002,14e-5],this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2],this.dx=0,this.dy=0,this.dz=0,this.msTimer=0,this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[!0,!0,!1,!0,!0],[!0,!0,!0,!0,!1],[!0,!0,!1,!0,!1],[()=>this.curMult<1.6,!0,()=>this.curMult<2.3,!0,()=>this.curMult<2.3],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!1,!0,!0],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!0,!0,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!1,!0,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!0,!0,!0],[()=>this.variables[0].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[2].cost+M(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[4].cost+M(4)<Math.min(this.variables[1].cost,this.variables[3].cost)],[()=>this.variables[0].cost+M(8)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[2].cost+M(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[4].cost+M(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost)]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>!0]}getMilestoneTree(){return[[[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,1,3,0],[2,2,3,0],[2,3,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,1,3,0],[2,2,3,0],[2,3,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0]],...new Array(3).fill([[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]])]}getTotMult(t){return Math.max(0,.15*t)+M(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(11,Math.floor(Math.max(this.lastPub,this.maxRho)/20));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}dn(t=this.x,s=this.y,i=this.z){0===this.milestones[0]&&(this.dx=10*(s-t),this.dy=t*(28-i)-s,this.dz=t*s-8*i/3),1===this.milestones[0]&&(this.dx=40*(s-t)*10,this.dy=10*(-12*t-t*i+28*s),this.dz=10*(t*s-3*i)),2===this.milestones[0]&&(this.dx=500*(-s-i),this.dy=500*(t+.1*s),this.dz=500*(.1+i*(t-14)))}simulate(){return L(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<220&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>8,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){this.dn();let t=this.x+.5*this.dx*this.dts[this.milestones[0]],s=this.y+.5*this.dy*this.dts[this.milestones[0]],i=this.z+.5*this.dz*this.dts[this.milestones[0]];this.dn(t,s,i),this.x+=this.dx*this.dts[this.milestones[0]],this.y+=this.dy*this.dts[this.milestones[0]],this.z+=this.dz*this.dts[this.milestones[0]],this.dn();let e=5*(this.bounds[this.milestones[0]][0][1]-this.bounds[this.milestones[0]][0][0])+this.bounds[this.milestones[0]][0][0],h=5*(this.bounds[this.milestones[0]][0][2]-this.bounds[this.milestones[0]][0][0])+this.bounds[this.milestones[0]][0][0],a=5*(this.bounds[this.milestones[0]][1][1]-this.bounds[this.milestones[0]][1][0])+this.bounds[this.milestones[0]][1][0],o=5*(this.bounds[this.milestones[0]][1][2]-this.bounds[this.milestones[0]][1][0])+this.bounds[this.milestones[0]][1][0],l=5*(this.bounds[this.milestones[0]][2][1]-this.bounds[this.milestones[0]][2][0])+this.bounds[this.milestones[0]][2][0],r=5*(this.bounds[this.milestones[0]][2][2]-this.bounds[this.milestones[0]][2][0])+this.bounds[this.milestones[0]][2][0];(this.x<e||this.x>h||this.y<a||this.y>o||this.z<l||this.z>r)&&(this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2]),this.dn(),this.msTimer++,335==this.msTimer&&10===this.stratIndex&&(this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2],this.msTimer=0);let n=this.variables[2].value*(1+.05*this.milestones[1]),u=this.variables[3].value*(1+.05*this.milestones[2]),c=this.variables[4].value*(1+.05*this.milestones[3]),v=n+M(this.dx*this.dx),m=u+M(this.dy*this.dy),d=c+M(this.dz*this.dz),p=M(this.dt)+this.totMult+this.variables[0].value+this.variables[1].value+b(b(v,m),d)/2-2;this.rho=b(this.rho,p),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=d(this.rho,this.variables[t].cost),this.variables[t].buy()}}var F=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class ${constructor(t){var s;this.srK_helper=t=>{let s=t*t;return Math.log(s+1/6+1/120/s+1/810/s/s)/2-1},this.sineRatioK=(t,s,i=5)=>{if(t<1||s>=t+1)return 0;let e=t+1+i,h=s*s,a=this.srK_helper(e+s),o=this.srK_helper(e-s),l=e*(a+o-2*this.srK_helper(e))+s*(a-o)-Math.log(1-h/e/e)/2;for(let s=t+1;s<e;++s)l-=Math.log(1-h/s/s);return Math.LOG10E*l},this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="WSP",this.tauFactor=l(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new T({lvl:1,cost:10,costInc:Math.pow(2,.845),value:1,stepwisePowerSum:{default:!0}}),new T({cost:1e3,costInc:Math.pow(2,10.14),varBase:2}),new T({cost:20,costInc:Math.pow(2,3.38)}),new T({cost:50,costInc:Math.pow(2,3.38/1.5),stepwisePowerSum:{base:2,length:50}}),new T({cost:1e10,costInc:Math.pow(2,33.8),varBase:2})],this.S=0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=0;this.lastPub>=25&&(t=M(3)),this.lastPub>=40&&(t=1),this.lastPub>=200&&(t=M(50)),this.lastPub>=400&&(t=3),this.lastPub>=700&&(t=1e4);let s=[[!0,!0,!0,!0,!0],[!0,!0,!0,()=>this.lastPub<450||this.t<15,!0],[()=>this.variables[0].cost+M(8+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[2].cost,this.milestones[1]>0?this.variables[4].cost:1/0),!0,!0,()=>this.variables[3].cost+t<Math.min(this.variables[1].cost,this.variables[2].cost,this.milestones[1]>0?this.variables[4].cost:1/0)||this.t<15,!0]];return s=s.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),s}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getMilestoneTree(){return[...new Array(3).fill([[0,0,0],[0,0,1],[0,0,2],[0,0,3],[0,1,3],[1,1,3],[2,1,3],[3,1,3],[4,1,3]])]}getTotMult(t){return Math.max(0,t*this.tauFactor*1.5)}updateMilestones(){let t=0,s=[10,25,40,55,70,100,140,200];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}updateS(){let t=M(this.variables[2].value),s=this.variables[3].value,i=Math.pow(10,M(Math.PI)+s+t-b(s,t-M(3)*this.milestones[2]))+1;this.S=this.sineRatioK(this.variables[2].value,i/Math.PI)}simulate(){return F(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<200&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>8,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=this.variables[0].value*(1+.01*this.milestones[0]),s=Math.max(0,M(this.dt)+this.S+this.variables[4].value);this.q=b(this.q,s);let i=this.totMult+t+this.variables[1].value+this.q+M(this.dt);this.rho=b(this.rho,i),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();)this.rho=d(this.rho,this.variables[s].cost),this.variables[s].buy(),2!==s&&4!==s||(t=!0);t&&this.updateS()}}var D=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class _{constructor(t){var s;this.updateInverseE_Gamma=t=>{let s=M(M(2)/Math.LOG10E+t/Math.LOG10E+M(Math.PI)/Math.LOG10E)-(M(2)+t);this.inverseE_Gamma=0-Math.LOG10E-b(d(s,s+s-M(2)),s+s+s+M(6))},this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="SL",this.tauFactor=l(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.rho2=0,this.rho3=0,this.q=0,this.variables=[new T({lvl:1,cost:1,costInc:Math.pow(2,.369*Math.log2(10)),value:1,stepwisePowerSum:{base:3.5,length:3}}),new T({cost:175,costInc:10,varBase:2}),new T({cost:500,costInc:Math.pow(2,.649*Math.log2(10)),stepwisePowerSum:{base:6.5,length:4}}),new T({cost:1e3,costInc:Math.pow(2,.926*Math.log2(10)),varBase:2})],this.inverseE_Gamma=0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0],[()=>this.curMult<4.5,()=>this.curMult<4.5,()=>this.curMult<6,()=>this.curMult<6],[()=>this.curMult<4.5&&this.variables[0].cost+M(this.variables[0].lvl%3*2+1e-4)<this.variables[1].cost,()=>this.curMult<4.5,()=>this.curMult<6&&this.variables[2].cost+M(this.variables[2].cost%4)<this.variables[3].cost,()=>this.curMult<6],[()=>this.curMult<4,()=>this.curMult<4,()=>this.curMult<7.5,()=>this.curMult<7.5],[()=>this.curMult<4&&this.variables[0].cost+M(this.variables[0].lvl%3*2+1e-4)<this.variables[1].cost,()=>this.curMult<4,()=>this.curMult<7.5&&this.variables[2].cost+M(this.variables[2].cost%4)<this.variables[3].cost,()=>this.curMult<7.5]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0]}getTotMult(t){return Math.max(0,t*this.tauFactor*1.5)}updateMilestones(){let t=Math.max(this.lastPub,this.maxRho),s=Math.min(13,Math.floor(t/25));this.milestones=[0,0,0,0];let i=[4,3,1,2];if(this.stratIndex>2&&t>=25&&t<=300){let s=5,e=4;t<50?(s=5,e=4):t<75?(s=7,e=6):t<100?(s=12,e=10):t<150?(s=20,e=15):t<175?(s=8,e=6):t<200?(s=1.5,e=1):t<275?(s=3,e=3):t<300&&(s=2,e=2);let h=Math.min(this.variables[2].cost,this.variables[3].cost);this.rho+M(s)<h?i=[4,3,1,2]:this.curMult>4.5||this.rho+M(e)>h?i=[1,2,4,3]:this.rho+M(s)>h&&this.rho+M(e)<h&&(i=[2,1,4,3])}const e=[3,5,2,2];for(let t=0;t<i.length;t++)for(;this.milestones[i[t]-1]<e[i[t]-1]&&s>0;)this.milestones[i[t]-1]++,s--}simulate(){return D(this,void 0,void 0,(function*(){let t=!1;for(;!t&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<300&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>10,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=this.variables[2].value*(1+.02*this.milestones[2])+this.variables[3].value*(1+.02*this.milestones[3]);this.rho3=b(this.rho3,t+M(this.dt)),this.updateInverseE_Gamma(Math.max(1,this.rho3));let s=Math.LOG10E*(this.variables[0].value/Math.LOG10E+this.variables[1].value/Math.LOG10E-Math.log(2-.008*this.milestones[1])*(Math.max(1,this.rho3)/Math.LOG10E));this.rho2=b(this.rho2,Math.max(0,s)+M(this.dt));let i=this.rho2*(1+.02*this.milestones[0])*.5+this.inverseE_Gamma;this.rho=b(this.rho,i+this.totMult+M(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=d(this.rho,this.variables[t].cost),this.variables[t].buy()}}var z=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};function W(t){return z(this,void 0,void 0,(function*(){let s=new N(t);return yield s.simulate(t)}))}class N{constructor(t){var s,i;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="EF",this.tauFactor=l(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.currencies=[0,0,0],this.maxRho=0,this.q=0,this.t_var=0,this.variables=[new T({cost:1e6,costInc:1e6}),new T({cost:10,costInc:1.61328,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new T({cost:5,costInc:60,varBase:2}),new T({cost:20,costInc:200,value:1,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new T({cost:100,costInc:2,varBase:1.1}),new T({cost:20,costInc:200,value:1,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new T({cost:100,costInc:2,varBase:1.1}),new T({cost:2e3,costInc:Math.pow(2,2.2),value:1,stepwisePowerSum:{default:!0}}),new T({cost:500,costInc:Math.pow(2,2.2),value:1,stepwisePowerSum:{base:40,length:10}}),new T({cost:500,costInc:Math.pow(2,2.2),varBase:2})],this.recursionValue=null!==(i=t.recursionValue)&&void 0!==i?i:[1/0,0],this.lastA23=[0,0],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0,0],this.nextMilestoneCost=1/0,this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...new Array(10).fill(!0)],[!0,()=>this.curMult<1,!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1||this.lastPub>150,!0,!0],[!0,()=>this.variables[1].cost+1<this.variables[2].cost,!0,!0,!0,!0,!0,()=>this.variables[6].cost+M(2.5)<this.variables[2].cost,!0,!0],[!0,()=>this.variables[1].cost+M(10+this.variables[1].lvl%10)<this.variables[2].cost&&this.variables[1].cost+M(this.variables[1].lvl%10+5)<this.recursionValue[0],()=>this.variables[2].cost+.2<this.recursionValue[0],()=>this.variables[3].cost+M(5)<this.variables[8].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[4].cost+M(5)<this.variables[8].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[5].cost+M(5)<this.variables[9].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[6].cost+M(5)<this.variables[9].cost||this.milestones[1]<2||this.curMult<1,()=>(this.variables[7].cost+M(4+this.variables[7].lvl%10/2)<this.variables[2].cost||this.variables[2].cost>this.recursionValue[0])&&this.variables[7].cost+M(this.variables[7].lvl%10/3)<this.recursionValue[0],!0,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>this.variables[0].lvl<4&&this.maxRho+M(5)<this.nextMilestoneCost,()=>this.maxRho+M(5)<this.nextMilestoneCost,()=>this.maxRho+M(5)<this.nextMilestoneCost,()=>this.milestones[0]>0&&this.maxRho+M(5)<this.nextMilestoneCost,()=>this.milestones[0]>0&&this.maxRho+M(5)<this.nextMilestoneCost,()=>this.milestones[0]>1&&this.maxRho+M(5)<this.nextMilestoneCost,()=>this.milestones[0]>1&&this.maxRho+M(5)<this.nextMilestoneCost,()=>this.milestones[1]>0&&this.maxRho+M(5)<this.nextMilestoneCost,()=>this.milestones[1]>1,()=>this.milestones[1]>2]}getMilestoneTree(){return[...new Array(4).fill([[0,0,0,0,0],[1,0,0,0,0],[2,0,0,0,0],[2,1,0,0,0],[2,2,0,0,0],[2,3,0,0,0],[2,3,1,0,0],[2,3,2,0,0],[2,3,3,0,0],[2,3,4,0,0],[2,3,5,0,0],[2,3,5,1,0],[2,3,5,2,0],[2,3,5,2,1],[2,3,5,2,2]])]}getTotMult(t){return Math.max(0,t*this.tauFactor*.387)}updateMilestones(){let t=0,s=[10,20,30,40,50,70,90,110,130,150,250,275,300,325];for(let i=0;i<s.length;i++)if(Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1),s[i]>Math.max(this.lastPub,this.maxRho)){this.nextMilestoneCost=s[i];break}Math.max(this.lastPub,this.maxRho)>325&&(this.nextMilestoneCost=1/0),this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)],this.variables[4].varBase!==1.1+.01*this.milestones[3]&&(this.variables[4].varBase=1.1+.01*this.milestones[3],this.variables[4].reCalculate()),this.variables[6].varBase!==1.1+.0125*this.milestones[4]&&(this.variables[6].varBase=1.1+.0125*this.milestones[4],this.variables[6].reCalculate())}evaluatePubConditions(){if(3!==this.stratIndex)return!1;let t=0,s=0,i=[10,20,30,40,50,70,90,110,130,150,250,275,300,325];for(let e=0;e<i.length;e++)Math.max(this.lastPub,this.maxRho)>=i[e]&&(t=e+1),this.lastPub>=i[e]&&(s=e+1);return this.lastPub<30&&this.maxRho>32.4||this.lastPub<40&&this.maxRho>42||this.lastPub<50&&this.maxRho>55||this.lastPub<70&&this.maxRho>72||this.lastPub<90&&this.maxRho>92||this.lastPub<110&&this.maxRho>113||this.lastPub<150&&this.maxRho>153||this.lastPub<130&&this.maxRho>134||this.lastPub<146&&this.lastPub>145&&this.curMult>2||this.lastPub<126&&this.lastPub>125&&this.curMult>2||this.lastPub<106&&this.lastPub>105&&this.curMult>3||this.lastPub<87&&this.lastPub>85&&this.curMult>3||this.lastPub<67&&this.lastPub>65&&this.curMult>3||this.lastPub<46.4&&this.lastPub>44.7&&this.curMult>3||this.lastPub<37&&this.lastPub>36&&this.curMult>3||this.lastPub<27&&this.lastPub>26&&this.curMult>3||this.lastPub<298.2&&this.maxRho>300||this.lastPub<323.2&&this.maxRho>325||t-s<1&&this.curMult>t-s+2.6&&this.recursionValue[1]<2&&3===this.stratIndex||2===this.recursionValue[1]&&this.pubRho>this.variables[7].cost+M(4)&&this.variables[7].cost+M(this.variables[7].lvl%10/3)>this.recursionValue[0]}forcedPubConditions(){return 3!==this.stratIndex||(this.lastPub<296||this.pubRho>300)&&(this.lastPub<321||this.pubRho>325)}evaluateTauHConditions(){return 3===this.stratIndex&&(this.lastPub<298.2&&this.lastPub>=296||this.lastPub>=321&&this.lastPub<323.2)}simulate(t){return z(this,void 0,void 0,(function*(){if(this.lastPub>=10&&null==t.recursionValue&&3===this.stratIndex){t.recursionValue=[1/0,0];let s=yield W(t);t.recursionValue=[s[9][0],1];let i=yield W(t);this.recursionValue=[i[9][0],2],this.recursionValue[0]>300&&this.recursionValue[0]<301&&(this.recursionValue[0]=299.2),this.recursionValue[0]>325&&this.recursionValue[0]<326&&(this.recursionValue[0]=324.2)}let s=!1;for(;!s&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<325&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),s=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.evaluatePubConditions())&&this.pubRho>10&&this.forcedPubConditions(),this.ticks++;if(this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,3===this.stratIndex?` q1: ${this.variables[1].lvl} q2: ${this.variables[2].lvl} a1: ${this.variables[7].lvl}`+(Y.showA23?` a2: ${this.lastA23[0]} a3: ${this.lastA23[1]}`:""):""),3===this.stratIndex&&2===this.recursionValue[1]){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();Y.varBuy.push([this.result[7],this.boughtVars])}return this.result}))}tick(){let t=M(this.dt)+this.totMult;this.q=b(this.q,this.variables[1].value+this.variables[2].value+t),this.t_var+=this.dt*(this.variables[0].lvl/5+.2);let s=(this.variables[7].value+this.variables[8].value+this.variables[9].value)*(.1*this.milestones[2]+1),i=this.variables[3].value+this.variables[4].value,e=this.variables[5].value+this.variables[6].value,h=i+M(Math.abs(Math.cos(this.t_var))),a=e+M(Math.abs(Math.sin(this.t_var)));switch(this.currencies[1]=this.milestones[0]>0?b(this.currencies[1],t+2*h):0,this.currencies[2]=this.milestones[0]>1?b(this.currencies[2],t+2*a):0,this.milestones[0]){case 0:this.currencies[0]=b(this.currencies[0],t+(M(this.t_var)+2*this.q)/2);break;case 1:this.currencies[0]=b(this.currencies[0],t+b(M(this.t_var)+2*this.q,2*this.currencies[1])/2);break;case 2:this.currencies[0]=b(this.currencies[0],t+s+b(b(M(this.t_var)+2*this.q,2*this.currencies[1]),2*this.currencies[2])/2)}this.t+=this.dt/1.5,this.dt*=3===this.stratIndex&&this.recursionValue[1]<2?Math.min(1.3,50*this.ddt):this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||Y.forcedPubTime!==1/0||this.evaluateTauHConditions())&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho,this.lastA23=[this.variables[8].lvl,this.variables[9].lvl])}buyVariables(){let t=[0,0,0,1,1,2,2,0,1,2];for(let s=this.variables.length-1;s>=0;s--)for(;this.currencies[t[s]]>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&3===this.stratIndex&&2===this.recursionValue[1]){let t=["t","q1","q2","b1","b2","c1","c2","a1","a2","a3"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.currencies[t[s]]=d(this.currencies[t[s]],this.variables[s].cost),this.variables[s].buy()}}}var G=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class J{constructor(t){var s,i;this.stratIndex=e(t.strats,t.strat),this.strat=t.strat,this.theory="CSR2",this.tauFactor=l(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=Y.dt,this.ddt=Y.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.t_var=0,this.variables=[new T({cost:10,costInc:5,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new T({cost:15,costInc:128,varBase:2}),new T({cost:1e6,costInc:16,value:1,stepwisePowerSum:{default:!0}}),new T({cost:50,costInc:Math.pow(2,3.346*Math.log2(256))}),new T({cost:1e3,costInc:Math.pow(10,5.65),varBase:2})],this.recursionValue=null!==(i=t.recursionValue)&&void 0!==i?i:[1/0,0],this.bestCoast=[0,0],this.updateError_flag=!0,this.error=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[()=>this.variables[0].cost+M(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),!0,()=>this.variables[2].cost+M(15+this.variables[2].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),!0,!0],[()=>this.variables[0].cost+M(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),()=>this.variables[1].cost+M(1.8)<this.variables[4].cost,()=>this.variables[2].cost+M(15+this.variables[2].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),()=>this.variables[3].cost+M(1.3)<this.variables[4].cost,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getTotMult(t){return Math.max(0,t*this.tauFactor*2.203-M(200))}updateMilestones(){let t=0,s=[10,45,80,115,220,500];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);let i=[2,3,1];if(this.lastPub<500&&2===this.stratIndex){let t=0;this.lastPub>45&&(t=4),this.lastPub>80&&(t=8),this.lastPub>115&&(t=20),this.lastPub>220&&(t=40),i=(this.rho+M(.5*t)>this.variables[3].cost||this.rho+M(t)>this.variables[4].cost&&this.milestones[1]>0||this.curMult>1&&this.rho+M(2)>this.variables[1].cost)&&this.rho<Math.min(this.variables[3].cost,this.variables[4].cost)||this.t>this.recursionValue[0]?[1,2,3]:[2,3,1]}this.milestones=[0,0,0];const e=[3,1,2];for(let s=0;s<i.length;s++)for(;this.milestones[i[s]-1]<e[i[s]-1]&&t>0;)this.milestones[i[s]-1]++,t--}updateError(t){if(t<6){let s=[0,M(2.060660172040101),M(12.010407635829813),M(70.00178562229294),M(408.0003059755347),M(2378.000049517553)];return void(this.error=s[t])}let s=Math.SQRT2,i=(Math.pow(-(s-1),t)*(t%2?-1:1)+Math.pow(1+s,t))/2/s,e=Math.pow(s+1,t)*(t%2?-1:1);this.error=M(Math.abs(i))+M(Math.abs(e))}searchCoast(t){if(this.curMult>.7){let i=(s=this.lastPub)<45?Math.pow(s,2.1)/10:s<80?Math.pow(s,2.22)/40:s<220?Math.pow(s,2.7)/33e3+40:s<500?Math.pow(s,2.8)/92e3+40:5*Math.pow(1.5,Math.pow(s,.8475)/20);const e=(this.totMult+Math.log10(4)+Math.log10(200))/2.203*10;if(this.lastPub<500){{let s=b(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),h=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<h&&(this.bestCoast[0]=h,this.bestCoast[1]=this.t)}i*=.8;{let s=b(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),h=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<h&&(this.bestCoast[0]=h,this.bestCoast[1]=this.t)}i/=Math.pow(.8,2);{let s=b(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),h=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<h&&(this.bestCoast[0]=h,this.bestCoast[1]=this.t)}}else{t=this.totMult+this.variables[0].value*(1+.05*this.milestones[0])+this.variables[1].value+this.q;let s=this.totMult+this.variables[2].value+1.15*this.variables[4].value+this.error,h=b(this.q+M(2),s+Math.log10(1.5*i))-M(2),a=b(this.rho,t-this.q+h+Math.log10(1.5*i)),o=(a-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<o&&a<e&&(this.bestCoast[0]=o,this.bestCoast[1]=this.t)}}var s}simulate(t){return G(this,void 0,void 0,(function*(){if(this.lastPub>=10&&null==t.recursionValue&&2===this.stratIndex){t.recursionValue=[1/0,0];let s=new J(t);yield s.simulate(t),this.recursionValue=[s.bestCoast[1],1]}let s=!1;for(;!s&&Y.simulating;)(this.ticks+1)%5e5==0&&(yield h()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),(null!=this.recursionValue&&this.t<this.recursionValue[0]||this.curMult<.7||0===this.recursionValue[1])&&this.buyVariables(),this.lastPub<500&&this.updateMilestones(),s=(Y.forcedPubTime!==1/0?this.t>Y.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let i=0;for(let t=0;t<this.variables.length;t++)i=Math.max(i,this.variables[t].cost-this.variables[t].costInc);return this.result=g(this,2===this.stratIndex?" "+Math.min(this.pubMulti,Math.pow(10,this.getTotMult(i)-this.totMult)).toFixed(2):""),1===this.recursionValue[1]&&2===this.stratIndex&&Y.varBuy.push([this.result[7],this.boughtVars]),this.result}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[0]),s=this.milestones[1]>0?this.variables[4].value*(1+.5*this.milestones[2]):0;if(this.updateError_flag){let t=this.milestones[1]>0?this.variables[4].lvl:0,s=this.variables[3].lvl+1+t;this.updateError(s),this.updateError_flag=!1}this.lastPub<500&&this.searchCoast(this.totMult+this.variables[1].value+this.q);let i=this.variables[2].value+s+this.error;this.q=b(this.q,this.totMult+M(this.dt)+i);let e=this.totMult+t+this.variables[1].value+this.q;this.rho=b(this.rho,e+M(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||Y.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&2===this.stratIndex){let t=["q1","q2","c1","n","c2"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.rho=d(this.rho,this.variables[s].cost),this.variables[s].buy(),s>2&&(this.updateError_flag=!0),t=!0}t&&this.searchCoast(this.totMult+this.variables[1].value+this.q)}}function X(t,s,i,e="r"){if("string"==typeof t){const s=t.charAt(t.length-1);if(null!==s.match(/[r/t/m]/))K(t=t.slice(0,-1))&&(t=[t,s]);else{if(!s.match(/[0-9]/))throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;K(t)&&(t=[t,e])}}if("string"==typeof t[0]&&Array.isArray(t)&&(t[0]=Q(t[0])),"number"!=typeof t[0])throw`Cannot parse value ${t[0]}. Please contact the author of the sim.`;if("r"===t[1])return t[0];if("t"===t[1])return t[0]/l(s);if("m"===t[1])return function(t,s,i){let e=()=>i<65?0:i<75?1:i<85?2:3,h=(t,h)=>(s-Math.log10(Math.pow(i/20,e()))+Math.log10(h))*(1/t),a=t=>(s-Math.log10(Math.pow(i/20,e())))*(1/t);switch(t){case"T1":return h(.164,3);case"T2":return h(.198,100);case"T3":return o=.147,l=3,(s-Math.log10(Math.pow(i/20,e()))-Math.log10(l))*(1/o);case"T4":return h(.165,4);case"T5":return a(.159);case"T6":return h(.196,50);case"T7":return a(.152);case"T8":return a(.15);case"WSP":case"SL":return s/.15;case"EF":return s*(1/.387)*2.5;case"CSR2":return(s+Math.log10(200))*(1/2.203)*10}var o,l;throw"Failed parsing multiplier. Please contact the author of the sim."}(s,t[0],i);throw`Cannot parse value ${t[0]} and ${t[1]}. Please contact the author of the sim.`}function K(t){if(null===t.match(/^[0-9/e/.]+$/))throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;let s=0;for(let i=0;i<t.length;i++)"e"===t[i]&&s++;if(s>1)throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;let i=0;for(let s=0;s<t.length;s++)"."===t[s]&&i++;if(i>1)throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;return!0}function Q(t){return/[e]/.test(t)?n(t):parseFloat(t)}var U=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};const j=t(".output"),Y={dt:1.5,ddt:1.0001,stratFilter:!0,simulating:!1,forcedPubTime:1/0,showA23:!1,varBuy:[[0,[{variable:"var",level:0,cost:0,timeStamp:0}]]]},Z={lastStrat:null,simEndTimestamp:0};function tt(t){return U(this,void 0,void 0,(function*(){if(Y.simulating)return Y.simulating=!1,"Sim stopped.";if((performance.now()-Z.simEndTimestamp)/1e3<1)return null;try{let s=function(t){const s={theory:t.theory,strat:t.strat,mode:t.mode,hardCap:t.hardCap,modeInput:t.modeInput,simAllInputs:t.simAllInputs,sigma:0,rho:0,cap:1/0,recovery:null};if("All"!==t.mode&&"Time diff."!==t.mode){if(t.sigma.length>0&&null!==t.sigma.match(/^[0-9]+$/)&&parseInt(t.sigma)>=0&&parseFloat(t.sigma)%1==0)s.sigma=parseInt(t.sigma);else if("T"===t.theory.charAt(0))throw"Invalid sigma value. Sigma must be an integer that's >= 0";if(!(t.rho.length>0))throw"Input value cannot be empty.";if(s.rho=X(t.rho,s.theory,s.sigma),"Chain"===t.mode||"Steps"===t.mode){if(!(t.cap.length>0))throw"Cap value cannot be empty.";s.cap=X(t.cap,s.theory,s.sigma)}}return"Single sim"!==t.mode&&"Chain"!==t.mode&&(s.modeInput=function(t,s){if("Steps"===s&&"string"==typeof t&&K(t))return Q(t);if("Amount"===s&&"string"==typeof t){if(null!==t.match(/[0-9]/))return parseFloat(t);throw s+" input must be a number."}if("All"===s)return function(t){let s=t.split(" ");for(let t=0;t<s.length;t++)s[t]=s[t].replace(" ",""),s[t]=s[t].replace("\n","");if(s=s.filter((t=>""!==t)),s.length<2)throw"Student count and at least one theory value that is not 0 is required.";if(s.length-1>a.Jp.length)throw`Invalid value ${s[a.Jp.length+1]} does not match any theory.`;let i=[];if(e=s[0],!/^\d+$/.test(e))throw`Invalid student value ${s[0]}.`;var e;i.push(parseInt(s[0]));for(let t=1;t<s.length;t++)i.push(X(s[t],r(t-1),i[0],"t"));return i}(t);if("Time diff."===s||"Single sim"===s||"Chain"===s)return t;throw`Couldnt parse mode ${s}. Please contact the author of the sim.`}(t.modeInput,t.mode)),s}(t),i=[];switch(Y.simulating=!0,s.mode){case"Single sim":i=[yield st(s)];break;case"Chain":i=yield function(t,s=1/0){return U(this,void 0,void 0,(function*(){let s=t.rho,i=0;const e=t.rho,a=[];let o=u(t.cap),r=0;for(;s<t.cap;){let e=performance.now();e-r>250&&(r=e,j.textContent=`Simulating ${u(s,0)}/${o}`,yield h());let l=yield st(Object.assign({},t));if(!Y.simulating)break;"string"==typeof l[6]&&(Z.lastStrat=l[6].split(" ")[0]),a.push(l),s=l[l.length-1][0],t.rho=s,i+=l[l.length-1][1]}Z.lastStrat=null,a.push(["","","","","Tau Total","","",'Average <span style="font-size:0.9rem; font-style:italics">&tau;</span>/h',"Total Time"]);const n=(t.rho-e)*l(t.theory);return a.push(["","","","",u(n,2),"","",v(n/(i/3600),5),c(i)]),a}))}(s);break;case"Steps":i=yield function(t){return U(this,void 0,void 0,(function*(){let s=0;t.rho;const i=[];let e=u(t.cap),a=0;for(;t.rho<t.cap+1e-5;){let o=performance.now();o-a>250&&(a=o,j.textContent=`Simulating ${u(t.rho,0)}/${e}`,yield h());let l=yield st(Object.assign({},t));if(!Y.simulating)break;"string"==typeof l[6]&&(Z.lastStrat=l[6].split(" ")[0]),i.push(l),t.rho+=t.modeInput,s+=l[l.length-1][1]}return Z.lastStrat=null,i}))}(s);break;case"All":i=yield function(t){return U(this,void 0,void 0,(function*(){const s=t.modeInput[0],i=t.modeInput.slice(1,t.modeInput.length);let e=[];for(let a=0;a<i.length;a++){if(0===i[a])continue;if(j.innerText=`Simulating ${r(a)}/${r(i.length-1)}`,yield h(),!Y.simulating)break;let o=["Best Semi-Idle","Best Overall"];null!=t.simAllInputs&&(o=[t.simAllInputs[0]?"Best Semi-Idle":"Best Idle",t.simAllInputs[1]?"Best Overall":"Best Active"]);let l=[];for(let t=0;t<o.length;t++){let e={theory:r(a),strat:o[t],sigma:s,rho:i[a],cap:1/0,mode:"Single Sim"};l.push(yield st(e))}e.push(it(l))}return e.push([s]),e}))}(s)}return Z.simEndTimestamp=performance.now(),i}catch(t){return String(t)}}))}function st(t){var s;return U(this,void 0,void 0,(function*(){if(-1!==e(["Best Overall","Best Active","Best Semi-Idle","Best Idle"],t.strat))return function(t){return U(this,void 0,void 0,(function*(){const s=function(t,s,i){let e=[];switch(t){case"T1":e=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<850,"Best Overall"!==i&&"Best Active"!==i&&s>625,"Best Semi-Idle"!==i&&"Best Idle"!==i&&("Best Active"===i||s<250),"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i];break;case"T2":e=["Best Semi-Idle"!==i&&"Best Active"!==i&&"Best Overall"!==i||s<25,"Best Idle"!==i&&("Best Active"!==i&&"Best Overall"!==i||s>=250),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<250,"Best Active"!==i&&"Best Overall"!==i&&"Best Idle"!==i&&s<250];break;case"T3":e=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s<150,"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i&&s>=175&&s<300,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<175,"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i&&s>=175&&s<300,"Best Overall"!==i&&"Best Active"!==i&&s>=260&&(s<500||"Best Semi-Idle"!==i),"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>=150,"Best Overall"!==i&&"Best Idle"!==i&&"Best Semi-Idle"!==i&&s>=275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<150,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<350,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<350,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<175,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<225,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=200&&s<375,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=250];break;case"T4":e=[s<30,"Best Overall"!==i&&"Best Active"!==i&&s<600&&"T4C3"!==Z.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>200,"Best Overall"!==i&&"Best Active"!==i&&s<125,"Best Overall"!==i&&"Best Active"!==i&&s<150,"Best Overall"!==i&&"Best Active"!==i&&s<275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<700&&"T4C3d66"!==Z.lastStrat&&"T4C123d"!==Z.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<700&&s>175&&("T4C3d66"!==Z.lastStrat||s<225),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=75&&s<200,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=175&&s<300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>240];break;case"T5":e=[s<25||"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Idle"!==i&&"Best Semi-Idle"!==i];break;case"T6":e=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<100,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<1100&&"T6noC1234"!==Z.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<750&&"T6noC34"!==Z.lastStrat&&"T6noC1234"!==Z.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>800,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>400,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<25,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=25&&s<100,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=100&&s<1100&&"T6noC1234"!==Z.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=100&&s<750&&"T6noC34"!==Z.lastStrat&&"T6noC1234"!==Z.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>800,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=100];break;case"T7":e=[!1,"Best Overall"!==i&&"Best Active"!==i&&(s<25||s>=75&&s<100),"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<75,"Best Overall"!==i&&"Best Active"!==i&&s<550&&s>=100,"Best Overall"!==i&&"Best Active"!==i&&s<625&&s>500,"Best Overall"!==i&&"Best Active"!==i&&s>525,"Best Semi-Idle"!==i&&"Best Idle"!==i&&(s<25||s>=75&&s<150),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=25&&s<75,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=100];break;case"T8":e=["Best Overall"!==i&&"Best Active"!==i&&("Best Semi-Idle"!==i||s<100),"Best Overall"!==i&&"Best Active"!==i&&s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=160&&s<220,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<160,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<60,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=160&&s<220,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=100&&s<160,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=40&&s<100,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=220,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i];break;case"WSP":e=["Best Overall"!==i&&"Best Active"!==i&&s<525,"Best Overall"!==i&&"Best Active"!==i&&s>475,"Best Semi-Idle"!==i&&"Best Idle"!==i];break;case"SL":e=[s<25||"Best Idle"===i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>=300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s<300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s<300];break;case"EF":e=[s<10||"Best Idle"===i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<10,"Best Semi-Idle"!==i&&"Best Idle"!==i];break;case"CSR2":e=[s<10||"Best Idle"===i||"Best Semi-Idle"===i,"Best Active"===i&&s<500,("Best Overall"===i||"Best Active"===i&&s>=500)&&s>10]}let h=[];switch(t){case"T1":h=[!0,s>=25,s>=50,!0,!0];break;case"T2":case"EF":h=[!0,!0,!0,!0];break;case"T3":h=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];break;case"T4":h=[!0,!0,!0,s>=25,s>=50,s>=50,!0,!0,s>=25,s>=75,s>=50,!0];break;case"T5":case"WSP":case"CSR2":h=[!0,!0,!0];break;case"T6":h=[!0,!0,!0,!0,!0,s>=125,!0,!0,!0,!0,!0,s>=125,!0];break;case"T7":h=[!0,!0,s>=25,s>=25,s>=75,s>=75,!0,s>=25,s>=100];break;case"T8":h=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];break;case"SL":h=[!0,!0,!0,!0,!0]}if(0===e.length)throw"No strats found";let l=[];for(let s=0;s<e.length;s++)!e[s]&&Y.stratFilter||!h[s]||l.push(a.S3[o(t)][s]);return l}(t.theory,t.rho,t.strat);let i=new Array(9).fill(0);for(let e=0;e<s.length;e++){t.strat=s[e];let h=yield st(t);i[7]<h[7]&&(i=h)}return i}))}(t);const i={strat:t.strat,strats:a.S3[o(t.theory)],sigma:t.sigma,rho:t.rho,recursionValue:null,recovery:null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},cap:t.hardCap?t.cap:null};switch(t.theory){case"T1":return yield function(t){return y(this,void 0,void 0,(function*(){let s=new w(t);return yield s.simulate()}))}(i);case"T2":return yield function(t){return I(this,void 0,void 0,(function*(){let s=new B(t);return yield s.simulate()}))}(i);case"T3":return yield function(t){return C(this,void 0,void 0,(function*(){let s=new P(t);return yield s.simulate()}))}(i);case"T4":return yield function(t){return S(this,void 0,void 0,(function*(){let s=new R(t);return yield s.simulate(t)}))}(i);case"T5":return yield function(t){return A(this,void 0,void 0,(function*(){let s=new k(t);return yield s.simulate()}))}(i);case"T6":return yield function(t){return H(this,void 0,void 0,(function*(){let s=new V(t);return yield s.simulate()}))}(i);case"T7":return yield function(t){return q(this,void 0,void 0,(function*(){let s=new O(t);return yield s.simulate()}))}(i);case"T8":return yield function(t){return L(this,void 0,void 0,(function*(){let s=new E(t);return yield s.simulate()}))}(i);case"WSP":return yield function(t){return F(this,void 0,void 0,(function*(){let s=new $(t);return yield s.simulate()}))}(i);case"SL":return yield function(t){return D(this,void 0,void 0,(function*(){let s=new _(t);return yield s.simulate()}))}(i);case"EF":return yield W(i);case"CSR2":return yield function(t){return G(this,void 0,void 0,(function*(){let s=new J(t);return yield s.simulate(t)}))}(i)}throw`Theory ${t.theory} is not defined in singleSim() function. Please contact the author of the sim.`}))}function it(t){return[t[0][0],t[0][2],t[1][7],t[0][7],v(t[1][7]/t[0][7],4),t[1][5],t[0][5],t[1][6],t[0][6],t[1][8],t[0][8],t[1][4],t[0][4]]}var et;const ht=t(".theory"),at=t(".strat"),ot=(t(".sigma"),t(".input"),t(".cap")),lt=t(".mode"),rt=t("textarea"),nt=t(".hardCap"),ut=t(".semi-idle"),ct=t(".hard-active"),vt=t(".extraInputs"),mt=t(".timeDiffWrapper"),bt=(".controls",document.querySelectorAll(".controls"))[0];const dt=t(".simAllInputs"),pt=t(".extraInputDescription");function Mt(){bt.style.display="none",vt.style.display="none",mt.style.display="none",nt.style.display="none",dt.style.display="none",pt.style.display="inline",rt.style.height="1.8em",rt.style.width="6rem",ot.style.display="none",t(".capDesc").style.display="none","Chain"!==lt.value&&"Steps"!==lt.value||(ot.style.display="inline",t(".capDesc").style.display="inline"),"Single sim"!==lt.value&&"Time diff."!==lt.value&&"Chain"!==lt.value&&(vt.style.display="flex"),"Time diff."===lt.value&&(mt.style.display="grid"),"All"!==lt.value&&"Time diff."!==lt.value&&(bt.style.display="grid"),"All"===lt.value&&(dt.style.display="grid",pt.style.display="none",rt.style.height="3rem",rt.style.width="20rem"),rt.placeholder=a.CN[e(a.Sw,lt.value)],pt.textContent=a.xy[e(a.Sw,lt.value)]}window.onload=()=>{for(let t=0;t<a.Jp.length;t++){const i=s("option");i.value=a.Jp[t],i.textContent=a.Jp[t],ht.appendChild(i)}for(let t=0;t<a.S3[0].length;t++){const i=s("option");i.value=a.S3[0][t],i.textContent=a.S3[0][t],at.appendChild(i)}for(let t=0;t<a.Sw.length;t++){const i=s("option");i.value=a.Sw[t],i.textContent=a.Sw[t],lt.appendChild(i)}Mt()},i(lt,"input",Mt),i(ht,"change",(function(){for(;at.firstChild;)at.firstChild.remove();const t=["Best Overall","Best Active","Best Semi-Idle","Best Idle"];for(let i=0;i<4;i++){const e=s("option");e.value=t[i],e.textContent=t[i],at.appendChild(e)}const i=e(a.Jp,ht.value);for(let t=0;t<a.S3[i].length;t++){const e=s("option");e.value=a.S3[i][t],e.textContent=a.S3[i][t],at.appendChild(e)}}));const ft=JSON.parse(null!==(et=localStorage.getItem("simAllSettings"))&&void 0!==et?et:"[true, false]");ut.checked=ft[0],ct.checked=ft[1];const gt=t(".theory"),Tt=t(".strat"),xt=t(".sigma"),yt=t(".input"),wt=t(".cap"),It=t(".mode"),Bt=t("textarea"),Ct=t(".hardCap"),Pt=t(".output"),St=t("table"),Rt=t(".dtOtp"),At=t(".ddtOtp"),kt=t(".a23");const Ht=t(".theory"),Vt=t(".strat"),qt=t(".sigma"),Ot=t(".input"),Lt=t(".cap"),Et=t(".mode"),Ft=t("textarea"),$t=t(".hardCap"),Dt=t(".semi-idle"),_t=t(".hard-active"),zt=t(".output");let Wt=t("table"),Nt=t("thead"),Gt=t("tbody");const Jt=t(".simulate"),Xt=t(".dtOtp"),Kt=t(".ddtOtp"),Qt=t(".a23");let Ut="All";const jt='<span style="font-size:0.9rem; font-style:italics">&tau;</span>',Yt={current:"All",single:`<th style="padding-inline: 0.5rem !important">Theory</th><th><span style="font-size:0.9rem;">&sigma;</span><sub>t</sub></th><th>Last Pub</th><th>Max Rho</th><th>&Delta;${jt}</th><th>Multi</th><th>Strat</th><th>${jt}/h</th><th>Pub Time</th>`,all:`<th>&emsp;</th><th>Input</th><th>${jt}/h Active</th><th>${jt}/h Idle</th><th>Ratio</th><th>Multi Active</th><th>Multi Idle</th><th>Strat Active</th><th>Strat Idle</th><th>Time Active</th><th>Time Idle</th><th>&Delta;${jt} Active</th><th>&Delta;${jt} Idle</th>`};function Zt(s){document.body.style.overflow="hidden",t(".boughtVars").showModal();const i=t(".boughtVarsOtp");for(;i.firstChild;)i.firstChild.remove();for(let t=0;t<s.length;t++){const e=document.createElement("tr"),h=document.createElement("td");h.innerText=s[t].variable,e.appendChild(h);const a=document.createElement("td");a.innerText=s[t].level.toString(),e.appendChild(a);const o=document.createElement("td");o.innerText=u(s[t].cost,2),e.appendChild(o);const l=document.createElement("td");l.innerText=c(s[t].timeStamp),e.appendChild(l),i.appendChild(e)}}function ts(){for(;Gt.firstChild;)Gt.firstChild.remove()}Nt.innerHTML=Yt.all,Wt.classList.add("big"),"true"===localStorage.getItem("autoSave")&&setTimeout((()=>function(){var s;const i=JSON.parse(null!==(s=localStorage.getItem("simState"))&&void 0!==s?s:'{"controls1":{"theory":{"value":"T1","innerHTML":"<option value=\\"T1\\">T1</option><option value=\\"T2\\">T2</option><option value=\\"T3\\">T3</option><option value=\\"T4\\">T4</option><option value=\\"T5\\">T5</option><option value=\\"T6\\">T6</option><option value=\\"T7\\">T7</option><option value=\\"T8\\">T8</option><option value=\\"WSP\\">WSP</option><option value=\\"SL\\">SL</option><option value=\\"EF\\">EF</option><option value=\\"CSR2\\">CSR2</option><option value=\\"PD\\">PD</option><option value=\\"FI\\">FI</option>"},"strat":{"value":"Best Overall","innerHTML":"\\n            <option value=\\"Best Overall\\">Best Overall</option>\\n            <option value=\\"Best Active\\">Best Active</option>\\n            <option value=\\"Best Semi-Idle\\">Best Semi-Idle</option>\\n            <option value=\\"Best Idle\\">Best Idle</option>\\n          <option value=\\"T1\\">T1</option><option value=\\"T1C34\\">T1C34</option><option value=\\"T1C4\\">T1C4</option><option value=\\"T1Ratio\\">T1Ratio</option><option value=\\"T1SolarXLII\\">T1SolarXLII</option>"},"sigma":"","input":"","cap":false},"controls2":{"mode":"All","modeInput":"","extraInputDescription":"","hardCap":"on","timeDiffInputs":["","",""]},"output":"","table":"\\n<thead><tr><th></th><th>Input</th><th>/h Active</th><th>/h Idle</th><th>Ratio</th><th>Multi Active</th><th>Multi Idle</th><th>Strat Active</th><th>Strat Idle</th><th>Time Active</th><th>Time Idle</th><th> Active</th><th> Idle</th></tr></thead>\\n        <tbody></tbody>\\n      ","settings":{"dt":"1.5","ddt":"1.0001"}}');gt.innerHTML=i.controls1.theory.innerHTML,gt.value=i.controls1.theory.value,Tt.innerHTML=i.controls1.strat.innerHTML,Tt.value=i.controls1.strat.value,xt.value=i.controls1.sigma,yt.value=i.controls1.input,wt.value=i.controls1.cap,It.value=i.controls2.mode,Bt.value=i.controls2.modeInput,t(".extraInputDescription").textContent=i.controls2.extraInputDescription,Ct.checked=i.controls2.hardCap,t(".timeDiffWrapper").children[0].value=i.controls2.timeDiffInputs[0],t(".timeDiffWrapper").children[1].value=i.controls2.timeDiffInputs[1],t(".timeDiffWrapper").children[2].value=i.controls2.timeDiffInputs[2],Pt.textContent=i.output,St.innerHTML=i.table,Rt.textContent=i.settings.dt,At.textContent=i.settings.ddt,kt.checked=i.settings.showA23,t(".dt").value="8.1943",t(".ddt").value="2.71233",Mt(),St.classList.remove("big"),St.classList.remove("small"),"All"!==i.controls2.mode?St.classList.add("small"):St.classList.add("big")}()),500),i(Jt,"click",(()=>{return i=void 0,e=void 0,o=function*(){var i,e;Y.dt=parseFloat(null!==(i=Xt.textContent)&&void 0!==i?i:"1.5"),Y.ddt=parseFloat(null!==(e=Kt.textContent)&&void 0!==e?e:"1.0001"),Y.stratFilter=!0,Y.showA23=Qt.checked,localStorage.setItem("simAllSettings",JSON.stringify([Dt.checked,_t.checked]));const a={theory:Ht.value,strat:Vt.value,sigma:qt.value.replace(" ",""),rho:Ot.value.replace(" ",""),cap:Lt.value.replace(" ",""),mode:Et.value,modeInput:Ft.value,simAllInputs:[Dt.checked,_t.checked],hardCap:$t.checked};zt.textContent="",Jt.textContent="Stop simulating",yield h();let o=yield tt(a);zt.textContent="string"==typeof o?o:"",null!==o&&"string"!=typeof o&&function(i){Ut!==Et.value&&ts(),Ut=Et.value,Wt=t("table"),Nt=t("thead"),Gt=t("tbody"),"All"===Et.value?(Wt.classList.add("big"),Wt.classList.remove("small"),Nt.innerHTML=Yt.all,Nt.children[0].children[0].innerHTML=i[i.length-1][0].toString()+'<span style="font-size:0.9rem;">&sigma;</span><sub>t</sub>',i.pop()):(Wt.classList.remove("big"),Wt.classList.add("small"),Nt.innerHTML=Yt.single),(Gt.children.length>1&&(i.length>1||""===Gt.children[Gt.children.length-1].children[0].innerHTML)||"All"===Et.value)&&ts();for(let t=0;t<i.length;t++){const e=s("tr");for(let h=0;h<Nt.children[0].children.length;h++){const a=s("td");a.innerHTML=String(i[t][h]),e.appendChild(a)}Gt.appendChild(e)}!function(){Gt=t("tbody");for(let t=0;t<Y.varBuy.length;t++)for(let s=0;s<(null==Gt?void 0:Gt.children.length);s++){const i=null==Gt?void 0:Gt.children[s];if(parseFloat(null==i?void 0:i.children[7].innerHTML)===Y.varBuy[t][0]){let s=Y.varBuy[t][1];(null==i?void 0:i.children[8]).onpointerdown=()=>{Zt(s)},(null==i?void 0:i.children[8]).style.cursor="pointer"}}Y.varBuy=[]}()}(o),Jt.textContent="Simulate",Y.simulating=!1,localStorage.setItem("simState",JSON.stringify({controls1:{theory:{value:gt.value,innerHTML:gt.innerHTML},strat:{value:Tt.value,innerHTML:Tt.innerHTML},sigma:xt.value,input:yt.value,cap:wt.value},controls2:{mode:It.value,modeInput:Bt.value,extraInputDescription:t(".extraInputDescription").textContent,hardCap:Ct.checked,timeDiffInputs:[t(".timeDiffWrapper").children[0].value,t(".timeDiffWrapper").children[1].value,t(".timeDiffWrapper").children[2].value]},output:Pt.textContent,table:St.innerHTML,settings:{dt:Rt.textContent,ddt:At.textContent,showA23:kt.checked}}))},new((a=void 0)||(a=Promise))((function(t,s){function h(t){try{r(o.next(t))}catch(t){s(t)}}function l(t){try{r(o.throw(t))}catch(t){s(t)}}function r(s){var i;s.done?t(s.value):(i=s.value,i instanceof a?i:new a((function(t){t(i)}))).then(h,l)}r((o=o.apply(i,e||[])).next())}));var i,e,a,o})),i(t(".boughtVarsCloseBtn"),"pointerdown",(()=>{t(".boughtVars").close(),document.body.style.overflow="auto"}))})();