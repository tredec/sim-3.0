(()=>{"use strict";const t=t=>document.querySelector(t),s=t=>document.querySelectorAll(t),i=t=>document.createElement(t),e=(t,s,i)=>t.addEventListener(s,(()=>i()));function h(t,s){for(let i=0;i<t.length;i++)if(s===t[i])return i;return-1}function a(t=0){return new Promise((s=>setTimeout(s,t)))}const o=JSON.parse('{"Jp":["T1","T2","T3","T4","T5","T6","T7","T8","WSP","SL","EF","CSR2","RZ"],"S3":[["T1","T1C34","T1C4","T1Ratio","T1SolarXLII"],["T2","T2mc","T2ms","T2qs"],["T3","T3C11C12C21","T3noC11C13C21C33","T3noC13C32C33","T3noC13C33","T3noP1C13C33","T3Snax","T3Snax2","T3C11C12C21d","T3noC11C13C21C33d","T3noC11C13C33d","T3noC13C32C33d","T3noC13C33d","T3Play","T3Play2"],["T4","T4C12","T4C3","T4C4","T4C5","T4C56","T4C12d","T4C123d","T4C456dC12rcvMS","T4C356dC12rcv","T4C56d","T4C3d66"],["T5","T5Idle","T5AI2"],["T6","T6C3","T6C4","T6noC34","T6noC345","T6noC1234","T6snax","T6C3d","T6C4d","T6noC34d","T6noC345d","T6noC1234d","T6AI"],["T7","T7C12","T7C3","T7noC12","T7noC123","T7noC1234","T7C12d","T7C3d","T7PlaySpqcey"],["T8","T8noC3","T8noC5","T8noC35","T8snax","T8noC3d","T8noC5d","T8noC35d","T8d","T8Play","T8PlaySolarswap"],["WSP","WSPStopC1","WSPdStopC1"],["SL","SLStopA","SLStopAd","SLMS","SLMSd"],["EF","EFsnax","EFd","EFAI"],["CSR2","CSR2d","CSR2XL"],["RZ","RZd","RZdBH"]],"Sw":["All","Single sim","Chain","Steps","Amount","Time","Time diff."],"xy":["","","","Step length: ","Amount of pubs (Chain): ","Total Time: "],"CN":["<sigma> <t1>* [t2]* ... [wsp]* ... [csr2]* \\n\\n*[r/t/m] = rho/tau/total multiplier | default tau","","","","<Number>","<Hours>","<t1> [t1], ... , <t8> [t8] or <wsp> [wsp], ... , <csr2> [csr2]","<t1> [t1], ... , <t8> [t8] or <wsp> [wsp], ... , <csr2> [csr2]","<sigma 1> <sigma 2> [ct y/n] [idle strats only y/n]"]}');function l(t){return h(o.Jp,t)}function r(t){switch(t){case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":case"T7":case"T8":return 1;case"WSP":case"SL":case"CSR2":case"RZ":return.1;case"EF":return.4}throw`Invalid theory ${t}. Please contact the author of the sim.`}function n(t){return o.Jp[t]}function u(t){const s=String(t).split("e"),i=Number(s[1])+Math.log10(Math.max(1,Number(s[0])));return Number(i)}function c(t,s=3){const i=Math.floor(t),e=t-i,h=b(Math.pow(10,e),s);return(h>=10?h/10:h)+"e"+(h>=10?i+1:i)}function v(t){let s=Math.floor(t/60%60),i=Math.floor(t/3600%24),e=Math.floor(t/86400%365),h=Math.floor(t/31536e3),a="";return h>0&&(a+=h<1e6?h:c(Math.log10(h)),a+="y"),e>0&&(a+=e+"d"),a+=(i<10?"0":"")+i+"h",0===h&&(a+=(s<10?"0":"")+s+"m"),a}function m(t,s=5){return t>=1e6?c(Math.log10(t),3):b(t,s-Math.floor(Math.log10(Math.abs(t))))}function b(t,s){return Math.round(t*Math.pow(10,s))/Math.pow(10,s)}function d(t,s){const i=t>s?t:s,e=t>s?s:t,h=Math.floor(i),a=Math.pow(10,i-h),o=Math.floor(e),l=Math.pow(10,e-o);return h+Math.log10(a+l/Math.pow(10,h-o))}function p(t,s){const i=t>s?t:s,e=t>s?s:t,h=Math.floor(i),a=Math.pow(10,i-h),o=Math.floor(e),l=Math.pow(10,e-o);return h+Math.log10(a-l/Math.pow(10,h-o))}function M(t,s){let i=new Array(t).fill(s),e=[];if(!Array.isArray(s))return i;for(let t=0;t<i.length;t++)i[0][0].constructor===Array&&i[0][0][0].constructor===Array?e.push(...i[t]):e.push(i[t]);return e}function f(t){return Math.log10(t)}const w=Math.random()+1e-9;function g(t,s){return[t.theory,t.sigma,c(t.lastPub,2),c(t.pubRho,2),c((t.pubRho-t.lastPub)*r(t.theory),2),m(t.pubMulti),t.strat+s,m(t.maxTauH*r(t.theory)),v(Math.max(0,t.pubT-t.recovery.time)),[t.pubRho,t.recovery.recoveryTime?t.recovery.time:Math.max(0,t.pubT-t.recovery.time)]]}class x{constructor(t){var s,i,e,h,a;this.lvl=null!==(s=t.lvl)&&void 0!==s?s:0,this.cost=y(String(t.cost)),this.costInc=Math.log10(t.costInc),this.stepwiseCost=null!==(i=t.stepwiseCost)&&void 0!==i?i:1,this.value="number"==typeof t.value||"string"==typeof t.value?y(String(t.value)):0,this.stepwisePowerSum=!0===(null===(e=t.stepwisePowerSum)||void 0===e?void 0:e.default)?{base:2,length:10}:"number"==typeof(null===(h=t.stepwisePowerSum)||void 0===h?void 0:h.base)&&"number"==typeof(null===(a=t.stepwisePowerSum)||void 0===a?void 0:a.length)?{base:t.stepwisePowerSum.base,length:t.stepwisePowerSum.length}:{base:0,length:0},this.varBase=t.varBase?t.varBase:10,t.firstFreeCost&&(this.buy(),this.cost-=this.costInc)}buy(){(this.lvl+1)%this.stepwiseCost==0&&(this.cost+=this.costInc),0!==this.stepwisePowerSum.base?this.value=this.value===w?Math.log10(this.stepwisePowerSum.base)*Math.floor(this.lvl/this.stepwisePowerSum.length):d(this.value,Math.log10(this.stepwisePowerSum.base)*Math.floor(this.lvl/this.stepwisePowerSum.length)):this.value=Math.log10(this.varBase)*(this.lvl+1),this.lvl++}reCalculate(){if(0!==this.stepwisePowerSum.base){let t=Math.floor(this.lvl/this.stepwisePowerSum.length),s=this.lvl-t*this.stepwisePowerSum.length,i=this.stepwisePowerSum.length/(this.stepwisePowerSum.base-1);this.value=p(Math.log10(i+s)+Math.log10(this.stepwisePowerSum.base)*t,Math.log10(i))}else this.value=Math.log10(this.varBase)*this.lvl}}function y(t){if("Infinity"===t)throw"Variable value reached Infinity";return"0"===t?w:/[e]/.test(t)?u(t):Math.log10(Number(t))}var T=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class I{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T1",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.variables=[new x({lvl:1,cost:5,costInc:2,value:1,stepwisePowerSum:{default:!0}}),new x({cost:100,costInc:10,varBase:2}),new x({cost:15,costInc:2,stepwisePowerSum:{default:!0}}),new x({cost:3e3,costInc:10,varBase:2}),new x({cost:1e4,costInc:Math.pow(2,4.5*Math.log2(10)),varBase:10}),new x({cost:1e10,costInc:Math.pow(2,8*Math.log2(10)),varBase:10})],this.term1=0,this.term2=0,this.term3=0,this.termRatio=0,this.c3Ratio=this.lastPub<300?1:this.lastPub<450?1.1:this.lastPub<550?2:this.lastPub<655?5:10,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...M(6,!0)],[!0,!0,!1,!1,!0,!0],[!0,!0,!1,!1,!1,!0],[()=>this.variables[0].cost+1<this.rho,()=>this.variables[1].cost+f(1.11)<this.rho,()=>this.variables[2].cost+this.termRatio+1<=this.rho,()=>this.variables[3].cost+this.termRatio<=this.rho,()=>this.variables[4].cost+f(this.c3Ratio)<this.rho,!0],[()=>this.variables[0].cost+f(5)<=this.rho&&this.variables[0].cost+f(6+this.variables[0].lvl%10)<=this.variables[1].cost&&this.variables[0].cost+f(15+this.variables[0].lvl%10)<(this.milestones[3]>0?this.variables[5].cost:1e3),()=>this.variables[1].cost+f(1.11)<this.rho,()=>this.variables[2].cost+this.termRatio+1<=this.rho,()=>this.variables[3].cost+this.termRatio<=this.rho,()=>this.variables[4].cost+f(this.c3Ratio)<this.rho,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[2]>0,()=>this.milestones[3]>0]}getMilestoneTree(){return[...new Array(5).fill([[0,0,0,0],[0,0,1,0],[0,0,1,1],[1,0,1,1],[1,1,1,1],[1,2,1,1],[1,3,1,1]])]}getTotMult(t){return Math.max(0,.164*t-f(3))+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return T(this,void 0,void 0,(function*(){let t=8*Math.ceil((this.lastPub-10)/8)+10,s=t-this.lastPub<3?t+2:t-this.lastPub<5?t-2+Math.log10(1.5):t-4+Math.log10(1.4),i=(t-this.lastPub<3?t:Math.floor(this.lastPub))+Math.log10(30);i=Math.max(8+Math.log10(30),i+Math.floor(s-i));let e=!1;for(;!e&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<176&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),(4!==this.stratIndex||this.rho<i||ct.forcedPubTime!==1/0)&&this.buyVariables(),e=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:4===this.stratIndex?this.pubRho>s:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,ct.forcedPubTime===1/0&&4===this.stratIndex?` ${this.lastPub<50?"":c(Math.min(this.pubRho,i),2)}`:""),4===this.stratIndex&&ct.varBuy.push([this.result[7],this.boughtVars]),this.result}))}tick(){this.term1=this.variables[2].value*(1+.05*this.milestones[1])+this.variables[3].value+(this.milestones[0]>0?f(1+this.rho/Math.LOG10E/100):0),this.term2=d(this.variables[4].value+.2*this.rho,this.variables[5].value+.3*this.rho),this.term3=this.variables[0].value+this.variables[1].value;let t=d(this.term1,this.term2)+this.term3+this.totMult+f(this.dt);this.rho=d(this.rho,t),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||ct.forcedPubTime!==1/0||4===this.stratIndex)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&4===this.stratIndex&&(2!==s&&3!==s||this.lastPub<350)){let t=["q1","q2","c1","c2","c3","c4"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.rho=p(this.rho,this.variables[s].cost),this.variables[s].buy(),t=!0}t&&(this.termRatio=Math.max(f(5),(this.term2-this.term1)*Number(this.milestones[3]>0)))}}var C=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class P{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T2",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q1=0,this.q2=0,this.q3=0,this.q4=0,this.r1=0,this.r2=0,this.r3=0,this.r4=0,this.variables=[new x({lvl:1,cost:10,costInc:2,value:1,stepwisePowerSum:{default:!0}}),new x({cost:5e3,costInc:2,stepwisePowerSum:{default:!0}}),new x({cost:3e25,costInc:3,stepwisePowerSum:{default:!0}}),new x({cost:8e50,costInc:4,stepwisePowerSum:{default:!0}}),new x({cost:2e6,costInc:2,stepwisePowerSum:{default:!0}}),new x({cost:3e9,costInc:2,stepwisePowerSum:{default:!0}}),new x({cost:4e25,costInc:3,stepwisePowerSum:{default:!0}}),new x({cost:5e50,costInc:4,stepwisePowerSum:{default:!0}})],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(8).fill(!0),[()=>this.curMult<4650,()=>this.curMult<2900,()=>this.curMult<2250,()=>this.curMult<1150,()=>this.curMult<4650,()=>this.curMult<2900,()=>this.curMult<2250,()=>this.curMult<1150],new Array(8).fill(!0),new Array(8).fill(!0)];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>1,()=>!0,()=>!0,()=>this.milestones[1]>0,()=>this.milestones[1]>1]}getMilestoneTree(){return[...new Array(4).fill([[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,1,0,0],[2,2,0,0],[2,2,1,0],[2,2,2,0],[2,2,3,0],[2,2,3,1],[2,2,3,2],[2,2,3,3]])]}getTotMult(t){return Math.max(0,.198*t-f(100))+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){let t=Math.min(10,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=[0,0,0,0];let s=[];if(this.stratIndex<2&&(s=[1,2,3,4]),2===this.stratIndex){let t=this.t%100;t<10?s=[3,4,1,2]:t<50?s=[1,2,3,4]:t<60?s=[3,4,1,2]:t<100&&(s=[2,1,3,4])}if(3===this.stratIndex){let t=1/0;this.lastPub>0&&(t=10),this.lastPub>75&&(t=200),this.lastPub>100&&(t=200),this.lastPub>125&&(t=200),this.lastPub>150&&(t=600),this.lastPub>200&&(t=100),this.lastPub>225&&(t=25),s=this.curMult<t?[1,2,3,4]:[3,4,1,2]}const i=[2,2,3,3];for(let e=0;e<s.length;e++)for(;this.milestones[s[e]-1]<i[s[e]-1]&&t>0;)this.milestones[s[e]-1]++,t--}simulate(){return C(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<250&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>15,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=f(this.dt);this.q1=d(this.q1,this.variables[0].value+this.q2+t),this.q2=d(this.q2,this.variables[1].value+this.q3+t),this.q3=this.milestones[0]>0?d(this.q3,this.variables[2].value+this.q4+t):this.q3,this.q4=this.milestones[0]>1?d(this.q4,this.variables[3].value+t):this.q4,this.r1=d(this.r1,this.variables[4].value+this.r2+t),this.r2=d(this.r2,this.variables[5].value+this.r3+t),this.r3=this.milestones[1]>0?d(this.r3,this.variables[6].value+this.r4+t):this.r3,this.r4=this.milestones[1]>1?d(this.r4,this.variables[7].value+t):this.r4;let s=this.q1*(1+.05*this.milestones[2])+this.r1*(1+.05*this.milestones[3])+this.totMult+t;this.rho=d(this.rho,s),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<15||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=p(this.rho,this.variables[t].cost),this.variables[t].buy()}}var B=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class R{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T3",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.currencies=[0,0,0],this.maxRho=0,this.variables=[new x({lvl:1,cost:10,costInc:1.18099,value:1,stepwisePowerSum:{default:!0}}),new x({cost:10,costInc:1.308,stepwisePowerSum:{default:!0}}),new x({cost:3e3,costInc:1.675,stepwisePowerSum:{default:!0}}),new x({cost:20,costInc:6.3496,varBase:2}),new x({cost:10,costInc:2.74,varBase:2}),new x({cost:1e3,costInc:1.965,varBase:2}),new x({cost:500,costInc:18.8343,varBase:2}),new x({cost:1e5,costInc:3.65,varBase:2}),new x({cost:1e5,costInc:2.27,varBase:2}),new x({cost:1e4,costInc:1248.27,varBase:2}),new x({cost:1e3,costInc:6.81744,varBase:2}),new x({cost:1e5,costInc:2.98,varBase:2})],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(12).fill(!0),[!0,!0,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!1,!0,!1,!1,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1],[!1,!0,!0,!1,!0,!1,!1,!0,!0,!1,!0,!1],[()=>this.curMult<1,!0,!0,!1,()=>!(this.curMult<1)||this.variables[4].cost+2<this.currencies[0],!1,!1,!0,!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1],[()=>this.curMult<1&&this.variables[0].cost+1<this.currencies[0],()=>this.variables[1].cost+f(3)<this.currencies[1],()=>this.variables[2].cost+f(5)<this.currencies[2],!1,()=>!(this.curMult<1)||this.variables[4].cost+2<this.currencies[0],!1,!1,()=>this.curMult<1||this.variables[7].cost+f(8)<this.currencies[1],!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1&&this.variables[11].cost+1<this.currencies[2]],[()=>this.variables[0].cost+f(7)<Math.min(this.variables[3].cost,this.variables[6].cost),()=>this.variables[1].cost+f(7)<this.variables[4].cost,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1],[()=>this.variables[0].cost+f(8)<this.variables[9].cost,()=>this.variables[1].cost+f(5)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+f(8)<this.variables[8].cost,!1,!0,!1,!1,!0,!0,!0,!0,!1],[()=>this.variables[0].cost+f(10)<Math.min(this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+f(4)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+f(10)<this.variables[8].cost,!1,!0,!1,!0,!0,!0,!0,!0,!1],[()=>this.variables[0].cost+f(8)<Math.min(this.variables[3].cost,this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+f(5)<Math.min(this.variables[4].cost,this.variables[7].cost),()=>this.variables[2].cost+f(8)<this.variables[8].cost,!0,!0,!1,!0,!0,!0,!0,!1,!1],[()=>this.variables[0].cost+f(10)<Math.min(this.variables[3].cost,this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+f(4)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+f(10)<this.variables[8].cost,!0,!0,!1,!0,!0,!0,!0,!0,!1],[()=>this.curMult<2&&this.variables[0].cost+f(8)<this.variables[9].cost,()=>!(this.curMult<2)||this.variables[1].cost+f(4)<Math.min(this.variables[4].cost,this.variables[10].cost)&&this.variables[1].cost+f(2)<this.variables[7].cost,()=>this.variables[2].cost+f(8)<this.variables[8].cost&&this.variables[2].cost+f(2)<this.variables[11].cost,!1,!0,!1,!1,()=>!(this.curMult<2)||this.variables[7].cost+f(2)<Math.min(this.variables[4].cost,this.variables[10].cost),!0,()=>this.curMult<2,!0,()=>this.variables[11].cost+f(4)<this.variables[8].cost],[()=>this.lastPub-this.maxRho>1&&this.variables[0].cost+f(8)<this.variables[9].cost,()=>(this.curMult<1.2?this.variables[1].cost+f(5)<this.variables[10].cost:this.variables[1].cost+f(8)<this.variables[4].cost)||this.curMult>2.4,()=>!(this.curMult<2.4)||this.variables[2].cost+f(8)<this.variables[8].cost,!1,()=>!(this.curMult<1.2)||this.variables[4].cost+2<this.variables[10].cost,!1,!1,()=>this.curMult<1.2?this.variables[7].cost+f(2.5)<this.variables[10].cost:this.variables[7].cost+f(8)<this.variables[4].cost,!0,()=>this.lastPub-this.maxRho>1,()=>this.curMult<1.2||this.curMult<2.4&&this.variables[10].cost+f(8)<this.variables[4].cost,()=>this.curMult<1.2&&this.variables[11].cost+f(10)<this.variables[8].cost]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>this.milestones[0]>0]}getMilestoneTree(){return[...new Array(15).fill([[0,0,0,0],[0,1,0,0],[0,2,0,0],[0,2,1,0],[0,2,2,0],[1,2,2,0],[1,2,2,1],[1,2,2,2]])]}getTotMult(t){return Math.max(0,.147*t+f(3))+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return B(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<175&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>9,this.ticks++;if(this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),14===this.stratIndex){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();ct.varBuy.push([this.result[7],this.boughtVars])}return this.result}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[1]),s=this.variables[1].value*(1+.05*this.milestones[2]),i=this.variables[2].value*(1+.05*this.milestones[3]),e=d(d(this.variables[3].value+t,this.variables[4].value+s),this.variables[5].value+i);this.currencies[0]=d(this.currencies[0],f(this.dt)+this.totMult+e);let h=d(d(this.variables[6].value+t,this.variables[7].value+s),this.variables[8].value+i);this.currencies[1]=d(this.currencies[1],f(this.dt)+this.totMult+h);let a=d(d(this.variables[9].value+t,this.variables[10].value+s),this.variables[11].value+i);this.currencies[2]=this.milestones[0]>0?d(this.currencies[2],f(this.dt)+this.totMult+a):0,this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<9||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--){let s=t%3;for(;this.currencies[s]>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub&&14===this.stratIndex){let s=["b1","b2","b3","c11","c12","c13","c21","c22","c23","c31","c32","c33"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.currencies[s]=p(this.currencies[s],this.variables[t].cost),this.variables[t].buy()}}}}var S=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class A{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T4",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,2]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.recursionValue=t.recursionValue,this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new x({lvl:1,cost:5,costInc:1.305,value:1,stepwisePowerSum:{default:!0}}),new x({cost:20,costInc:3.75,varBase:2}),new x({cost:2e3,costInc:2.468,varBase:2}),new x({cost:1e4,costInc:4.85,varBase:3}),new x({cost:1e8,costInc:12.5,varBase:5}),new x({cost:1e10,costInc:58,varBase:10}),new x({cost:1e3,costInc:100,stepwisePowerSum:{default:!0}}),new x({cost:1e4,costInc:1e3,varBase:2})],this.variableSum=0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...M(8,!0)],[!0,!0,...M(6,!1)],[!1,!1,!0,...M(3,!1),!0,!0],[...M(3,!1),!0,!1,!1,!0,!0],[...M(4,!1),!0,!1,!0,!0],[...M(4,!1),!0,!0,!0,!0],[()=>this.variables[0].cost+1<this.variables[1].cost,!0,!1,!1,!1,!1,!1,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost),!0,!0,!1,!1,!1,()=>this.variables[6].cost+1<this.variables[7].cost,!0],[()=>this.variables[0].cost+1<this.variables[1].cost&&this.maxRho<this.lastPub,()=>this.maxRho<this.lastPub,!1,!0,!0,!0,!0,!0],[()=>this.variables[0].cost+1<this.variables[1].cost&&this.maxRho<this.lastPub,()=>this.maxRho<this.lastPub,!0,!1,!0,!0,!0,!0],[...M(4,!1),!0,!0,()=>this.variables[6].cost+1<this.variables[7].cost,!0],[!1,!1,()=>{var t;return this.variables[2].cost+.1<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)},...M(3,!1),()=>{var t;return this.variables[6].cost+f(10+this.variables[6].lvl%10)<=Math.min(this.variables[7].cost,this.variables[2].cost)&&this.variables[6].cost+f(10+this.variables[6].lvl%10)+1<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)},()=>{var t;return this.variables[7].cost+.5<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)&&(this.curMult<1||this.variables[7].cost+f(1.5)<=this.variables[2].cost)}]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>1,()=>this.milestones[0]>2,()=>!0,()=>!0]}getMilestoneTree(){return[[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,1,3]],[[0,0,0],[0,1,0]],[[0,0,0],[0,0,1],[0,0,2],[0,0,3]],[[0,0,0],[1,0,0],[1,0,1],[1,0,2],[1,0,3]],[[0,0,0],[1,0,0],[2,0,0],[2,0,1],[2,0,2],[2,0,3]],[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,3]],[[0,0,0],[0,1,0]],[[0,0,0],[0,1,0],[0,1,1],[0,1,2],[0,1,3]],[[0,0,0],[1,0,0],[1,0,1],[1,0,2],[1,0,3]],[[0,0,0],[0,1,0],[0,1,1],[0,1,2],[0,1,3],[1,1,3],[2,1,3],[3,1,3]],[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,3]],[[0,0,0],[0,0,1],[0,0,2],[0,0,3]]]}getTotMult(t){return Math.max(0,.165*t-f(4))+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));if(this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)],8===this.stratIndex){const s=[3,1,3];let i;this.milestones=[0,0,0],i=this.maxRho<this.lastPub?[2,3,1]:this.t%100<50?[3,1,2]:[1,3,2];let e=t;this.milestones=[0,0,0];for(let t=0;t<i.length;t++)for(;this.milestones[i[t]-1]<s[i[t]-1]&&e>0;)this.milestones[i[t]-1]++,e--}}simulate(t){return S(this,void 0,void 0,(function*(){if(null==this.recursionValue&&"T4C3d66"===this.strat&&ct.forcedPubTime===1/0){t.recursionValue=Number.MAX_VALUE;let s=yield new A(t).simulate(t);this.recursionValue=s[9][0]}let s=!1;for(;!s&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<176&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),s=ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:(this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>9,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,11===this.stratIndex?` q1:${this.variables[6].lvl} q2:${this.variables[7].lvl}`:""),this.result}))}tick(){let t=this.variables[6].value,s=this.variables[7].value,i=f(2)*this.milestones[2]+t+s-d(0,this.q);this.q=d(this.q,i+f(this.dt));let e=this.totMult+this.variableSum;this.rho=d(this.rho,e+f(this.dt)),this.t+=this.dt/1.5,this.dt*=11===this.stratIndex&&this.recursionValue===Number.MAX_VALUE?Math.min(1.3,10*this.ddt):this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<9||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=p(this.rho,this.variables[t].cost),this.variables[t].buy();let t=this.variables[0].value*(1+.15*this.milestones[1]),s=this.variables[1].value;this.variableSum=t+s,this.variables[2].lvl>0&&(this.variableSum=d(this.variableSum,this.variables[2].value+this.q)),this.variables[3].lvl>0&&(this.variableSum=d(this.variableSum,this.variables[3].value+2*this.q)),this.variables[4].lvl>0&&(this.variableSum=d(this.variableSum,this.variables[4].value+3*this.q)),this.variables[5].lvl>0&&(this.variableSum=d(this.variableSum,this.variables[5].value+4*this.q))}}var k=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class V{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T5",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new x({lvl:1,cost:10,costInc:1.61328,value:1,stepwisePowerSum:{default:!0}}),new x({cost:15,costInc:64,varBase:2}),new x({cost:1e6,costInc:1.18099,value:1,stepwisePowerSum:{default:!0}}),new x({cost:75,costInc:4.53725,varBase:2}),new x({cost:1e3,costInc:88550700,varBase:2})],this.c2worth=!0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[!0,!0,()=>this.maxRho+(this.lastPub-200)/165<this.lastPub,()=>this.c2worth,!0],[()=>this.variables[0].cost+f(3+this.variables[0].lvl%10)<=Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[4].cost:1e3),!0,()=>this.q+f(1.5)<this.variables[3].value+this.variables[4].value*(1+.05*this.milestones[2])||!this.c2worth,()=>this.c2worth,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getMilestoneTree(){return[...new Array(3).fill([[0,0,0],[0,1,0],[1,1,0],[2,1,0],[3,1,0],[3,1,1],[3,1,2]])]}getTotMult(t){return Math.max(0,.159*t)+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}calculateQ(t,s,i){let e=Math.log10(Math.E),h=-1/0;s+i>this.q?h=p(s+i,this.q):s+i<this.q&&(h=p(this.q,s+i));let a=s+i>=this.q?1:-1,o=0;return h>this.q?o=-Math.pow(10,s-t-i+a*Math.log10((h-this.q)/e)):h<this.q&&(o=Math.pow(10,s-t-i+a*Math.log10((this.q-h)/e))),s+i-Math.log10(1+1/Math.pow(Math.E,(o+this.dt)*Math.pow(10,t-s+i)))}simulate(){return k(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<150&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>7,this.ticks++;if(this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,1===this.stratIndex?" "+c(this.variables[2].cost,1):""),2===this.stratIndex){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();ct.varBuy.push([this.result[7],this.boughtVars])}return this.result}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[0]),s=this.milestones[1]>0?this.variables[4].value*(1+.05*this.milestones[2]):0;this.q=this.calculateQ(this.variables[2].value,this.variables[3].value,s);let i=t+this.variables[1].value+this.q;this.rho=d(this.rho,i+this.totMult+f(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<7||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=0,s=this.milestones[1]>0?this.variables[4].value*(1+.05*this.milestones[2]):0,i=this.calculateQ(this.variables[2].value,this.variables[3].value,s);this.c2worth=i>=this.variables[3].value+s+f(2/3);for(let e=this.variables.length-1;e>=0;e--)for(;this.rho>this.variables[e].cost&&this.conditions[this.stratIndex][e]()&&this.milestoneConditions[e]();){if(this.maxRho+5>this.lastPub&&2===this.stratIndex){let t=["q1","q2","c1","c2","c3"];this.boughtVars.push({variable:t[e],level:this.variables[e].lvl+1,cost:this.variables[e].cost,timeStamp:this.t})}this.rho=p(this.rho,this.variables[e].cost),this.variables[e].buy(),3===e&&(t++,i=this.calculateQ(this.variables[2].value,this.variables[3].value+f(2)*t,s),this.c2worth=i>=this.variables[3].value+f(2)*t+this.variables[4].value*(1+.05*this.milestones[2])+f(2/3))}}}var H=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class q{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T6",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.r=0,this.variables=[new x({lvl:1,cost:15,costInc:3,value:1,stepwisePowerSum:{default:!0}}),new x({cost:500,costInc:100,varBase:2}),new x({cost:1e25,costInc:1e5,stepwisePowerSum:{default:!0}}),new x({cost:1e30,costInc:1e10,varBase:2}),new x({cost:10,costInc:2,value:1,stepwisePowerSum:{default:!0}}),new x({cost:100,costInc:5,varBase:2}),new x({cost:1e7,costInc:1.255,stepwisePowerSum:{default:!0}}),new x({cost:1e25,costInc:5e5,varBase:2}),new x({cost:15,costInc:3.9,varBase:2})],this.k=0,this.stopC12=[0,0,!0],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!1,!1,!0,!1,!1],[!0,!0,!0,!0,!1,!1,!1,!0,!1],[!0,!0,!0,!0,!0,!0,!1,!1,!0],[!0,!0,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!1,!1,!1,!0],[!0,!0,!0,!0,()=>this.stopC12[2],()=>this.stopC12[2],!1,!1,!0],[()=>this.variables[0].cost+f(3)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[6].cost),!0,()=>this.variables[2].cost+f(3)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[6].cost),!0,!1,!1,!0,!1,!1],[()=>this.variables[0].cost+f(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[7].cost),!0,()=>this.variables[2].cost+f(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[7].cost),!0,!1,!1,!1,!0,!1],[()=>this.variables[0].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[2].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[4].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,!1,!1,!0],[()=>this.variables[0].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,()=>this.variables[2].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,()=>this.variables[4].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,!1,!1,!1],[()=>this.variables[0].cost+f(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[2].cost+f(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,!1,!1,!1,!1,!0],[!1]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[2]>0]}getMilestoneTree(){return[...new Array(13).fill([[0,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,0],[1,0,0,3],[1,0,1,3],[1,1,1,3]])]}getTotMult(t){return Math.max(0,.196*t)-f(50)+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}calculateIntegral(t,s,i,e,h){let a=t+s+this.q+this.r,o=i+2*this.q+this.r-f(2),l=this.milestones[1]>0?e+3*this.q+this.r-f(3):0,r=this.milestones[2]>0?h+this.q+2*this.r-f(2):0;return this.k=r-a,this.totMult+d(a,d(o,d(l,r)))}simulate(){return H(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<150&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>12,this.ticks++;if(this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,"T6snax"===this.strat?" "+c(this.stopC12[0],1):""),12===this.stratIndex){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();ct.varBuy.push([this.result[7],this.boughtVars])}return this.result}))}tick(){let t=this.variables[4].value*(1+.05*this.milestones[3]),s=p(this.calculateIntegral(t,this.variables[5].value,this.variables[6].value,this.variables[7].value,this.variables[8].value),this.rho);this.q=d(this.q,this.variables[0].value+this.variables[1].value+f(this.dt)),this.r=this.milestones[0]>0?d(this.r,this.variables[2].value+this.variables[3].value+f(this.dt)-3):0;let i=this.calculateIntegral(t,this.variables[5].value,this.variables[6].value,this.variables[7].value,this.variables[8].value);s=s>i?i:s,this.rho=Math.max(0,p(i,s)),this.k>.3?this.stopC12[1]++:this.stopC12[1]=0,this.stopC12[1]>30&&this.stopC12[2]&&(this.stopC12[0]=this.maxRho,this.stopC12[2]=!1),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<12||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){if(12!==this.stratIndex)for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=p(this.rho,this.variables[t].cost),this.variables[t].buy();else for(;;){let t=this.variables.map((t=>t.cost)),s=[f(7+this.variables[0].lvl%10),0,f(5+this.variables[2].lvl%10),0,Math.max(0,this.k)+f(8+this.variables[4].lvl%10),Math.max(0,this.k),1/0,1/0,-Math.min(0,this.k)],i=[Number.MAX_VALUE,-1];for(let e=this.variables.length-1;e>=0;e--)t[e]+s[e]<i[0]&&this.milestoneConditions[e]()&&(i=[t[e]+s[e],e]);if(!(-1!==i[1]&&t[i[1]]<this.rho))break;if(this.rho=p(this.rho,this.variables[i[1]].cost),this.maxRho+5>this.lastPub){let t=["q1","q2","r1","r2","c1","c2","c3","c4","c5"];this.boughtVars.push({variable:t[i[1]],level:this.variables[i[1]].lvl+1,cost:this.variables[i[1]].cost,timeStamp:this.t})}this.variables[i[1]].buy()}}}var O=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class E{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T7",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.rho2=0,this.variables=[new x({lvl:1,cost:500,costInc:1.51572,value:1,stepwisePowerSum:{default:!0}}),new x({cost:10,costInc:1.275,value:1,stepwisePowerSum:{default:!0}}),new x({cost:40,costInc:8,varBase:2}),new x({cost:1e5,costInc:63,varBase:2}),new x({cost:10,costInc:2.82,varBase:2}),new x({cost:1e8,costInc:60,varBase:2}),new x({cost:100,costInc:2.81,varBase:2})],this.drho13=0,this.drho23=0,this.c2ratio=1/0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){this.lastPub>=100&&(this.c2ratio=100),this.lastPub>=175&&(this.c2ratio=10),this.lastPub>=250&&(this.c2ratio=20),this.lastPub>=275&&(this.c2ratio=50),this.lastPub>=300&&(this.c2ratio=1/0);let t=[[!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!1,!1,!1,!1],[!0,!1,!1,!0,!1,!1,!1],[!0,!1,!1,!0,!0,!0,!0],[!0,!1,!1,!1,!0,!0,!0],[!0,!1,!1,!1,!1,!0,!0],[()=>this.variables[0].cost+1<this.variables[2].cost,()=>this.variables[1].cost+f(8)<this.variables[2].cost,!0,!1,!1,!1,!1],[()=>this.variables[0].cost+1<this.variables[3].cost,!1,!1,!0,!1,!1,!1],[()=>this.variables[0].cost+f(4)<this.variables[6].cost,()=>this.variables[1].cost+f(10+this.variables[2].lvl)<this.variables[2].cost,()=>this.variables[2].cost+f(this.c2ratio)<this.variables[6].cost,()=>this.variables[3].cost+1<this.variables[6].cost,()=>this.variables[4].cost+1<this.variables[6].cost,()=>this.variables[5].cost+f(4)<this.variables[6].cost,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0,()=>this.milestones[0]>0,()=>this.milestones[2]>0,()=>this.milestones[3]>0]}getMilestoneTree(){return[[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,2],[1,1,1,1,3]],[[0,0,0,0,0],[0,0,0,0,1],[0,0,0,0,2],[0,0,0,0,3]],[[0,0,0,0,0],[0,1,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]],[[0,0,0,0,0],[1,0,0,0,0],[1,0,1,0,0],[1,0,1,1,0]],[[0,0,0,0,0],[1,0,0,0,0],[1,0,1,0,0],[1,0,1,1,0]],[[0,0,0,0,0],[0,0,0,0,1],[0,0,0,0,2],[0,0,0,0,3]],[[0,0,0,0,0],[0,1,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,2],[1,1,1,1,3]]]}getTotMult(t){return Math.max(0,.152*t)+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return O(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<175&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,"T7PlaySpqcey"===this.strat&&this.c2ratio!==1/0?this.c2ratio.toString():""),this.result}))}tick(){let t=this.variables[1].value*(1+.05*this.milestones[4])+this.variables[2].value,s=this.milestones[1]>0?f(1.5)+this.variables[3].value+this.rho/2:0,i=this.milestones[0]>0?this.variables[4].value:0,e=this.milestones[2]>0?f(1.5)+this.variables[5].value+this.rho2/2:0;this.drho13=this.milestones[3]>0?Math.min(this.drho13+2,Math.min(f(.5)+this.variables[6].value+this.rho2/2-this.rho/2,this.rho+2)):0,this.drho23=this.milestones[3]>0?Math.min(this.drho23+2,Math.min(f(.5)+this.variables[6].value+this.rho/2-this.rho2/2,this.rho2+2)):0;let h=f(this.dt)+this.variables[0].value+this.totMult;this.rho=d(this.rho,h+d(d(t,s),this.drho13)),this.rho2=d(this.rho2,h+d(d(i,e),this.drho23)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=p(this.rho,this.variables[t].cost),this.variables[t].buy()}}var L=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class F{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="T8",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.variables=[new x({lvl:1,cost:10,costInc:1.5172,value:1,stepwisePowerSum:{default:!0}}),new x({cost:20,costInc:64,varBase:2}),new x({cost:100,costInc:Math.pow(2,1.15*Math.log2(3)),varBase:3}),new x({cost:100,costInc:Math.pow(2,1.15*Math.log2(5)),varBase:5}),new x({cost:100,costInc:Math.pow(2,1.15*Math.log2(7)),varBase:7})],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.bounds=[[[0,-20,20],[0,-27,27],[24.5,1,48]],[[.5,-23,24],[1,-25,27],[20.5,1,40]],[[1,-20,22],[-1.5,-21,18],[8,0,37]]],this.defaultStates=[[-6,-8,26],[-10.6,-4.4,28.6],[-6,15,0]],this.dts=[.02,.002,14e-5],this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2],this.dx=0,this.dy=0,this.dz=0,this.msTimer=0,this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[!0,!0,!1,!0,!0],[!0,!0,!0,!0,!1],[!0,!0,!1,!0,!1],[()=>this.curMult<1.6,!0,()=>this.curMult<2.3,!0,()=>this.curMult<2.3],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!1,!0,!0],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!0,!0,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!1,!0,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!0,!0,!0],[()=>this.variables[0].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[2].cost+f(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[4].cost+f(4)<Math.min(this.variables[1].cost,this.variables[3].cost)],[()=>this.variables[0].cost+f(8)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[2].cost+f(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[4].cost+f(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost)]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>!0]}getMilestoneTree(){return[[[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,1,3,0],[2,2,3,0],[2,3,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,1,3,0],[2,2,3,0],[2,3,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0]],...new Array(3).fill([[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]])]}getTotMult(t){return Math.max(0,.15*t)+f(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(11,Math.floor(Math.max(this.lastPub,this.maxRho)/20));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}dn(t=this.x,s=this.y,i=this.z){0===this.milestones[0]&&(this.dx=10*(s-t),this.dy=t*(28-i)-s,this.dz=t*s-8*i/3),1===this.milestones[0]&&(this.dx=40*(s-t)*10,this.dy=10*(-12*t-t*i+28*s),this.dz=10*(t*s-3*i)),2===this.milestones[0]&&(this.dx=500*(-s-i),this.dy=500*(t+.1*s),this.dz=500*(.1+i*(t-14)))}simulate(){return L(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<220&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>8,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){this.dn();let t=this.x+.5*this.dx*this.dts[this.milestones[0]],s=this.y+.5*this.dy*this.dts[this.milestones[0]],i=this.z+.5*this.dz*this.dts[this.milestones[0]];this.dn(t,s,i),this.x+=this.dx*this.dts[this.milestones[0]],this.y+=this.dy*this.dts[this.milestones[0]],this.z+=this.dz*this.dts[this.milestones[0]],this.dn();let e=5*(this.bounds[this.milestones[0]][0][1]-this.bounds[this.milestones[0]][0][0])+this.bounds[this.milestones[0]][0][0],h=5*(this.bounds[this.milestones[0]][0][2]-this.bounds[this.milestones[0]][0][0])+this.bounds[this.milestones[0]][0][0],a=5*(this.bounds[this.milestones[0]][1][1]-this.bounds[this.milestones[0]][1][0])+this.bounds[this.milestones[0]][1][0],o=5*(this.bounds[this.milestones[0]][1][2]-this.bounds[this.milestones[0]][1][0])+this.bounds[this.milestones[0]][1][0],l=5*(this.bounds[this.milestones[0]][2][1]-this.bounds[this.milestones[0]][2][0])+this.bounds[this.milestones[0]][2][0],r=5*(this.bounds[this.milestones[0]][2][2]-this.bounds[this.milestones[0]][2][0])+this.bounds[this.milestones[0]][2][0];(this.x<e||this.x>h||this.y<a||this.y>o||this.z<l||this.z>r)&&(this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2]),this.dn(),this.msTimer++,335==this.msTimer&&10===this.stratIndex&&(this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2],this.msTimer=0);let n=this.variables[2].value*(1+.05*this.milestones[1]),u=this.variables[3].value*(1+.05*this.milestones[2]),c=this.variables[4].value*(1+.05*this.milestones[3]),v=n+f(this.dx*this.dx),m=u+f(this.dy*this.dy),b=c+f(this.dz*this.dz),p=f(this.dt)+this.totMult+this.variables[0].value+this.variables[1].value+d(d(v,m),b)/2-2;this.rho=d(this.rho,p),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=p(this.rho,this.variables[t].cost),this.variables[t].buy()}}var $=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class _{constructor(t){var s;this.srK_helper=t=>{let s=t*t;return Math.log(s+1/6+1/120/s+1/810/s/s)/2-1},this.sineRatioK=(t,s,i=5)=>{if(t<1||s>=t+1)return 0;let e=t+1+i,h=s*s,a=this.srK_helper(e+s),o=this.srK_helper(e-s),l=e*(a+o-2*this.srK_helper(e))+s*(a-o)-Math.log(1-h/e/e)/2;for(let s=t+1;s<e;++s)l-=Math.log(1-h/s/s);return Math.LOG10E*l},this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="WSP",this.tauFactor=r(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new x({lvl:1,cost:10,costInc:Math.pow(2,.845),value:1,stepwisePowerSum:{default:!0}}),new x({cost:1e3,costInc:Math.pow(2,10.14),varBase:2}),new x({cost:20,costInc:Math.pow(2,3.38)}),new x({cost:50,costInc:Math.pow(2,3.38/1.5),stepwisePowerSum:{base:2,length:50}}),new x({cost:1e10,costInc:Math.pow(2,33.8),varBase:2})],this.S=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=0;this.lastPub>=25&&(t=f(3)),this.lastPub>=40&&(t=1),this.lastPub>=200&&(t=f(50)),this.lastPub>=400&&(t=3),this.lastPub>=700&&(t=1e4);let s=[[!0,!0,!0,!0,!0],[!0,!0,!0,()=>this.lastPub<450||this.t<15,!0],[()=>this.variables[0].cost+f(8+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[2].cost,this.milestones[1]>0?this.variables[4].cost:1/0),!0,!0,()=>this.variables[3].cost+t<Math.min(this.variables[1].cost,this.variables[2].cost,this.milestones[1]>0?this.variables[4].cost:1/0)||this.t<15,!0]];return s=s.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),s}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getMilestoneTree(){return[...new Array(3).fill([[0,0,0],[0,0,1],[0,0,2],[0,0,3],[0,1,3],[1,1,3],[2,1,3],[3,1,3],[4,1,3]])]}getTotMult(t){return Math.max(0,t*this.tauFactor*1.5)}updateMilestones(){let t=0,s=[10,25,40,55,70,100,140,200];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}updateS(){let t=f(this.variables[2].value),s=this.variables[3].value,i=Math.pow(10,f(Math.PI)+s+t-d(s,t-f(3)*this.milestones[2]))+1;this.S=this.sineRatioK(this.variables[2].value,i/Math.PI)}simulate(){return $(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<200&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>8,this.ticks++;if(this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),2===this.stratIndex){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();ct.varBuy.push([this.result[7],this.boughtVars])}return this.result}))}tick(){let t=this.variables[0].value*(1+.01*this.milestones[0]),s=Math.max(0,f(this.dt)+this.S+this.variables[4].value);this.q=d(this.q,s);let i=this.totMult+t+this.variables[1].value+this.q+f(this.dt);this.rho=d(this.rho,i),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.rho=p(this.rho,this.variables[s].cost),this.maxRho+5>this.lastPub){let t=["q1","q2","n","c1","c2"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.variables[s].buy(),2!==s&&4!==s||(t=!0)}t&&this.updateS()}}var z=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class D{constructor(t){var s;this.updateInverseE_Gamma=t=>{let s=f(f(2)/Math.LOG10E+t/Math.LOG10E+f(Math.PI)/Math.LOG10E)-(f(2)+t);this.inverseE_Gamma=0-Math.LOG10E-d(p(s,s+s-f(2)),s+s+s+f(6))},this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="SL",this.tauFactor=r(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.rho2=0,this.rho3=0,this.q=0,this.variables=[new x({lvl:1,cost:1,costInc:Math.pow(2,.369*Math.log2(10)),value:1,stepwisePowerSum:{base:3.5,length:3}}),new x({cost:175,costInc:10,varBase:2}),new x({cost:500,costInc:Math.pow(2,.649*Math.log2(10)),stepwisePowerSum:{base:6.5,length:4}}),new x({cost:1e3,costInc:Math.pow(2,.926*Math.log2(10)),varBase:2})],this.inverseE_Gamma=0,this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0],[()=>this.curMult<4.5,()=>this.curMult<4.5,()=>this.curMult<6,()=>this.curMult<6],[()=>this.curMult<4.5&&this.variables[0].cost+f(this.variables[0].lvl%3*2+1e-4)<this.variables[1].cost,()=>this.curMult<4.5,()=>this.curMult<6&&this.variables[2].cost+f(this.variables[2].cost%4)<this.variables[3].cost,()=>this.curMult<6],[()=>this.curMult<4,()=>this.curMult<4,()=>this.curMult<7.5,()=>this.curMult<7.5],[()=>this.curMult<4&&this.variables[0].cost+f(this.variables[0].lvl%3*2+1e-4)<this.variables[1].cost,()=>this.curMult<4,()=>this.curMult<7.5&&this.variables[2].cost+f(this.variables[2].cost%4)<this.variables[3].cost,()=>this.curMult<7.5]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0]}getTotMult(t){return Math.max(0,t*this.tauFactor*1.5)}updateMilestones(){let t=Math.max(this.lastPub,this.maxRho),s=Math.min(13,Math.floor(t/25));this.milestones=[0,0,0,0];let i=[4,3,1,2];if(this.stratIndex>2&&t>=25&&t<=300){let s=5,e=4;t<50?(s=5,e=4):t<75?(s=7,e=6):t<100?(s=12,e=10):t<150?(s=20,e=15):t<175?(s=8,e=6):t<200?(s=1.5,e=1):t<275?(s=3,e=3):t<300&&(s=2,e=2);let h=Math.min(this.variables[2].cost,this.variables[3].cost);this.rho+f(s)<h?i=[4,3,1,2]:this.curMult>4.5||this.rho+f(e)>h?i=[1,2,4,3]:this.rho+f(s)>h&&this.rho+f(e)<h&&(i=[2,1,4,3])}const e=[3,5,2,2];for(let t=0;t<i.length;t++)for(;this.milestones[i[t]-1]<e[i[t]-1]&&s>0;)this.milestones[i[t]-1]++,s--}simulate(){return z(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<300&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>10,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=this.variables[2].value*(1+.02*this.milestones[2])+this.variables[3].value*(1+.02*this.milestones[3]);this.rho3=d(this.rho3,t+f(this.dt)),this.updateInverseE_Gamma(Math.max(1,this.rho3));let s=Math.LOG10E*(this.variables[0].value/Math.LOG10E+this.variables[1].value/Math.LOG10E-Math.log(2-.008*this.milestones[1])*(Math.max(1,this.rho3)/Math.LOG10E));this.rho2=d(this.rho2,Math.max(0,s)+f(this.dt));let i=this.rho2*(1+.02*this.milestones[0])*.5+this.inverseE_Gamma;this.rho=d(this.rho,i+this.totMult+f(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();)this.rho=p(this.rho,this.variables[t].cost),this.variables[t].buy()}}var N=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};function J(t){return N(this,void 0,void 0,(function*(){let s=new G(t);return yield s.simulate(t)}))}class G{constructor(t){var s,i;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="EF",this.tauFactor=r(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.currencies=[0,0,0],this.maxRho=0,this.q=0,this.t_var=0,this.variables=[new x({cost:1e6,costInc:1e6}),new x({cost:10,costInc:1.61328,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new x({cost:5,costInc:60,varBase:2}),new x({cost:20,costInc:200,value:1,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new x({cost:100,costInc:2,varBase:1.1}),new x({cost:20,costInc:200,value:1,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new x({cost:100,costInc:2,varBase:1.1}),new x({cost:2e3,costInc:Math.pow(2,2.2),value:1,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new x({cost:500,costInc:Math.pow(2,2.2),value:1,stepwisePowerSum:{base:40,length:10}}),new x({cost:500,costInc:Math.pow(2,2.2),varBase:2})],this.recursionValue=null!==(i=t.recursionValue)&&void 0!==i?i:[1/0,0],this.lastA23=[0,0],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0,0],this.nextMilestoneCost=1/0,this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...new Array(10).fill(!0)],[!0,()=>this.curMult<1,!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1||this.lastPub>150,!0,!0],[!0,()=>this.variables[1].cost+1<this.variables[2].cost,!0,!0,!0,!0,!0,()=>this.variables[6].cost+f(2.5)<this.variables[2].cost,!0,!0],[!0,()=>this.variables[1].cost+f(10+this.variables[1].lvl%10)<this.variables[2].cost&&this.variables[1].cost+f(this.variables[1].lvl%10+5)<this.recursionValue[0],()=>this.variables[2].cost+.2<this.recursionValue[0],()=>this.variables[3].cost+f(5)<this.variables[8].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[4].cost+f(5)<this.variables[8].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[5].cost+f(5)<this.variables[9].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[6].cost+f(5)<this.variables[9].cost||this.milestones[1]<2||this.curMult<1,()=>(this.variables[7].cost+f(4+this.variables[7].lvl%10/2)<this.variables[2].cost||this.variables[2].cost>this.recursionValue[0])&&this.variables[7].cost+f(this.variables[7].lvl%10/3)<this.recursionValue[0],!0,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>this.variables[0].lvl<4&&this.maxRho+f(5)<this.nextMilestoneCost,()=>this.maxRho+f(5)<this.nextMilestoneCost,()=>this.maxRho+f(5)<this.nextMilestoneCost,()=>this.milestones[0]>0&&this.maxRho+f(5)<this.nextMilestoneCost,()=>this.milestones[0]>0&&this.maxRho+f(5)<this.nextMilestoneCost,()=>this.milestones[0]>1&&this.maxRho+f(5)<this.nextMilestoneCost,()=>this.milestones[0]>1&&this.maxRho+f(5)<this.nextMilestoneCost,()=>this.milestones[1]>0&&this.maxRho+f(5)<this.nextMilestoneCost,()=>this.milestones[1]>1,()=>this.milestones[1]>2]}getMilestoneTree(){return[...new Array(4).fill([[0,0,0,0,0],[1,0,0,0,0],[2,0,0,0,0],[2,1,0,0,0],[2,2,0,0,0],[2,3,0,0,0],[2,3,1,0,0],[2,3,2,0,0],[2,3,3,0,0],[2,3,4,0,0],[2,3,5,0,0],[2,3,5,1,0],[2,3,5,2,0],[2,3,5,2,1],[2,3,5,2,2]])]}getTotMult(t){return Math.max(0,t*this.tauFactor*.387)}updateMilestones(){let t=0,s=[10,20,30,40,50,70,90,110,130,150,250,275,300,325];for(let i=0;i<s.length;i++)if(Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1),s[i]>Math.max(this.lastPub,this.maxRho)){this.nextMilestoneCost=s[i];break}Math.max(this.lastPub,this.maxRho)>325&&(this.nextMilestoneCost=1/0),this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)],this.variables[4].varBase!==1.1+.01*this.milestones[3]&&(this.variables[4].varBase=1.1+.01*this.milestones[3],this.variables[4].reCalculate()),this.variables[6].varBase!==1.1+.0125*this.milestones[4]&&(this.variables[6].varBase=1.1+.0125*this.milestones[4],this.variables[6].reCalculate())}evaluatePubConditions(){if(3!==this.stratIndex)return!1;let t=0,s=0,i=[10,20,30,40,50,70,90,110,130,150,250,275,300,325];for(let e=0;e<i.length;e++)Math.max(this.lastPub,this.maxRho)>=i[e]&&(t=e+1),this.lastPub>=i[e]&&(s=e+1);return this.lastPub<30&&this.maxRho>32.4||this.lastPub<40&&this.maxRho>42||this.lastPub<50&&this.maxRho>55||this.lastPub<70&&this.maxRho>72||this.lastPub<90&&this.maxRho>92||this.lastPub<110&&this.maxRho>113||this.lastPub<150&&this.maxRho>153||this.lastPub<130&&this.maxRho>134||this.lastPub<146&&this.lastPub>145&&this.curMult>2||this.lastPub<126&&this.lastPub>125&&this.curMult>2||this.lastPub<106&&this.lastPub>105&&this.curMult>3||this.lastPub<87&&this.lastPub>85&&this.curMult>3||this.lastPub<67&&this.lastPub>65&&this.curMult>3||this.lastPub<46.4&&this.lastPub>44.7&&this.curMult>3||this.lastPub<37&&this.lastPub>36&&this.curMult>3||this.lastPub<27&&this.lastPub>26&&this.curMult>3||this.lastPub<298.2&&this.maxRho>300||this.lastPub<323.2&&this.maxRho>325||t-s<1&&this.curMult>t-s+2.6&&this.recursionValue[1]<2&&3===this.stratIndex||2===this.recursionValue[1]&&this.pubRho>this.variables[7].cost+f(4)&&this.variables[7].cost+f(this.variables[7].lvl%10/3)>this.recursionValue[0]}forcedPubConditions(){return 3!==this.stratIndex||(this.lastPub<296||this.pubRho>300)&&(this.lastPub<321||this.pubRho>325)}evaluateTauHConditions(){return 3===this.stratIndex&&(this.lastPub<298.2&&this.lastPub>=296||this.lastPub>=321&&this.lastPub<323.2)}simulate(t){return N(this,void 0,void 0,(function*(){if(this.lastPub>=10&&null==t.recursionValue&&3===this.stratIndex){t.recursionValue=[1/0,0];let s=yield J(t);t.recursionValue=[s[9][0],1];let i=yield J(t);this.recursionValue=[i[9][0],2],this.recursionValue[0]>300&&this.recursionValue[0]<301&&(this.recursionValue[0]=299.2),this.recursionValue[0]>325&&this.recursionValue[0]<326&&(this.recursionValue[0]=324.2)}let s=!1;for(;!s&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<325&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),s=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.evaluatePubConditions())&&this.pubRho>10&&this.forcedPubConditions(),this.ticks++;if(this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,3===this.stratIndex?` q1: ${this.variables[1].lvl} q2: ${this.variables[2].lvl} a1: ${this.variables[7].lvl}`+(ct.showA23?` a2: ${this.lastA23[0]} a3: ${this.lastA23[1]}`:""):""),3===this.stratIndex&&2===this.recursionValue[1]){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();ct.varBuy.push([this.result[7],this.boughtVars])}return this.result}))}tick(){let t=f(this.dt)+this.totMult;this.q=d(this.q,this.variables[1].value+this.variables[2].value+t),this.t_var+=this.dt*(this.variables[0].lvl/5+.2);let s=(this.variables[7].value+this.variables[8].value+this.variables[9].value)*(.1*this.milestones[2]+1),i=this.variables[3].value+this.variables[4].value,e=this.variables[5].value+this.variables[6].value,h=i+f(Math.abs(Math.cos(this.t_var))),a=e+f(Math.abs(Math.sin(this.t_var)));switch(this.currencies[1]=this.milestones[0]>0?d(this.currencies[1],t+2*h):0,this.currencies[2]=this.milestones[0]>1?d(this.currencies[2],t+2*a):0,this.milestones[0]){case 0:this.currencies[0]=d(this.currencies[0],t+(f(this.t_var)+2*this.q)/2);break;case 1:this.currencies[0]=d(this.currencies[0],t+d(f(this.t_var)+2*this.q,2*this.currencies[1])/2);break;case 2:this.currencies[0]=d(this.currencies[0],t+s+d(d(f(this.t_var)+2*this.q,2*this.currencies[1]),2*this.currencies[2])/2)}this.t+=this.dt/1.5,this.dt*=3===this.stratIndex&&this.recursionValue[1]<2?Math.min(1.3,50*this.ddt):this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||ct.forcedPubTime!==1/0||this.evaluateTauHConditions())&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho,this.lastA23=[this.variables[8].lvl,this.variables[9].lvl])}buyVariables(){let t=[0,0,0,1,1,2,2,0,1,2];for(let s=this.variables.length-1;s>=0;s--)for(;this.currencies[t[s]]>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&3===this.stratIndex&&2===this.recursionValue[1]){let t=["t","q1","q2","b1","b2","c1","c2","a1","a2","a3"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.currencies[t[s]]=p(this.currencies[t[s]],this.variables[s].cost),this.variables[s].buy()}}}var W=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class Z{constructor(t){var s,i;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="CSR2",this.tauFactor=r(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.t_var=0,this.variables=[new x({cost:10,costInc:5,stepwisePowerSum:{default:!0},firstFreeCost:!0}),new x({cost:15,costInc:128,varBase:2}),new x({cost:1e6,costInc:16,value:1,stepwisePowerSum:{default:!0}}),new x({cost:50,costInc:Math.pow(2,3.346*Math.log2(256))}),new x({cost:1e3,costInc:Math.pow(10,5.65),varBase:2})],this.recursionValue=null!==(i=t.recursionValue)&&void 0!==i?i:[1/0,0],this.bestCoast=[0,0],this.updateError_flag=!0,this.error=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[()=>this.variables[0].cost+f(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),!0,()=>this.variables[2].cost+f(15+this.variables[2].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),!0,!0],[()=>this.variables[0].cost+f(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),()=>this.variables[1].cost+f(1.8)<this.variables[4].cost,()=>this.variables[2].cost+f(15+this.variables[2].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),()=>this.variables[3].cost+f(1.3)<this.variables[4].cost,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getTotMult(t){return Math.max(0,t*this.tauFactor*2.203-f(200))}updateMilestones(){let t=0,s=[10,45,80,115,220,500];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);let i=[2,3,1];if(this.lastPub<500&&2===this.stratIndex){let t=0;this.lastPub>45&&(t=4),this.lastPub>80&&(t=8),this.lastPub>115&&(t=20),this.lastPub>220&&(t=40),i=(this.rho+f(.5*t)>this.variables[3].cost||this.rho+f(t)>this.variables[4].cost&&this.milestones[1]>0||this.curMult>1&&this.rho+f(2)>this.variables[1].cost)&&this.rho<Math.min(this.variables[3].cost,this.variables[4].cost)||this.t>this.recursionValue[0]?[1,2,3]:[2,3,1]}this.milestones=[0,0,0];const e=[3,1,2];for(let s=0;s<i.length;s++)for(;this.milestones[i[s]-1]<e[i[s]-1]&&t>0;)this.milestones[i[s]-1]++,t--}updateError(t){if(t<6){let s=[0,f(2.060660172040101),f(12.010407635829813),f(70.00178562229294),f(408.0003059755347),f(2378.000049517553)];return void(this.error=s[t])}let s=Math.SQRT2,i=(Math.pow(-(s-1),t)*(t%2?-1:1)+Math.pow(1+s,t))/2/s,e=Math.pow(s+1,t)*(t%2?-1:1);this.error=f(Math.abs(i))+f(Math.abs(e))}searchCoast(t){if(this.curMult>.7){let i=(s=this.lastPub)<45?Math.pow(s,2.1)/10:s<80?Math.pow(s,2.22)/40:s<220?Math.pow(s,2.7)/33e3+40:s<500?Math.pow(s,2.8)/92e3+40:5*Math.pow(1.5,Math.pow(s,.8475)/20);const e=(this.totMult+Math.log10(4)+Math.log10(200))/2.203*10;if(this.lastPub<500){{let s=d(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),h=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<h&&(this.bestCoast[0]=h,this.bestCoast[1]=this.t)}i*=.8;{let s=d(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),h=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<h&&(this.bestCoast[0]=h,this.bestCoast[1]=this.t)}i/=Math.pow(.8,2);{let s=d(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),h=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<h&&(this.bestCoast[0]=h,this.bestCoast[1]=this.t)}}else{t=this.totMult+this.variables[0].value*(1+.05*this.milestones[0])+this.variables[1].value+this.q;let s=this.totMult+this.variables[2].value+1.15*this.variables[4].value+this.error,h=d(this.q+f(2),s+Math.log10(1.5*i))-f(2),a=d(this.rho,t-this.q+h+Math.log10(1.5*i)),o=(a-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<o&&a<e&&(this.bestCoast[0]=o,this.bestCoast[1]=this.t)}}var s}simulate(t){return W(this,void 0,void 0,(function*(){if(this.lastPub>=10&&null==t.recursionValue&&2===this.stratIndex){t.recursionValue=[1/0,0];let s=new Z(t);yield s.simulate(t),this.recursionValue=[s.bestCoast[1],1]}let s=!1;for(;!s&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),(null!=this.recursionValue&&this.t<this.recursionValue[0]||this.curMult<.7||0===this.recursionValue[1])&&this.buyVariables(),this.lastPub<500&&this.updateMilestones(),s=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let i=0;for(let t=0;t<this.variables.length;t++)i=Math.max(i,this.variables[t].cost-this.variables[t].costInc);return this.result=g(this,2===this.stratIndex?" "+Math.min(this.pubMulti,Math.pow(10,this.getTotMult(i)-this.totMult)).toFixed(2):""),1===this.recursionValue[1]&&2===this.stratIndex&&ct.varBuy.push([this.result[7],this.boughtVars]),this.result}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[0]),s=this.milestones[1]>0?this.variables[4].value*(1+.5*this.milestones[2]):0;if(this.updateError_flag){let t=this.milestones[1]>0?this.variables[4].lvl:0,s=this.variables[3].lvl+1+t;this.updateError(s),this.updateError_flag=!1}this.lastPub<500&&this.searchCoast(this.totMult+this.variables[1].value+this.q);let i=this.variables[2].value+s+this.error;this.q=d(this.q,this.totMult+f(this.dt)+i);let e=this.totMult+t+this.variables[1].value+this.q;this.rho=d(this.rho,e+f(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&2===this.stratIndex){let t=["q1","q2","c1","n","c2"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.rho=p(this.rho,this.variables[s].cost),this.variables[s].buy(),s>2&&(this.updateError_flag=!0),t=!0}t&&this.searchCoast(this.totMult+this.variables[1].value+this.q)}}var K=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};const Q=t=>1+t/4,X=[1,1.14,1.21,1.25],U=[[-1.4603545088095868,0],[-1.4553643660270397,-.09781676830384783],[-1.440542081646155,-.19415203999960912],[-1.4163212212231056,-.28759676077859003],[-1.3833896356482762,-.3768794470454824],[-1.342642133546631,-.4609179256197904],[-1.2951228211781993,-.5388537754075557],[-1.241963631033884,-.6100681370867955],[-1.1843251208316332,-.6741799895320815],[-1.1233443487784422,-.7310298502579008],[-1.060092915695705,-.7806529218726466],[-.9955465074244718,-.8232459763245688],[-.9305657733297464,-.8591319035291818],[-.8658873025937653,-.8887250871113064],[-.8021228436348753,-.9124998432235688],[-.7397646956777745,-.9309632543046918],[-.679195280748696,-.9446329646494664],[-.6206991658717179,-.954019930248939],[-.5644761510419182,-.9596157344894038],[-.5106543967354793,-.9618838678042443],[-.4593028903460182,-.9612542845058791],[-.41044282155026063,-.9581205539253138],[-.36405764581325084,-.9528389811158258],[-.32010176657189976,-.9457291580892904],[-.27850786866599236,-.9370755012055574],[-.23919299859739693,-.9271294221274624],[-.20206352115099815,-.9161118621249669],[-.167019095423191,-.9042159895669558],[-.13395581328989362,-.8916099176381238],[-.10276863503870383,-.8784393444855285],[-.07335324405394422,-.8648300526354262],[-.04560742765796049,-.850890230359152],[-.019432076150895955,-.836712596410336],[.0052681222316752355,-.8223763227399408],[.028584225755178324,-.8079487587301435],[.050602769823360656,-.7934869662472297],[.07140564053351184,-.7790390782526131],[.09107005626117316,-.7646454954943122],[.10966862939766708,-.750339936434268],[.1272694861536691,-.7361503554272701],[.14393642707718907,-.722099743531673]];let j=t=>{let s=t*(U.length-1),i=Math.floor(s),e=s-i,h=U[i][0]*(1-e)+U[i+1][0]*e,a=U[i][1]*(1-e)+U[i+1][1]*e;return[h,a,h*h+a*a]},Y=(t,s)=>0==t?.3826834323650898*Math.pow(s,0)+.43724046807752043*Math.pow(s,2)+.1323765754803435*Math.pow(s,4)-.013605026047674188*Math.pow(s,6)-.013567621970103581*Math.pow(s,8)-.0016237253231444653*Math.pow(s,10)+.0002970535373337969*Math.pow(s,12)+794330087952147e-19*Math.pow(s,14)+4.6556124614505e-7*Math.pow(s,16)-143272516309551e-20*Math.pow(s,18)-1.0354847112313e-7*Math.pow(s,20)+1.235792708386e-8*Math.pow(s,22)+1.7881083858e-9*Math.pow(s,24)-339141439e-19*Math.pow(s,26)-163266339e-19*Math.pow(s,28)-37851093e-20*Math.pow(s,30)+9327423e-20*Math.pow(s,32)+522184e-20*Math.pow(s,34)-33507e-20*Math.pow(s,36)-3412e-20*Math.pow(s,38)+58e-20*Math.pow(s,40)+15e-20*Math.pow(s,42):1==t?-.026825102628375348*Math.pow(s,1)+.013784773426351853*Math.pow(s,3)+.03849125048223508*Math.pow(s,5)+.009871066299062077*Math.pow(s,7)-.0033107597608584044*Math.pow(s,9)-.0014647808577954152*Math.pow(s,11)-1320794062487696e-20*Math.pow(s,13)+5922748701847141e-20*Math.pow(s,15)+598024258537345e-20*Math.pow(s,17)-9.6413224561698e-7*Math.pow(s,19)-1.8334733722714e-7*Math.pow(s,21)+4.46708756272e-9*Math.pow(s,23)+2.70963508218e-9*Math.pow(s,25)+7785288654e-20*Math.pow(s,27)-2343762601e-20*Math.pow(s,29)-158301728e-20*Math.pow(s,31)+12119942e-20*Math.pow(s,33)+1458378e-20*Math.pow(s,35)-28786e-20*Math.pow(s,37)-8663e-20*Math.pow(s,39)-84e-20*Math.pow(s,41)+36e-20*Math.pow(s,43)+1e-20*Math.pow(s,45):2==t?.005188542830293168*Math.pow(s,0)+.00030946583880634744*Math.pow(s,2)-.011335941078229373*Math.pow(s,4)+.0022330457419581446*Math.pow(s,6)+.00519663740886233*Math.pow(s,8)+.0003439914407620834*Math.pow(s,10)-.0005910648427470583*Math.pow(s,12)-.00010229972547935857*Math.pow(s,14)+2088839221699276e-20*Math.pow(s,16)+592766549309654e-20*Math.pow(s,18)-1.6423838362436e-7*Math.pow(s,20)-1.5161199700941e-7*Math.pow(s,22)-5.90780369821e-9*Math.pow(s,24)+2.09115148595e-9*Math.pow(s,26)+1.7815649583e-10*Math.pow(s,28)-1616407246e-20*Math.pow(s,30)-238069625e-20*Math.pow(s,32)+5398265e-20*Math.pow(s,34)+1975014e-20*Math.pow(s,36)+23333e-20*Math.pow(s,38)-11188e-20*Math.pow(s,40)-416e-20*Math.pow(s,42)+44e-20*Math.pow(s,44)+3e-20*Math.pow(s,46):3==t?-.0013397160907194568*Math.pow(s,1)+.003744215136379394*Math.pow(s,3)-.0013303178919321468*Math.pow(s,5)-.0022654660765471786*Math.pow(s,7)+.0009548499998506731*Math.pow(s,9)+.0006010038458963604*Math.pow(s,11)-.00010128858286776622*Math.pow(s,13)-6865733449299826e-20*Math.pow(s,15)+5.9853667915386e-7*Math.pow(s,17)+333165985123995e-20*Math.pow(s,19)+2.1919289102435e-7*Math.pow(s,21)-7.890884245681e-8*Math.pow(s,23)-9.4146850813e-9*Math.pow(s,25)+9.5701162109e-10*Math.pow(s,27)+1.8763137453e-10*Math.pow(s,29)-443783768e-20*Math.pow(s,31)-224267385e-20*Math.pow(s,33)-3627687e-20*Math.pow(s,35)+1763981e-20*Math.pow(s,37)+79608e-20*Math.pow(s,39)-942e-19*Math.pow(s,41)-713e-20*Math.pow(s,43)+33e-20*Math.pow(s,45)+4e-20*Math.pow(s,47):.00046483389361763383*Math.pow(s,0)-.001005660736534047*Math.pow(s,2)+.00024044856573725794*Math.pow(s,4)+.0010283086149702322*Math.pow(s,6)-.0007657861071755644*Math.pow(s,8)-.00020365286803084818*Math.pow(s,10)+.0002321229049106873*Math.pow(s,12)+326021442438652e-19*Math.pow(s,14)-2557906251794953e-20*Math.pow(s,16)-410746443891574e-20*Math.pow(s,18)+117811136403713e-20*Math.pow(s,20)+2.4456561422485e-7*Math.pow(s,22)-2.391582476734e-8*Math.pow(s,24)-7.50521420704e-9*Math.pow(s,26)+1.3312279416e-10*Math.pow(s,28)+1.3440626754e-10*Math.pow(s,30)+351377004e-20*Math.pow(s,32)-151915445e-20*Math.pow(s,34)-8915418e-20*Math.pow(s,36)+1119589e-20*Math.pow(s,38)+10516e-19*Math.pow(s,40)-5179e-20*Math.pow(s,42)-807e-20*Math.pow(s,44)+11e-20*Math.pow(s,46)+4e-20*Math.pow(s,48),tt=[],st=[],it=(t,s)=>{let i=0,e=0,h=Math.sqrt(t/(2*Math.PI)),a=Math.floor(h),o=h-a,l=(t=>t/2*Math.log(t/2/Math.PI)-t/2-Math.PI/8+1/48/t+7/5760/t/t/t)(t);for(let s=1;s<=a;++s)void 0===tt[s]&&(tt[s]=Math.log(s),st[s]=Math.sqrt(s)),i+=Math.cos(l-t*tt[s])/st[s];i*=2;for(let i=0;i<=s;++i)e+=Y(i,2*o-1)*Math.pow(2*Math.PI/t,.5*i);return e*=(t=>t%2==0?1:-1)(a-1)*Math.pow(2*Math.PI/t,.25),i+=e,[i*Math.cos(l),-i*Math.sin(l),i]};class et{constructor(t){var s;this.stratIndex=h(t.strats,t.strat),this.strat=t.strat,this.theory="RZ",this.tauFactor=r(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=ct.dt,this.ddt=ct.ddt,this.t=0,this.ticks=0,this.currencies=[0,0],this.maxRho=0,this.t_var=0,this.zTerm=0,this.rCoord=-1.4603545088095868,this.iCoord=0,this.variables=[new x({firstFreeCost:!0,cost:220,costInc:Math.pow(2,.7),stepwisePowerSum:{base:2,length:8}}),new x({cost:1400,costInc:Math.pow(2,2.8),varBase:2}),new x({cost:1e6,costInc:1e12}),new x({stepwiseCost:6,cost:12e4,costInc:Math.pow(100,1/3),value:1,stepwisePowerSum:{base:2,length:8}}),new x({cost:1,costInc:10,varBase:2})],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.result=[],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(5).fill(!0),...new Array(2).fill([()=>this.variables[0].lvl<4*this.variables[1].lvl+(this.milestones[0]?2:1),!0,!0,()=>!this.milestones[2]||this.variables[3].cost+f(4+this.variables[3].lvl%8*.5+1e-4)<this.variables[4].cost,!0])];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.variables[2].lvl<8,()=>1==this.milestones[1],()=>1==this.milestones[2]]}getMilestoneTree(){return[[[0,0,0,0],[0,1,0,0],[0,1,1,0],[1,1,1,0],[2,1,1,0],[3,1,1,0],[3,1,1,1]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[1,1,1,0],[2,1,1,0],[3,1,1,0],[3,1,1,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[1,1,1,0],[2,1,1,0],[3,1,1,0],[3,1,1,1]]]}getTotMult(t){return Math.max(0,t*this.tauFactor*2.1+f(4))}updateMilestones(){let t=0,s=[21,50,125,200,275,350];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return K(this,void 0,void 0,(function*(){let t=!1;for(;!t&&ct.simulating;)(this.ticks+1)%5e5==0&&(yield a()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<350&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(ct.forcedPubTime!==1/0?this.t>ct.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>8,this.ticks++;return this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult),this.result=g(this,""),this.result}))}tick(){let t=this.milestones[3]?(t=>Math.min(Math.pow(t,2)+.004,1/4))(this.zTerm):1/4;this.t_var+=this.dt*t/1.5;let s=f(this.t_var),i=f(this.dt)+this.totMult,e=this.milestones[1]?this.variables[3].value:0,h=this.milestones[2]?this.variables[4].value:0,a=this.variables[0].value*X[this.milestones[0]],o=this.variables[1].value,l=Q(this.variables[2].lvl),r=(t=>{if(t>1)return it(t,4);if(t<.1)return j(t);let s=(t=>t*t*(1-t)+(1-(1-t)*(1-t))*t)(10*(t-.1)/9),i=j(t),e=it(t,4);return[i[0]*(1-s)+e[0]*s,i[1]*(1-s)+e[1]*s,i[2]*(1-s)+Math.abs(e[2])*s]})(this.t_var);if(this.milestones[1]){let s=r[0]-this.rCoord,a=r[1]-this.iCoord,o=f(Math.sqrt(s*s+a*a))-f(this.dt*t);this.currencies[1]=d(this.currencies[1],o*l+e+h+i)}this.rCoord=r[0],this.iCoord=r[1],this.zTerm=Math.abs(r[2]);let n=(u=this.variables[2].lvl,Math.pow(10,-Q(u)));var u;this.currencies[0]=d(this.currencies[0],s+a+o+e+i-f(this.zTerm/l+n)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||ct.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=[0,0,0,1,1];for(let s=this.variables.length-1;s>=0;s--)for(;this.currencies[t[s]]>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();)this.currencies[t[s]]=p(this.currencies[t[s]],this.variables[s].cost),this.variables[s].buy()}}function ht(t,s,i,e="r"){if("string"==typeof t){const s=t.charAt(t.length-1);if(null!==s.match(/[r/t/m]/))at(t=t.slice(0,-1))&&(t=[t,s]);else{if(!s.match(/[0-9]/))throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;at(t)&&(t=[t,e])}}if("string"==typeof t[0]&&Array.isArray(t)&&(t[0]=ot(t[0])),"number"!=typeof t[0])throw`Cannot parse value ${t[0]}. Please contact the author of the sim.`;if("r"===t[1])return t[0];if("t"===t[1])return t[0]/r(s);if("m"===t[1])return function(t,s,i){let e=()=>i<65?0:i<75?1:i<85?2:3,h=(t,h)=>(s-Math.log10(Math.pow(i/20,e()))+Math.log10(h))*(1/t),a=t=>(s-Math.log10(Math.pow(i/20,e())))*(1/t);switch(t){case"T1":return h(.164,3);case"T2":return h(.198,100);case"T3":return o=.147,l=3,(s-Math.log10(Math.pow(i/20,e()))-Math.log10(l))*(1/o);case"T4":return h(.165,4);case"T5":return a(.159);case"T6":return h(.196,50);case"T7":return a(.152);case"T8":return a(.15);case"WSP":case"SL":return s/.15;case"EF":return s*(1/.387)*2.5;case"CSR2":return(s+Math.log10(200))*(1/2.203)*10}var o,l;throw"Failed parsing multiplier. Please contact the author of the sim."}(s,t[0],i);throw`Cannot parse value ${t[0]} and ${t[1]}. Please contact the author of the sim.`}function at(t){if(null===t.match(/^[0-9/e/.]+$/))throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;let s=0;for(let i=0;i<t.length;i++)"e"===t[i]&&s++;if(s>1)throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;let i=0;for(let s=0;s<t.length;s++)"."===t[s]&&i++;if(i>1)throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;return!0}function ot(t){return/[e]/.test(t)?u(t):parseFloat(t)}function lt(t){const s=JSON.parse(t),i={sigma:[0,0],ct:!1};let e=0;s[2]=s[2].split(" ");for(let t=0;t<s[2].length;t++)0!==s[2][t].length&&(e<2?i.sigma[e]=Math.max(0,parseInt(s[2][t])):i.ct="y"===s[2][t],e++);const h=[];for(let t=0;t<2;t++){const e=s[t].split(","),a=[];for(let s=0;s<e.length;s++){const h=e[s].split(" "),o=[];for(let e=0;e<h.length;e++)0!==h[e].length&&o.push(ht(h[e],n(s+8*Number(i.ct)),i.sigma[t],"t"));a.push(o)}h.push(a)}return h}function rt(){const i=s(".timeDiffInput"),e=t(".timeDiffTable"),h=[];for(const t of i)h.push(t.value);for(lt(JSON.stringify(h));e.firstChild;)e.firstChild.remove();const a=document.createElement("th"),o=document.createElement("td");o.innerHTML="Hello world",a.appendChild(o),e.appendChild(a)}var nt=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};const ut=t(".output"),ct={dt:1.5,ddt:1.0001,stratFilter:!0,simulating:!1,forcedPubTime:1/0,showA23:!1,varBuy:[[0,[{variable:"var",level:0,cost:0,timeStamp:0}]]]},vt={lastStrat:null,simEndTimestamp:0};function mt(t){return nt(this,void 0,void 0,(function*(){if(ct.simulating)return ct.simulating=!1,"Sim stopped.";if((performance.now()-vt.simEndTimestamp)/1e3<1)return null;try{let s=function(t){const s={theory:t.theory,strat:t.strat,mode:t.mode,hardCap:t.hardCap,modeInput:t.modeInput,simAllInputs:t.simAllInputs,sigma:0,rho:0,cap:1/0,recovery:null};if("All"!==t.mode&&"Time diff."!==t.mode){if(t.sigma.length>0&&null!==t.sigma.match(/^[0-9]+$/)&&parseInt(t.sigma)>=0&&parseFloat(t.sigma)%1==0)s.sigma=parseInt(t.sigma);else if("T"===t.theory.charAt(0))throw"Invalid sigma value. Sigma must be an integer that's >= 0";if(!(t.rho.length>0))throw"Input value cannot be empty.";if(s.rho=ht(t.rho,s.theory,s.sigma),"Chain"===t.mode||"Steps"===t.mode){if(!(t.cap.length>0))throw"Cap value cannot be empty.";s.cap=ht(t.cap,s.theory,s.sigma)}}return"Single sim"!==t.mode&&"Chain"!==t.mode&&("Time diff."===t.mode&&(t.modeInput=JSON.stringify(t.timeDiffInputs)),s.modeInput=function(t,s){if("Steps"===s&&"string"==typeof t&&at(t))return ot(t);if("Amount"===s&&"string"==typeof t){if(null!==t.match(/[0-9]/))return parseFloat(t);throw s+" input must be a number."}if("All"===s)return function(t){let s=t.split(" ");for(let t=0;t<s.length;t++)s[t]=s[t].replace(" ",""),s[t]=s[t].replace("\n","");if(s=s.filter((t=>""!==t)),s.length<2)throw"Student count and at least one theory value that is not 0 is required.";if(s.length-1>o.Jp.length)throw`Invalid value ${s[o.Jp.length+1]} does not match any theory.`;let i=[];if(e=s[0],!/^\d+$/.test(e))throw`Invalid student value ${s[0]}.`;var e;i.push(parseInt(s[0]));for(let t=1;t<s.length;t++)i.push(ht(s[t],n(t-1),i[0],"t"));return i}(t);if("Time diff."===s)return lt(t);if("Time diff."===s||"Single sim"===s||"Chain"===s)return t;throw`Couldnt parse mode ${s}. Please contact the author of the sim.`}(t.modeInput,t.mode)),s}(t),i=[];switch(ct.simulating=!0,s.mode){case"Single sim":i=[yield bt(s)];break;case"Chain":i=yield function(t,s=1/0){return nt(this,void 0,void 0,(function*(){let s=t.rho,i=0;const e=t.rho,h=[];let o=c(t.cap),l=0;for(;s<t.cap;){let e=performance.now();e-l>250&&(l=e,ut.textContent=`Simulating ${c(s,0)}/${o}`,yield a());let r=yield bt(Object.assign({},t));if(!ct.simulating)break;"string"==typeof r[6]&&(vt.lastStrat=r[6].split(" ")[0]),h.push(r),s=r[r.length-1][0],t.rho=s,i+=r[r.length-1][1]}vt.lastStrat=null,h.push(["","","","","Tau Total","","",'Average <span style="font-size:0.9rem; font-style:italics">&tau;</span>/h',"Total Time"]);const n=(t.rho-e)*r(t.theory);return h.push(["","","","",c(n,2),"","",m(n/(i/3600),5),v(i)]),h}))}(s);break;case"Steps":i=yield function(t){return nt(this,void 0,void 0,(function*(){let s=0;t.rho;const i=[];let e=c(t.cap),h=0;for(;t.rho<t.cap+1e-5;){let o=performance.now();o-h>250&&(h=o,ut.textContent=`Simulating ${c(t.rho,0)}/${e}`,yield a());let l=yield bt(Object.assign({},t));if(!ct.simulating)break;"string"==typeof l[6]&&(vt.lastStrat=l[6].split(" ")[0]),i.push(l),t.rho+=t.modeInput,s+=l[l.length-1][1]}return vt.lastStrat=null,i}))}(s);break;case"All":i=yield function(t){return nt(this,void 0,void 0,(function*(){const s=t.modeInput[0],i=t.modeInput.slice(1,t.modeInput.length);let e=[];for(let h=0;h<i.length;h++){if(0===i[h])continue;if(ut.innerText=`Simulating ${n(h)}/${n(i.length-1)}`,yield a(),!ct.simulating)break;let o=["Best Semi-Idle","Best Overall"];null!=t.simAllInputs&&(o=[t.simAllInputs[0]?"Best Semi-Idle":"Best Idle",t.simAllInputs[1]?"Best Overall":"Best Active"]);let l=[];for(let t=0;t<o.length;t++){let e={theory:n(h),strat:o[t],sigma:s,rho:i[h],cap:1/0,mode:"Single Sim"};l.push(yield bt(e))}e.push(dt(l))}return e.push([s]),e}))}(s)}return vt.simEndTimestamp=performance.now(),i}catch(t){return String(t)}}))}function bt(t){var s;return nt(this,void 0,void 0,(function*(){if(-1!==h(["Best Overall","Best Active","Best Semi-Idle","Best Idle"],t.strat))return function(t){return nt(this,void 0,void 0,(function*(){const s=function(t,s,i){let e=[];switch(t){case"T1":e=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<850,"Best Overall"!==i&&"Best Active"!==i&&s>625,"Best Semi-Idle"!==i&&"Best Idle"!==i&&("Best Active"===i||s<250),"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i];break;case"T2":e=["Best Semi-Idle"!==i&&"Best Active"!==i&&"Best Overall"!==i||s<25,"Best Idle"!==i&&("Best Active"!==i&&"Best Overall"!==i||s>=250),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<250,"Best Active"!==i&&"Best Overall"!==i&&"Best Idle"!==i&&s<250];break;case"T3":e=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s<150,"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i&&s>=175&&s<300,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<175,"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i&&s>=175&&s<300,"Best Overall"!==i&&"Best Active"!==i&&s>=260&&(s<500||"Best Semi-Idle"!==i),"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>=150,"Best Overall"!==i&&"Best Idle"!==i&&"Best Semi-Idle"!==i&&s>=275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<150,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<350,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<350,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<175,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<225,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=200&&s<375,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=250];break;case"T4":e=[s<30,"Best Overall"!==i&&"Best Active"!==i&&s<600&&"T4C3"!==vt.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>200,"Best Overall"!==i&&"Best Active"!==i&&s<125,"Best Overall"!==i&&"Best Active"!==i&&s<150,"Best Overall"!==i&&"Best Active"!==i&&s<275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<700&&"T4C3d66"!==vt.lastStrat&&"T4C123d"!==vt.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<700&&s>175&&("T4C3d66"!==vt.lastStrat||s<225),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=75&&s<200,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=175&&s<300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>240];break;case"T5":e=[s<25||"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Idle"!==i&&"Best Semi-Idle"!==i];break;case"T6":e=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<100,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<1100&&"T6noC1234"!==vt.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<750&&"T6noC34"!==vt.lastStrat&&"T6noC1234"!==vt.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>800,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>400,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<25,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=25&&s<100,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=100&&s<1100&&"T6noC1234"!==vt.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=100&&s<750&&"T6noC34"!==vt.lastStrat&&"T6noC1234"!==vt.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>800,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=100];break;case"T7":e=[!1,"Best Overall"!==i&&"Best Active"!==i&&(s<25||s>=75&&s<100),"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<75,"Best Overall"!==i&&"Best Active"!==i&&s<550&&s>=100,"Best Overall"!==i&&"Best Active"!==i&&s<625&&s>500,"Best Overall"!==i&&"Best Active"!==i&&s>525,"Best Semi-Idle"!==i&&"Best Idle"!==i&&(s<25||s>=75&&s<150),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=25&&s<75,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=100];break;case"T8":e=["Best Overall"!==i&&"Best Active"!==i&&("Best Semi-Idle"!==i||s<100),"Best Overall"!==i&&"Best Active"!==i&&s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=160&&s<220,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<160,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<60,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=160&&s<220,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=100&&s<160,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=40&&s<100,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=220,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i];break;case"WSP":e=["Best Overall"!==i&&"Best Active"!==i&&s<525,"Best Overall"!==i&&"Best Active"!==i&&s>475,"Best Semi-Idle"!==i&&"Best Idle"!==i];break;case"SL":e=[s<25||"Best Idle"===i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>=300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s<300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s<300];break;case"EF":e=[s<10||"Best Idle"===i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<10,"Best Semi-Idle"!==i&&"Best Idle"!==i];break;case"CSR2":e=[s<10||"Best Idle"===i||"Best Semi-Idle"===i,"Best Active"===i&&s<500,("Best Overall"===i||"Best Active"===i&&s>=500)&&s>10];break;case"RZ":e=[!0,!0,!0]}let h=[];switch(t){case"T1":h=[!0,s>=25,s>=50,!0,!0];break;case"T2":case"EF":h=[!0,!0,!0,!0];break;case"T3":h=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];break;case"T4":h=[!0,!0,!0,s>=25,s>=50,s>=50,!0,!0,s>=25,s>=75,s>=50,!0];break;case"T5":case"WSP":case"CSR2":case"RZ":h=[!0,!0,!0];break;case"T6":h=[!0,!0,!0,!0,!0,s>=125,!0,!0,!0,!0,!0,s>=125,!0];break;case"T7":h=[!0,!0,s>=25,s>=25,s>=75,s>=75,!0,s>=25,s>=100];break;case"T8":h=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];break;case"SL":h=[!0,!0,!0,!0,!0]}if(0===e.length)throw"No strats found";let a=[];for(let s=0;s<e.length;s++)!e[s]&&ct.stratFilter||!h[s]||a.push(o.S3[l(t)][s]);return a}(t.theory,t.rho,t.strat);let i=new Array(9).fill(0);for(let e=0;e<s.length;e++){t.strat=s[e];let h=yield bt(t);i[7]<h[7]&&(i=h)}return i}))}(t);const i={strat:t.strat,strats:o.S3[l(t.theory)],sigma:t.sigma,rho:t.rho,recursionValue:null,recovery:null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},cap:t.hardCap?t.cap:null};switch(t.theory){case"T1":return yield function(t){return T(this,void 0,void 0,(function*(){let s=new I(t);return yield s.simulate()}))}(i);case"T2":return yield function(t){return C(this,void 0,void 0,(function*(){let s=new P(t);return yield s.simulate()}))}(i);case"T3":return yield function(t){return B(this,void 0,void 0,(function*(){let s=new R(t);return yield s.simulate()}))}(i);case"T4":return yield function(t){return S(this,void 0,void 0,(function*(){let s=new A(t);return yield s.simulate(t)}))}(i);case"T5":return yield function(t){return k(this,void 0,void 0,(function*(){let s=new V(t);return yield s.simulate()}))}(i);case"T6":return yield function(t){return H(this,void 0,void 0,(function*(){let s=new q(t);return yield s.simulate()}))}(i);case"T7":return yield function(t){return O(this,void 0,void 0,(function*(){let s=new E(t);return yield s.simulate()}))}(i);case"T8":return yield function(t){return L(this,void 0,void 0,(function*(){let s=new F(t);return yield s.simulate()}))}(i);case"WSP":return yield function(t){return $(this,void 0,void 0,(function*(){let s=new _(t);return yield s.simulate()}))}(i);case"SL":return yield function(t){return z(this,void 0,void 0,(function*(){let s=new D(t);return yield s.simulate()}))}(i);case"EF":return yield J(i);case"CSR2":return yield function(t){return W(this,void 0,void 0,(function*(){let s=new Z(t);return yield s.simulate(t)}))}(i);case"RZ":return yield function(t){return K(this,void 0,void 0,(function*(){let s=new et(t);return yield s.simulate()}))}(i)}throw`Theory ${t.theory} is not defined in singleSim() function. Please contact the author of the sim.`}))}function dt(t){return[t[0][0],t[0][2],t[1][7],t[0][7],m(t[1][7]/t[0][7],4),t[1][5],t[0][5],t[1][6],t[0][6],t[1][8],t[0][8],t[1][4],t[0][4]]}const pt=t(".theory"),Mt=t(".strat"),ft=(t(".sigma"),t(".input"),t(".cap")),wt=t(".mode"),gt=t("textarea"),xt=t(".hardCap"),yt=t(".semi-idle"),Tt=t(".hard-active"),It=s(".timeDiffInput"),Ct=t(".extraInputs"),Pt=t(".timeDiffWrapper"),Bt=s(".controls")[0],Rt=t(".simAllInputs"),St=t(".extraInputDescription");function At(){Bt.style.display="none",Ct.style.display="none",Pt.style.display="none",xt.style.display="none",Rt.style.display="none",St.style.display="inline",gt.style.height="1.8em",gt.style.width="6rem",ft.style.display="none",t(".capDesc").style.display="none","Chain"!==wt.value&&"Steps"!==wt.value||(ft.style.display="inline",t(".capDesc").style.display="inline"),"Single sim"!==wt.value&&"Time diff."!==wt.value&&"Chain"!==wt.value&&(Ct.style.display="flex"),"Time diff."===wt.value&&(Pt.style.display="grid"),"All"!==wt.value&&"Time diff."!==wt.value&&(Bt.style.display="grid"),"All"===wt.value&&(Rt.style.display="grid",St.style.display="none",gt.style.height="3rem",gt.style.width="20rem"),gt.placeholder=o.CN[h(o.Sw,wt.value)],St.textContent=o.xy[h(o.Sw,wt.value)]}function kt(){for(;Mt.firstChild;)Mt.firstChild.remove();const t=["Best Overall","Best Active","Best Semi-Idle","Best Idle"];for(let s=0;s<4;s++){const e=i("option");e.value=t[s],e.textContent=t[s],Mt.appendChild(e)}const s=h(o.Jp,pt.value);for(let t=0;t<o.S3[s].length;t++){const e=i("option");e.value=o.S3[s][t],e.textContent=o.S3[s][t],Mt.appendChild(e)}}window.onload=()=>{var t;for(let t=0;t<o.Jp.length;t++){const s=i("option");s.value=o.Jp[t],s.textContent=o.Jp[t],pt.appendChild(s)}for(let t=0;t<o.S3[0].length;t++){const s=i("option");s.value=o.S3[0][t],s.textContent=o.S3[0][t],Mt.appendChild(s)}for(let t=0;t<o.Sw.length;t++){const s=i("option");s.value=o.Sw[t],s.textContent=o.Sw[t],wt.appendChild(s)}At(),e(wt,"input",At),e(pt,"change",kt);const s=JSON.parse(null!==(t=localStorage.getItem("simAllSettings"))&&void 0!==t?t:"[true, false]");yt.checked=s[0],Tt.checked=s[1];for(const t of It)e(t,"input",(()=>{rt()}))};const Vt=t(".theory"),Ht=t(".strat"),qt=t(".sigma"),Ot=t(".input"),Et=t(".cap"),Lt=t(".mode"),Ft=t("textarea"),$t=t(".hardCap"),_t=t(".output"),zt=t(".simTable"),Dt=t(".dtOtp"),Nt=t(".ddtOtp"),Jt=t(".a23");const Gt=t(".theory"),Wt=t(".strat"),Zt=t(".sigma"),Kt=t(".input"),Qt=t(".cap"),Xt=t(".mode"),Ut=t("textarea"),jt=s(".timeDiffInput"),Yt=t(".hardCap"),ts=t(".semi-idle"),ss=t(".hard-active"),is=t(".output");let es=t(".simTable"),hs=t(".simTable > thead"),as=t(".simTable > tbody");const os=t(".simulate"),ls=t(".dtOtp"),rs=t(".ddtOtp"),ns=t(".a23");let us="All";const cs='<span style="font-size:0.9rem; font-style:italics">&tau;</span>',vs={current:"All",single:`<th style="padding-inline: 0.5rem !important">Theory</th><th><span style="font-size:0.9rem;">&sigma;</span><sub>t</sub></th><th>Last Pub</th><th>Max Rho</th><th>&Delta;${cs}</th><th>Multi</th><th>Strat</th><th>${cs}/h</th><th>Pub Time</th>`,all:`<th>&emsp;</th><th>Input</th><th>${cs}/h Active</th><th>${cs}/h Idle</th><th>Ratio</th><th>Multi Active</th><th>Multi Idle</th><th>Strat Active</th><th>Strat Idle</th><th>Time Active</th><th>Time Idle</th><th>&Delta;${cs} Active</th><th>&Delta;${cs} Idle</th>`};function ms(s){document.body.style.overflow="hidden",t(".boughtVars").showModal();const i=t(".boughtVarsOtp");for(;i.firstChild;)i.firstChild.remove();for(let t=0;t<s.length;t++){const e=document.createElement("tr"),h=document.createElement("td");h.innerText=s[t].variable,e.appendChild(h);const a=document.createElement("td");a.innerText=s[t].level.toString(),e.appendChild(a);const o=document.createElement("td");o.innerText=c(s[t].cost,2),e.appendChild(o);const l=document.createElement("td");l.innerText=v(s[t].timeStamp),e.appendChild(l),i.appendChild(e)}}function bs(){for(;as.firstChild;)as.firstChild.remove()}hs.innerHTML=vs.all,es.classList.add("big"),e(os,"click",(()=>{return s=void 0,e=void 0,o=function*(){var s,e;ct.dt=parseFloat(null!==(s=ls.textContent)&&void 0!==s?s:"1.5"),ct.ddt=parseFloat(null!==(e=rs.textContent)&&void 0!==e?e:"1.0001"),ct.stratFilter=!0,ct.showA23=ns.checked,localStorage.setItem("simAllSettings",JSON.stringify([ts.checked,ss.checked]));const h={theory:Gt.value,strat:Wt.value,sigma:Zt.value.replace(" ",""),rho:Kt.value.replace(" ",""),cap:Qt.value.replace(" ",""),mode:Xt.value,modeInput:Ut.value,simAllInputs:[ts.checked,ss.checked],timeDiffInputs:[],hardCap:Yt.checked};for(let t of jt)h.timeDiffInputs.push(t.value);is.textContent="",os.textContent="Stop simulating",yield a();let o=yield mt(h);is.textContent="string"==typeof o?o:"",null!==o&&"string"!=typeof o&&function(s){us!==Xt.value&&bs(),us=Xt.value,es=t(".simTable"),hs=t(".simTable > thead"),as=t(".simTable > tbody"),"All"===Xt.value?(es.classList.add("big"),es.classList.remove("small"),hs.innerHTML=vs.all,hs.children[0].children[0].innerHTML=s[s.length-1][0].toString()+'<span style="font-size:0.9rem;">&sigma;</span><sub>t</sub>',s.pop()):(es.classList.remove("big"),es.classList.add("small"),hs.innerHTML=vs.single),(as.children.length>1&&(s.length>1||""===as.children[as.children.length-1].children[0].innerHTML)||"All"===Xt.value)&&bs();for(let t=0;t<s.length;t++){const e=i("tr");for(let h=0;h<hs.children[0].children.length;h++){const a=i("td");a.innerHTML=String(s[t][h]),e.appendChild(a)}as.appendChild(e)}!function(){as=t(".simTable > tbody");for(let t=0;t<ct.varBuy.length;t++)for(let s=0;s<(null==as?void 0:as.children.length);s++){const i=null==as?void 0:as.children[s];if(parseFloat(null==i?void 0:i.children[7].innerHTML)===ct.varBuy[t][0]){let s=ct.varBuy[t][1];(null==i?void 0:i.children[8]).onpointerdown=()=>{ms(s)},(null==i?void 0:i.children[8]).style.cursor="pointer"}}ct.varBuy=[]}()}(o),os.textContent="Simulate",ct.simulating=!1,localStorage.setItem("simState",JSON.stringify({controls1:{theory:{value:Vt.value,innerHTML:Vt.innerHTML},strat:{value:Ht.value,innerHTML:Ht.innerHTML},sigma:qt.value,input:Ot.value,cap:Et.value},controls2:{mode:Lt.value,modeInput:Ft.value,extraInputDescription:t(".extraInputDescription").textContent,hardCap:$t.checked,timeDiffInputs:[t(".timeDiffWrapper").children[0].value,t(".timeDiffWrapper").children[1].value,t(".timeDiffWrapper").children[2].value]},output:_t.textContent,table:zt.innerHTML,settings:{dt:Dt.textContent,ddt:Nt.textContent,showA23:Jt.checked}}))},new((h=void 0)||(h=Promise))((function(t,i){function a(t){try{r(o.next(t))}catch(t){i(t)}}function l(t){try{r(o.throw(t))}catch(t){i(t)}}function r(s){var i;s.done?t(s.value):(i=s.value,i instanceof h?i:new h((function(t){t(i)}))).then(a,l)}r((o=o.apply(s,e||[])).next())}));var s,e,h,o})),e(t(".boughtVarsCloseBtn"),"pointerdown",(()=>{t(".boughtVars").close(),document.body.style.overflow="auto"}))})();