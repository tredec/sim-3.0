(()=>{"use strict";var t={10:(t,s,i)=>{var e=i(434),h=i(301),a=i(297);class o{constructor(){var t,s,i;this.terminal_element=(0,e.qs)(".terminal"),this.output_container=(0,e.qs)(".terminalOutputs"),this.input=(0,e.qs)(".terminalInput"),this.history=JSON.parse(null!==(t=localStorage.getItem("terminalHistory"))&&void 0!==t?t:"[]"),this.historyIndex=this.history.length;const h=JSON.parse(null!==(s=localStorage.getItem("terminalSize"))&&void 0!==s?s:'{"width": "700px", "height":"400px"}');this.terminal_element.style.width=h.width,this.terminal_element.style.height=h.height,this.terminal_element.style.display="block";const a=JSON.parse(null!==(i=localStorage.getItem("terminalPos"))&&void 0!==i?i:'{"top": "0px", "left":"0px"}');this.terminal_element.style.top=a.top,this.terminal_element.style.left=a.left}parseInput(){const t=this.input.value;return this.input.value="",this.updateHistory(t),this.writeLine(t,!0),t}writeLine(t,s=!1){if(0===(t=(t=(t=t.replace(/script/g,"/script/")).replace(/[(]/g,"/(/")).replace(/[)]/g,"/)/")).length)return;t=(t=(t=(t=t.replace(/<r>/g,'<span style="color:red; font-weight:bold">')).replace(/<\/r>/g,"</span>")).replace(/<g>/g,'<span style="color:rgb(34, 211, 34); font-weight:bold">')).replace(/<\/g>/g,"</span>");const i=(0,e.ce)("div");if(s){const t=(0,e.ce)("span");t.innerText=">",t.style.marginRight="1rem",t.style.userSelect="none",i.appendChild(t),i.style.marginBlock="0.3em"}const h=(0,e.ce)("span");h.classList.add("output"),h.innerHTML=t,i.appendChild(h),this.output_container.appendChild(i),(0,e.qs)(".terminalOutputWrapper").scroll({top:1e8})}deleteLine(){this.output_container.lastChild&&this.output_container.lastChild.remove()}clearTerminal(){for(;this.output_container.firstChild;)this.output_container.firstChild.remove()}updateHistory(t){this.history=this.history.filter((s=>s!==t)),t.length>0&&"c"!==t&&this.history.push(t),this.historyIndex=this.history.length,localStorage.setItem("terminalHistory",JSON.stringify(this.history.slice(Math.max(0,this.history.length-20),this.history.length)))}getHistory(t){(this.historyIndex>0||1===t)&&(this.historyIndex<this.history.length-1||-1===t)&&(this.historyIndex+=t),this.history.length>0&&(this.input.value=this.history[this.historyIndex]);const s=this.input.value.length;setTimeout((()=>{this.input.setSelectionRange(s,s),this.input.focus()}),0)}}var l=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};if("true"===localStorage.getItem("dev")){const r=new o;let n=localStorage.getItem("customVal");null!==n&&p([n]),(0,e.B)(r.input,"keydown",(t=>{"Enter"===t.key&&v(r.parseInput()),"ArrowUp"===t.key&&r.getHistory(-1),"ArrowDown"===t.key&&r.getHistory(1)}));let u={x:0,y:0},c=null;function v(t){return l(this,void 0,void 0,(function*(){const s=(t=t.slice(Math.max(0,t.split("").findIndex((t=>" "!==t))),t.length)).split("").findIndex((t=>" "===t)),[i,e]=[-1===s?t:t.slice(0,s),-1===s?[""]:t.slice(s+1,t.length).replace(/ /g,"").split(",")];try{switch(i){case"c":case"clear":m(e[0]);break;case"r":case"rs":case"resize":b(e);case"sim":d(e);break;case"v":case"val":case"value":p(e);break;case"":break;default:r.writeLine(`Function name "${i}" does not exist.`)}}catch(t){r.writeLine(`<r>Error:</r> ${t}`)}}))}function m(t){const s=["a","all"].findIndex((s=>s===t))>-1;r.clearTerminal(),s&&console.clear()}function b(t){var s;if(""===t[0]&&1===t.length)throw"At least one parameter is required.";const i=parseFloat(t[0]),e=parseFloat(t[1]),h="d"===t[0]?{width:"700px",height:"400px"}:JSON.parse(null!==(s=localStorage.getItem("terminalSize"))&&void 0!==s?s:'{"width": "700px", "height":"400px"}');isNaN(i)||(h.width=`${i<5?r.terminal_element.clientWidth*i:i}px`),isNaN(e)||(h.height=`${e<5?r.terminal_element.clientHeight*e:e}px`),r.terminal_element.style.width=h.width,r.terminal_element.style.height=h.height,localStorage.setItem("terminalSize",JSON.stringify(h)),r.writeLine(`Resized terminal to <g>${h.width}</g> | <g>${h.height}</g>.`)}function p(t){let s=t.join(",");"g"===s?r.writeLine(`Value of global.customVal is <g>${JSON.stringify(h.C.customVal)}</g>.`):(h.C.customVal=JSON.parse(s),localStorage.setItem("customVal",s),r.writeLine(`Sucsessfully set global.customVal to <g>${s}</g>.`))}function d(t){return l(this,void 0,void 0,(function*(){let s=performance.now();const i=function(t){if(t.length<3)throw"At least 3 parameters [strat, sigma, start rho] required.";const s={theory:"",strat:"",sigma:"",rho:"",cap:"",mode:"Single sim",modeInput:"",simAllInputs:[!0,!0],timeDiffInputs:[],hardCap:!1},i=(t=t.map((t=>t.replace(/ /g,""))))[0].slice(0,2),e=t[0].slice(2,t[0].length);if(-1!==["bo","ba","bs","bi"].findIndex((t=>t===i)))switch(s.theory=/[1-8]/.test(e)?a.Jp[parseInt(e)-1]:e.toUpperCase(),i.toLowerCase()){case"bo":s.strat="Best Overall";break;case"ba":s.strat="Best Active";break;case"bs":s.strat="best Semi-Idle";break;case"bi":s.strat="Best Idle"}else{let i=-1;for(let e=0;e<a.Jp.length;e++)new RegExp(a.Jp[e]).test(t[0].toUpperCase())&&(s.theory=a.Jp[e],i=e);for(let e=0;e<a.S3[i].length;e++)t[0].toLowerCase()===a.S3[i][e].toLowerCase()&&(s.strat=a.S3[i][e])}if(s.sigma=t[1],/[+=]/.test(t[2])){const i=t[2].split("+=");s.rho=i[0],s.modeInput=i[1],s.mode="Steps"}else s.rho=t[2];return t.length>3&&0!==t[3].length&&(s.cap=t[3],s.mode="Single sim"===s.mode?"Chain":s.mode),s}(t);yield(0,e._v)();let o=yield(0,h.m)(i);h.C.simulating=!1,"string"==typeof o||null===o?(r.writeLine(JSON.stringify(o)),console.error(o)):(f(o,i),r.writeLine(`Sim finished sucsessfully in <g>${((performance.now()-s)/1e3).toFixed(3)}s</g>.`))}))}function f(t,s){if("Single sim"===s.mode)r.writeLine(`${t[0][1]} | ${t[0][2]} | ${t[0][3]} | ${t[0][5]} | ${t[0][6]} | ${t[0][7]} | ${t[0][8]}`);else if("Chain"===s.mode){const i=t.length-1;r.writeLine(`${s.strat} | ${s.sigma} | ${s.rho} --\x3e ${t[i-2][3]} | ${t[i][4]} | ${t[i][7]} | ${t[i][8]}`)}else if("Steps"===s.mode){let s="";for(let i=0;i<t.length;i++)s+=t[i][7]+"\n";navigator.clipboard.writeText(s),r.writeLine(`Copied ${t.length} tau/h values to clipboard.`)}w(t)}function w(t){(0,e.qs)(".simTable");let s=(0,e.qs)(".simTable > thead"),i=(0,e.qs)(".simTable > tbody");for(;i.firstChild;)i.firstChild.remove();for(let e=0;e<t.length;e++){const h=document.createElement("tr");for(let i=0;i<s.children[0].children.length;i++){const s=document.createElement("td");s.innerHTML=String(t[e][i]),h.appendChild(s)}i.appendChild(h)}}(0,e.B)(r.terminal_element,"mousedown",(t=>{t.target.classList.contains("terminal")&&(c=r.terminal_element,u.x=t.layerX,u.y=t.layerY)})),(0,e.B)(r.terminal_element,"mouseup",(()=>{c=null})),(0,e.B)(document.documentElement,"mousemove",(t=>{null!==c&&(c.style.left=t.clientX-u.x+"px",c.style.top=t.clientY-u.y+"px",localStorage.setItem("terminalPos",JSON.stringify({top:t.clientY-u.y+"px",left:t.clientX-u.x+"px"})))}))}},301:(t,s,i)=>{i.d(s,{C:()=>L,m:()=>F});var e=i(297),h=i(434);class a{constructor(t){var s,i,e,h;this.lvl=null!==(s=t.lvl)&&void 0!==s?s:0,this.costData=t.cost,this.cost=this.costData.getCost(this.lvl),this.value="number"==typeof t.value||"string"==typeof t.value?o(String(t.value)):0,this.stepwisePowerSum=!0===(null===(i=t.stepwisePowerSum)||void 0===i?void 0:i.default)?{base:2,length:10}:"number"==typeof(null===(e=t.stepwisePowerSum)||void 0===e?void 0:e.base)&&"number"==typeof(null===(h=t.stepwisePowerSum)||void 0===h?void 0:h.length)?{base:t.stepwisePowerSum.base,length:t.stepwisePowerSum.length}:{base:0,length:0},this.varBase=t.varBase?t.varBase:10,this.firstFreeCost=!0===t.firstFreeCost?1:0,t.firstFreeCost&&this.buy()}buy(){0!==this.stepwisePowerSum.base?this.value=this.value===h.xE?Math.log10(this.stepwisePowerSum.base)*Math.floor(this.lvl/this.stepwisePowerSum.length):(0,h.IH)(this.value,Math.log10(this.stepwisePowerSum.base)*Math.floor(this.lvl/this.stepwisePowerSum.length)):this.value=Math.log10(this.varBase)*(this.lvl+1),this.lvl++,this.cost=this.costData.getCost(this.lvl-this.firstFreeCost)}reCalculate(){if(0!==this.stepwisePowerSum.base){let t=Math.floor(this.lvl/this.stepwisePowerSum.length),s=this.lvl-t*this.stepwisePowerSum.length,i=this.stepwisePowerSum.length/(this.stepwisePowerSum.base-1);this.value=(0,h.$X)(Math.log10(i+s)+Math.log10(this.stepwisePowerSum.base)*t,Math.log10(i))}else this.value=Math.log10(this.varBase)*this.lvl}}function o(t){if("Infinity"===t)throw"Variable value reached Infinity";return"0"===t?h.xE:/[e]/.test(t)?(0,h.mv)(t):Math.log10(Number(t))}class l{constructor(t,s,i=!1){this.cost=o(String(t)),this.costInc=o(String(s)),i&&(this.costInc=Math.log10(2)*Math.pow(10,this.costInc))}getCost(t){return this.cost+this.costInc*t}}var r=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class n{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T1",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.variables=[new a({cost:new l(5,2),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(100,10),varBase:2}),new a({cost:new l(15,2),stepwisePowerSum:{default:!0}}),new a({cost:new l(3e3,10),varBase:2}),new a({cost:new l(1e4,4.5*Math.log2(10),!0),varBase:10}),new a({cost:new l(1e10,8*Math.log2(10),!0),varBase:10})],this.term1=0,this.term2=0,this.term3=0,this.termRatio=0,this.c3Ratio=this.lastPub<300?1:this.lastPub<450?1.1:this.lastPub<550?2:this.lastPub<655?5:10,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...new Array(6).fill(!0)],[!0,!0,!1,!1,!0,!0],[!0,!0,!1,!1,!1,!0],[()=>this.variables[0].cost+1<this.rho,()=>this.variables[1].cost+(0,h.wp)(1.11)<this.rho,()=>this.variables[2].cost+this.termRatio+1<=this.rho,()=>this.variables[3].cost+this.termRatio<=this.rho,()=>this.variables[4].cost+(0,h.wp)(this.c3Ratio)<this.rho,!0],[()=>this.variables[0].cost+(0,h.wp)(5)<=this.rho&&this.variables[0].cost+(0,h.wp)(6+this.variables[0].lvl%10)<=this.variables[1].cost&&this.variables[0].cost+(0,h.wp)(15+this.variables[0].lvl%10)<(this.milestones[3]>0?this.variables[5].cost:1e3),()=>this.variables[1].cost+(0,h.wp)(1.11)<this.rho,()=>this.variables[2].cost+this.termRatio+1<=this.rho,()=>this.variables[3].cost+this.termRatio<=this.rho,()=>this.variables[4].cost+(0,h.wp)(this.c3Ratio)<this.rho,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[2]>0,()=>this.milestones[3]>0]}getMilestoneTree(){return[...new Array(5).fill([[0,0,0,0],[0,0,1,0],[0,0,1,1],[1,0,1,1],[1,1,1,1],[1,2,1,1],[1,3,1,1]])]}getTotMult(t){return Math.max(0,.164*t-(0,h.wp)(3))+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return r(this,void 0,void 0,(function*(){let t=8*Math.ceil((this.lastPub-10)/8)+10,s=t-this.lastPub<3?t+2:t-this.lastPub<5?t-2+Math.log10(1.5):t-4+Math.log10(1.4),i=(t-this.lastPub<3?t:Math.floor(this.lastPub))+Math.log10(30);i=Math.max(8+Math.log10(30),i+Math.floor(s-i));let e=!1;for(;!e&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<176&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),(4!==this.stratIndex||this.rho<i||L.forcedPubTime!==1/0)&&this.buyVariables(),e=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:4===this.stratIndex?this.pubRho>s:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let a=(0,h.xo)(this,L.forcedPubTime===1/0&&4===this.stratIndex?` ${this.lastPub<50?"":(0,h.Ti)(Math.min(this.pubRho,i),2)}`:"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([a[7],this.boughtVars]),a}))}tick(){this.term1=this.variables[2].value*(1+.05*this.milestones[1])+this.variables[3].value+(this.milestones[0]>0?(0,h.wp)(1+this.rho/Math.LOG10E/100):0),this.term2=(0,h.IH)(this.variables[4].value+.2*this.rho,this.variables[5].value+.3*this.rho),this.term3=this.variables[0].value+this.variables[1].value;let t=(0,h.IH)(this.term1,this.term2)+this.term3+this.totMult+(0,h.wp)(this.dt);this.rho=(0,h.IH)(this.rho,t),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||L.forcedPubTime!==1/0||4===this.stratIndex)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&(2!==s&&3!==s||this.lastPub<350)){let t=["q1","q2","c1","c2","c3","c4"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[s].cost),this.variables[s].buy(),t=!0}t&&(this.termRatio=Math.max((0,h.wp)(5),(this.term2-this.term1)*Number(this.milestones[3]>0)))}}var u=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class c{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T2",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q1=0,this.q2=0,this.q3=0,this.q4=0,this.r1=0,this.r2=0,this.r3=0,this.r4=0,this.variables=[new a({cost:new l(10,2),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(5e3,2),stepwisePowerSum:{default:!0}}),new a({cost:new l(3e25,3),stepwisePowerSum:{default:!0}}),new a({cost:new l(8e50,4),stepwisePowerSum:{default:!0}}),new a({cost:new l(2e6,2),stepwisePowerSum:{default:!0}}),new a({cost:new l(3e9,2),stepwisePowerSum:{default:!0}}),new a({cost:new l(4e25,3),stepwisePowerSum:{default:!0}}),new a({cost:new l(5e50,4),stepwisePowerSum:{default:!0}})],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(8).fill(!0),[()=>this.curMult<4650,()=>this.curMult<2900,()=>this.curMult<2250,()=>this.curMult<1150,()=>this.curMult<4650,()=>this.curMult<2900,()=>this.curMult<2250,()=>this.curMult<1150],new Array(8).fill(!0),new Array(8).fill(!0)];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>1,()=>!0,()=>!0,()=>this.milestones[1]>0,()=>this.milestones[1]>1]}getMilestoneTree(){return[...new Array(4).fill([[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,1,0,0],[2,2,0,0],[2,2,1,0],[2,2,2,0],[2,2,3,0],[2,2,3,1],[2,2,3,2],[2,2,3,3]])]}getTotMult(t){return Math.max(0,.198*t-(0,h.wp)(100))+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){let t=Math.min(10,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=[0,0,0,0];let s=[];if(this.stratIndex<2&&(s=[1,2,3,4]),2===this.stratIndex){let t=this.t%100;t<10?s=[3,4,1,2]:t<50?s=[1,2,3,4]:t<60?s=[3,4,1,2]:t<100&&(s=[2,1,3,4])}if(3===this.stratIndex){let t=1/0;this.lastPub>0&&(t=10),this.lastPub>75&&(t=200),this.lastPub>100&&(t=200),this.lastPub>125&&(t=200),this.lastPub>150&&(t=600),this.lastPub>200&&(t=100),this.lastPub>225&&(t=25),s=this.curMult<t?[1,2,3,4]:[3,4,1,2]}const i=[2,2,3,3];for(let e=0;e<s.length;e++)for(;this.milestones[s[e]-1]<i[s[e]-1]&&t>0;)this.milestones[s[e]-1]++,t--}simulate(){return u(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<250&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>15,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=(0,h.wp)(this.dt);this.q1=(0,h.IH)(this.q1,this.variables[0].value+this.q2+t),this.q2=(0,h.IH)(this.q2,this.variables[1].value+this.q3+t),this.q3=this.milestones[0]>0?(0,h.IH)(this.q3,this.variables[2].value+this.q4+t):this.q3,this.q4=this.milestones[0]>1?(0,h.IH)(this.q4,this.variables[3].value+t):this.q4,this.r1=(0,h.IH)(this.r1,this.variables[4].value+this.r2+t),this.r2=(0,h.IH)(this.r2,this.variables[5].value+this.r3+t),this.r3=this.milestones[1]>0?(0,h.IH)(this.r3,this.variables[6].value+this.r4+t):this.r3,this.r4=this.milestones[1]>1?(0,h.IH)(this.r4,this.variables[7].value+t):this.r4;let s=this.q1*(1+.05*this.milestones[2])+this.r1*(1+.05*this.milestones[3])+this.totMult+t;this.rho=(0,h.IH)(this.rho,s),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<15||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["q1","q2","q3","q4","r1","r2","r3","r4"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[t].cost),this.variables[t].buy()}}}var v=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class m{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T3",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.currencies=[0,0,0],this.maxRho=0,this.variables=[new a({cost:new l(10,1.18099),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(10,1.308),stepwisePowerSum:{default:!0}}),new a({cost:new l(3e3,1.675),stepwisePowerSum:{default:!0}}),new a({cost:new l(20,6.3496),varBase:2}),new a({cost:new l(10,2.74),varBase:2}),new a({cost:new l(1e3,1.965),varBase:2}),new a({cost:new l(500,18.8343),varBase:2}),new a({cost:new l(1e5,3.65),varBase:2}),new a({cost:new l(1e5,2.27),varBase:2}),new a({cost:new l(1e4,1248.27),varBase:2}),new a({cost:new l(1e3,6.81744),varBase:2}),new a({cost:new l(1e5,2.98),varBase:2})],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[new Array(12).fill(!0),[!0,!0,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!1,!0,!1,!1,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1],[!1,!0,!0,!1,!0,!1,!1,!0,!0,!1,!0,!1],[()=>this.curMult<1,!0,!0,!1,()=>!(this.curMult<1)||this.variables[4].cost+2<this.currencies[0],!1,!1,!0,!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1],[()=>this.curMult<1&&this.variables[0].cost+1<this.currencies[0],()=>this.variables[1].cost+(0,h.wp)(3)<this.currencies[1],()=>this.variables[2].cost+(0,h.wp)(5)<this.currencies[2],!1,()=>!(this.curMult<1)||this.variables[4].cost+2<this.currencies[0],!1,!1,()=>this.curMult<1||this.variables[7].cost+(0,h.wp)(8)<this.currencies[1],!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1&&this.variables[11].cost+1<this.currencies[2]],[()=>this.variables[0].cost+(0,h.wp)(7)<Math.min(this.variables[3].cost,this.variables[6].cost),()=>this.variables[1].cost+(0,h.wp)(7)<this.variables[4].cost,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1],[()=>this.variables[0].cost+(0,h.wp)(8)<this.variables[9].cost,()=>this.variables[1].cost+(0,h.wp)(5)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+(0,h.wp)(8)<this.variables[8].cost,!1,!0,!1,!1,!0,!0,!0,!0,!1],[()=>this.variables[0].cost+(0,h.wp)(10)<Math.min(this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+(0,h.wp)(4)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+(0,h.wp)(10)<this.variables[8].cost,!1,!0,!1,!0,!0,!0,!0,!0,!1],[()=>this.variables[0].cost+(0,h.wp)(8)<Math.min(this.variables[3].cost,this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+(0,h.wp)(5)<Math.min(this.variables[4].cost,this.variables[7].cost),()=>this.variables[2].cost+(0,h.wp)(8)<this.variables[8].cost,!0,!0,!1,!0,!0,!0,!0,!1,!1],[()=>this.variables[0].cost+(0,h.wp)(10)<Math.min(this.variables[3].cost,this.variables[6].cost,this.variables[9].cost),()=>this.variables[1].cost+(0,h.wp)(4)<Math.min(this.variables[4].cost,this.variables[7].cost,this.variables[10].cost),()=>this.variables[2].cost+(0,h.wp)(10)<this.variables[8].cost,!0,!0,!1,!0,!0,!0,!0,!0,!1],[()=>this.curMult<2&&this.variables[0].cost+(0,h.wp)(8)<this.variables[9].cost,()=>!(this.curMult<2)||this.variables[1].cost+(0,h.wp)(4)<Math.min(this.variables[4].cost,this.variables[10].cost)&&this.variables[1].cost+(0,h.wp)(2)<this.variables[7].cost,()=>this.variables[2].cost+(0,h.wp)(8)<this.variables[8].cost&&this.variables[2].cost+(0,h.wp)(2)<this.variables[11].cost,!1,!0,!1,!1,()=>!(this.curMult<2)||this.variables[7].cost+(0,h.wp)(2)<Math.min(this.variables[4].cost,this.variables[10].cost),!0,()=>this.curMult<2,!0,()=>this.variables[11].cost+(0,h.wp)(4)<this.variables[8].cost],[()=>this.lastPub-this.maxRho>1&&this.variables[0].cost+(0,h.wp)(8)<this.variables[9].cost,()=>(this.curMult<1.2?this.variables[1].cost+(0,h.wp)(5)<this.variables[10].cost:this.variables[1].cost+(0,h.wp)(8)<this.variables[4].cost)||this.curMult>2.4,()=>!(this.curMult<2.4)||this.variables[2].cost+(0,h.wp)(8)<this.variables[8].cost,!1,()=>!(this.curMult<1.2)||this.variables[4].cost+2<this.variables[10].cost,!1,!1,()=>this.curMult<1.2?this.variables[7].cost+(0,h.wp)(2.5)<this.variables[10].cost:this.variables[7].cost+(0,h.wp)(8)<this.variables[4].cost,!0,()=>this.lastPub-this.maxRho>1,()=>this.curMult<1.2||this.curMult<2.4&&this.variables[10].cost+(0,h.wp)(8)<this.variables[4].cost,()=>this.curMult<1.2&&this.variables[11].cost+(0,h.wp)(10)<this.variables[8].cost]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>this.milestones[0]>0]}getMilestoneTree(){return[...new Array(15).fill([[0,0,0,0],[0,1,0,0],[0,2,0,0],[0,2,1,0],[0,2,2,0],[1,2,2,0],[1,2,2,1],[1,2,2,2]])]}getTotMult(t){return Math.max(0,.147*t+(0,h.wp)(3))+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return v(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<175&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>9,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[1]),s=this.variables[1].value*(1+.05*this.milestones[2]),i=this.variables[2].value*(1+.05*this.milestones[3]),e=(0,h.IH)((0,h.IH)(this.variables[3].value+t,this.variables[4].value+s),this.variables[5].value+i);this.currencies[0]=(0,h.IH)(this.currencies[0],(0,h.wp)(this.dt)+this.totMult+e);let a=(0,h.IH)((0,h.IH)(this.variables[6].value+t,this.variables[7].value+s),this.variables[8].value+i);this.currencies[1]=(0,h.IH)(this.currencies[1],(0,h.wp)(this.dt)+this.totMult+a);let o=(0,h.IH)((0,h.IH)(this.variables[9].value+t,this.variables[10].value+s),this.variables[11].value+i);this.currencies[2]=this.milestones[0]>0?(0,h.IH)(this.currencies[2],(0,h.wp)(this.dt)+this.totMult+o):0,this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<9||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--){let s=t%3;for(;this.currencies[s]>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["b1","b2","b3","c11","c12","c13","c21","c22","c23","c31","c32","c33"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.currencies[s]=(0,h.$X)(this.currencies[s],this.variables[t].cost),this.variables[t].buy()}}}}var b=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class p{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T4",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,2]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.recursionValue=t.recursionValue,this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new a({cost:new l(5,1.305),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(20,3.75),varBase:2}),new a({cost:new l(2e3,2.468),varBase:2}),new a({cost:new l(1e4,4.85),varBase:3}),new a({cost:new l(1e8,12.5),varBase:5}),new a({cost:new l(1e10,58),varBase:10}),new a({cost:new l(1e3,100),stepwisePowerSum:{default:!0}}),new a({cost:new l(1e4,1e3),varBase:2})],this.variableSum=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...new Array(8).fill(!0)],[!0,!0,...new Array(6).fill(!1)],[!1,!1,!0,...new Array(3).fill(!1),!0,!0],[...new Array(3).fill(!1),!0,!1,!1,!0,!0],[...new Array(4).fill(!1),!0,!1,!0,!0],[...new Array(4).fill(!1),!0,!0,!0,!0],[()=>this.variables[0].cost+1<this.variables[1].cost,!0,!1,!1,!1,!1,!1,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost),!0,!0,!1,!1,!1,()=>this.variables[6].cost+1<this.variables[7].cost,!0],[()=>this.variables[0].cost+1<this.variables[1].cost&&this.maxRho<this.lastPub,()=>this.maxRho<this.lastPub,!1,!0,!0,!0,!0,!0],[()=>this.variables[0].cost+1<this.variables[1].cost&&this.maxRho<this.lastPub,()=>this.maxRho<this.lastPub,!0,!1,!0,!0,!0,!0],[...new Array(4).fill(!1),!0,!0,()=>this.variables[6].cost+1<this.variables[7].cost,!0],[!1,!1,()=>{var t;return this.variables[2].cost+.1<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)},...new Array(3).fill(!1),()=>{var t;return this.variables[6].cost+(0,h.wp)(10+this.variables[6].lvl%10)<=Math.min(this.variables[7].cost,this.variables[2].cost)&&this.variables[6].cost+(0,h.wp)(10+this.variables[6].lvl%10)+1<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)},()=>{var t;return this.variables[7].cost+.5<(null!==(t=this.recursionValue)&&void 0!==t?t:1/0)&&(this.curMult<1||this.variables[7].cost+(0,h.wp)(1.5)<=this.variables[2].cost)}]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>1,()=>this.milestones[0]>2,()=>!0,()=>!0]}getMilestoneTree(){return[[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,1,3]],[[0,0,0],[0,1,0]],[[0,0,0],[0,0,1],[0,0,2],[0,0,3]],[[0,0,0],[1,0,0],[1,0,1],[1,0,2],[1,0,3]],[[0,0,0],[1,0,0],[2,0,0],[2,0,1],[2,0,2],[2,0,3]],[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,3]],[[0,0,0],[0,1,0]],[[0,0,0],[0,1,0],[0,1,1],[0,1,2],[0,1,3]],[[0,0,0],[1,0,0],[1,0,1],[1,0,2],[1,0,3]],[[0,0,0],[0,1,0],[0,1,1],[0,1,2],[0,1,3],[1,1,3],[2,1,3],[3,1,3]],[[0,0,0],[1,0,0],[2,0,0],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,3]],[[0,0,0],[0,0,1],[0,0,2],[0,0,3]]]}getTotMult(t){return Math.max(0,.165*t-(0,h.wp)(4))+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));if(this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)],8===this.stratIndex){const s=[3,1,3];let i;this.milestones=[0,0,0],i=this.maxRho<this.lastPub?[2,3,1]:this.t%100<50?[3,1,2]:[1,3,2];let e=t;this.milestones=[0,0,0];for(let t=0;t<i.length;t++)for(;this.milestones[i[t]-1]<s[i[t]-1]&&e>0;)this.milestones[i[t]-1]++,e--}}simulate(t){return b(this,void 0,void 0,(function*(){if(null==this.recursionValue&&"T4C3d66"===this.strat&&L.forcedPubTime===1/0){t.recursionValue=Number.MAX_VALUE;let s=yield new p(t).simulate(t);this.recursionValue=s[9][0]}let s=!1;for(;!s&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<176&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),s=L.forcedPubTime!==1/0?this.t>L.forcedPubTime:(this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>9,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let i=(0,h.xo)(this,11===this.stratIndex?` q1:${this.variables[6].lvl} q2:${this.variables[7].lvl}`:"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([i[7],this.boughtVars]),i}))}tick(){let t=this.variables[6].value,s=this.variables[7].value,i=(0,h.wp)(2)*this.milestones[2]+t+s-(0,h.IH)(0,this.q);this.q=(0,h.IH)(this.q,i+(0,h.wp)(this.dt));let e=this.totMult+this.variableSum;this.rho=(0,h.IH)(this.rho,e+(0,h.wp)(this.dt)),this.t+=this.dt/1.5,this.dt*=11===this.stratIndex&&this.recursionValue===Number.MAX_VALUE?Math.min(1.3,10*this.ddt):this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<9||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["c1","c2","c3","c4","c5","c6","q1","q2"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[t].cost),this.variables[t].buy()}let t=this.variables[0].value*(1+.15*this.milestones[1]),s=this.variables[1].value;this.variableSum=t+s,this.variables[2].lvl>0&&(this.variableSum=(0,h.IH)(this.variableSum,this.variables[2].value+this.q)),this.variables[3].lvl>0&&(this.variableSum=(0,h.IH)(this.variableSum,this.variables[3].value+2*this.q)),this.variables[4].lvl>0&&(this.variableSum=(0,h.IH)(this.variableSum,this.variables[4].value+3*this.q)),this.variables[5].lvl>0&&(this.variableSum=(0,h.IH)(this.variableSum,this.variables[5].value+4*this.q))}}var d=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class f{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T5",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new a({cost:new l(10,1.61328),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(15,64),varBase:2}),new a({cost:new l(1e6,1.18099),value:1,stepwisePowerSum:{default:!0}}),new a({cost:new l(75,4.53725),varBase:2}),new a({cost:new l(1e3,88550700),varBase:2})],this.c2worth=!0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[!0,!0,()=>this.maxRho+(this.lastPub-200)/165<this.lastPub,()=>this.c2worth,!0],[()=>this.variables[0].cost+(0,h.wp)(3+this.variables[0].lvl%10)<=Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[4].cost:1e3),!0,()=>this.q+(0,h.wp)(1.5)<this.variables[3].value+this.variables[4].value*(1+.05*this.milestones[2])||!this.c2worth,()=>this.c2worth,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getMilestoneTree(){return[...new Array(3).fill([[0,0,0],[0,1,0],[1,1,0],[2,1,0],[3,1,0],[3,1,1],[3,1,2]])]}getTotMult(t){return Math.max(0,.159*t)+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}calculateQ(t,s,i){let e=Math.log10(Math.E),a=-1/0;s+i>this.q?a=(0,h.$X)(s+i,this.q):s+i<this.q&&(a=(0,h.$X)(this.q,s+i));let o=s+i>=this.q?1:-1,l=0;return a>this.q?l=-Math.pow(10,s-t-i+o*Math.log10((a-this.q)/e)):a<this.q&&(l=Math.pow(10,s-t-i+o*Math.log10((this.q-a)/e))),s+i-Math.log10(1+1/Math.pow(Math.E,(l+this.dt)*Math.pow(10,t-s+i)))}simulate(){return d(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<150&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>7,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,1===this.stratIndex?" "+(0,h.Ti)(this.variables[2].cost,1):"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[0]),s=this.milestones[1]>0?this.variables[4].value*(1+.05*this.milestones[2]):0;this.q=this.calculateQ(this.variables[2].value,this.variables[3].value,s);let i=t+this.variables[1].value+this.q;this.rho=(0,h.IH)(this.rho,i+this.totMult+(0,h.wp)(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<7||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=0,s=this.milestones[1]>0?this.variables[4].value*(1+.05*this.milestones[2]):0,i=this.calculateQ(this.variables[2].value,this.variables[3].value,s);this.c2worth=i>=this.variables[3].value+s+(0,h.wp)(2/3);for(let e=this.variables.length-1;e>=0;e--)for(;this.rho>this.variables[e].cost&&this.conditions[this.stratIndex][e]()&&this.milestoneConditions[e]();){if(this.maxRho+5>this.lastPub){let t=["q1","q2","c1","c2","c3"];this.boughtVars.push({variable:t[e],level:this.variables[e].lvl+1,cost:this.variables[e].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[e].cost),this.variables[e].buy(),3===e&&(t++,i=this.calculateQ(this.variables[2].value,this.variables[3].value+(0,h.wp)(2)*t,s),this.c2worth=i>=this.variables[3].value+(0,h.wp)(2)*t+this.variables[4].value*(1+.05*this.milestones[2])+(0,h.wp)(2/3))}}}var w=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class g{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T6",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.r=0,this.variables=[new a({cost:new l(15,3),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(500,100),varBase:2}),new a({cost:new l(1e25,1e5),stepwisePowerSum:{default:!0}}),new a({cost:new l(1e30,1e10),varBase:2}),new a({cost:new l(10,2),value:1,stepwisePowerSum:{default:!0}}),new a({cost:new l(100,5),varBase:2}),new a({cost:new l(1e7,1.255),stepwisePowerSum:{default:!0}}),new a({cost:new l(1e25,5e5),varBase:2}),new a({cost:new l(15,3.9),varBase:2})],this.k=0,this.stopC12=[0,0,!0],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!1,!1,!0,!1,!1],[!0,!0,!0,!0,!1,!1,!1,!0,!1],[!0,!0,!0,!0,!0,!0,!1,!1,!0],[!0,!0,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!1,!1,!1,!0],[!0,!0,!0,!0,()=>this.stopC12[2],()=>this.stopC12[2],!1,!1,!0],[()=>this.variables[0].cost+(0,h.wp)(3)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[6].cost),!0,()=>this.variables[2].cost+(0,h.wp)(3)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[6].cost),!0,!1,!1,!0,!1,!1],[()=>this.variables[0].cost+(0,h.wp)(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[7].cost),!0,()=>this.variables[2].cost+(0,h.wp)(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[7].cost),!0,!1,!1,!1,!0,!1],[()=>this.variables[0].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[2].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[4].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,!1,!1,!0],[()=>this.variables[0].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,()=>this.variables[2].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,()=>this.variables[4].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[5].cost),!0,!1,!1,!1],[()=>this.variables[0].cost+(0,h.wp)(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,()=>this.variables[2].cost+(0,h.wp)(5)<Math.min(this.variables[1].cost,this.variables[3].cost,this.milestones[2]>0?this.variables[8].cost:1/0),!0,!1,!1,!1,!1,!0],[!1]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>this.milestones[0]>0,()=>this.milestones[0]>0,()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[2]>0]}getMilestoneTree(){return[...new Array(13).fill([[0,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,0],[1,0,0,3],[1,0,1,3],[1,1,1,3]])]}getTotMult(t){return Math.max(0,.196*t)-(0,h.wp)(50)+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(6,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}calculateIntegral(t,s,i,e,a){let o=t+s+this.q+this.r,l=i+2*this.q+this.r-(0,h.wp)(2),r=this.milestones[1]>0?e+3*this.q+this.r-(0,h.wp)(3):0,n=this.milestones[2]>0?a+this.q+2*this.r-(0,h.wp)(2):0;return this.k=n-o,this.totMult+(0,h.IH)(o,(0,h.IH)(l,(0,h.IH)(r,n)))}simulate(){return w(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<150&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>12,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"T6snax"===this.strat?" "+(0,h.Ti)(this.stopC12[0],1):"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=this.variables[4].value*(1+.05*this.milestones[3]),s=(0,h.$X)(this.calculateIntegral(t,this.variables[5].value,this.variables[6].value,this.variables[7].value,this.variables[8].value),this.rho);this.q=(0,h.IH)(this.q,this.variables[0].value+this.variables[1].value+(0,h.wp)(this.dt)),this.r=this.milestones[0]>0?(0,h.IH)(this.r,this.variables[2].value+this.variables[3].value+(0,h.wp)(this.dt)-3):0;let i=this.calculateIntegral(t,this.variables[5].value,this.variables[6].value,this.variables[7].value,this.variables[8].value);s=s>i?i:s,this.rho=Math.max(0,(0,h.$X)(i,s)),this.k>.3?this.stopC12[1]++:this.stopC12[1]=0,this.stopC12[1]>30&&this.stopC12[2]&&(this.stopC12[0]=this.maxRho,this.stopC12[2]=!1),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<12||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){if(12!==this.stratIndex)for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["q1","q2","r1","r2","c1","c2","c3","c4","c5"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[t].cost),this.variables[t].buy()}else for(;;){let t=this.variables.map((t=>t.cost)),s=[(0,h.wp)(7+this.variables[0].lvl%10),0,(0,h.wp)(5+this.variables[2].lvl%10),0,Math.max(0,this.k)+(0,h.wp)(8+this.variables[4].lvl%10),Math.max(0,this.k),1/0,1/0,-Math.min(0,this.k)],i=[Number.MAX_VALUE,-1];for(let e=this.variables.length-1;e>=0;e--)t[e]+s[e]<i[0]&&this.milestoneConditions[e]()&&(i=[t[e]+s[e],e]);if(!(-1!==i[1]&&t[i[1]]<this.rho))break;if(this.rho=(0,h.$X)(this.rho,this.variables[i[1]].cost),this.maxRho+5>this.lastPub){let t=["q1","q2","r1","r2","c1","c2","c3","c4","c5"];this.boughtVars.push({variable:t[i[1]],level:this.variables[i[1]].lvl+1,cost:this.variables[i[1]].cost,timeStamp:this.t})}this.variables[i[1]].buy()}}}var M=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class x{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T7",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.rho2=0,this.variables=[new a({cost:new l(500,1.51572),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(10,1.275),value:1,stepwisePowerSum:{default:!0}}),new a({cost:new l(40,8),varBase:2}),new a({cost:new l(1e5,63),varBase:2}),new a({cost:new l(10,2.82),varBase:2}),new a({cost:new l(1e8,60),varBase:2}),new a({cost:new l(100,2.81),varBase:2})],this.drho13=0,this.drho23=0,this.c2ratio=1/0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){this.lastPub>=100&&(this.c2ratio=100),this.lastPub>=175&&(this.c2ratio=10),this.lastPub>=250&&(this.c2ratio=20),this.lastPub>=275&&(this.c2ratio=50),this.lastPub>=300&&(this.c2ratio=1/0);let t=[[!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!1,!1,!1,!1],[!0,!1,!1,!0,!1,!1,!1],[!0,!1,!1,!0,!0,!0,!0],[!0,!1,!1,!1,!0,!0,!0],[!0,!1,!1,!1,!1,!0,!0],[()=>this.variables[0].cost+1<this.variables[2].cost,()=>this.variables[1].cost+(0,h.wp)(8)<this.variables[2].cost,!0,!1,!1,!1,!1],[()=>this.variables[0].cost+1<this.variables[3].cost,!1,!1,!0,!1,!1,!1],[()=>this.variables[0].cost+(0,h.wp)(4)<this.variables[6].cost,()=>this.variables[1].cost+(0,h.wp)(10+this.variables[2].lvl)<this.variables[2].cost,()=>this.variables[2].cost+(0,h.wp)(this.c2ratio)<this.variables[6].cost,()=>this.variables[3].cost+1<this.variables[6].cost,()=>this.variables[4].cost+1<this.variables[6].cost,()=>this.variables[5].cost+(0,h.wp)(4)<this.variables[6].cost,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0,()=>this.milestones[0]>0,()=>this.milestones[2]>0,()=>this.milestones[3]>0]}getMilestoneTree(){return[[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,2],[1,1,1,1,3]],[[0,0,0,0,0],[0,0,0,0,1],[0,0,0,0,2],[0,0,0,0,3]],[[0,0,0,0,0],[0,1,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]],[[0,0,0,0,0],[1,0,0,0,0],[1,0,1,0,0],[1,0,1,1,0]],[[0,0,0,0,0],[1,0,0,0,0],[1,0,1,0,0],[1,0,1,1,0]],[[0,0,0,0,0],[0,0,0,0,1],[0,0,0,0,2],[0,0,0,0,3]],[[0,0,0,0,0],[0,1,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,2],[1,1,1,1,3]]]}getTotMult(t){return Math.max(0,.152*t)+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(7,Math.floor(Math.max(this.lastPub,this.maxRho)/25));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}simulate(){return M(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<175&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"T7PlaySpqcey"===this.strat&&this.c2ratio!==1/0?this.c2ratio.toString():"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=this.variables[1].value*(1+.05*this.milestones[4])+this.variables[2].value,s=this.milestones[1]>0?(0,h.wp)(1.5)+this.variables[3].value+this.rho/2:0,i=this.milestones[0]>0?this.variables[4].value:0,e=this.milestones[2]>0?(0,h.wp)(1.5)+this.variables[5].value+this.rho2/2:0;this.drho13=this.milestones[3]>0?Math.min(this.drho13+2,Math.min((0,h.wp)(.5)+this.variables[6].value+this.rho2/2-this.rho/2,this.rho+2)):0,this.drho23=this.milestones[3]>0?Math.min(this.drho23+2,Math.min((0,h.wp)(.5)+this.variables[6].value+this.rho/2-this.rho2/2,this.rho2+2)):0;let a=(0,h.wp)(this.dt)+this.variables[0].value+this.totMult;this.rho=(0,h.IH)(this.rho,a+(0,h.IH)((0,h.IH)(t,s),this.drho13)),this.rho2=(0,h.IH)(this.rho2,a+(0,h.IH)((0,h.IH)(i,e),this.drho23)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["q1","c1","c2","c3","c4","c5","c6"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[t].cost),this.variables[t].buy()}}}var y=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class T{constructor(t){var s;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="T8",this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.variables=[new a({cost:new l(10,1.5172),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(20,64),varBase:2}),new a({cost:new l(100,1.15*Math.log2(3),!0),varBase:3}),new a({cost:new l(100,1.15*Math.log2(5),!0),varBase:5}),new a({cost:new l(100,1.15*Math.log2(7),!0),varBase:7})],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.bounds=[[[0,-20,20],[0,-27,27],[24.5,1,48]],[[.5,-23,24],[1,-25,27],[20.5,1,40]],[[1,-20,22],[-1.5,-21,18],[8,0,37]]],this.defaultStates=[[-6,-8,26],[-10.6,-4.4,28.6],[-6,15,0]],this.dts=[.02,.002,14e-5],this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2],this.dx=0,this.dy=0,this.dz=0,this.msTimer=0,this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[!0,!0,!1,!0,!0],[!0,!0,!0,!0,!1],[!0,!0,!1,!0,!1],[()=>this.curMult<1.6,!0,()=>this.curMult<2.3,!0,()=>this.curMult<2.3],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!1,!0,!0],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!0,!0,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!1,!0,!1],[()=>this.variables[0].cost+1<Math.min(this.variables[1].cost,this.variables[3].cost),!0,!0,!0,!0],[()=>this.variables[0].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[2].cost+(0,h.wp)(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[4].cost+(0,h.wp)(4)<Math.min(this.variables[1].cost,this.variables[3].cost)],[()=>this.variables[0].cost+(0,h.wp)(8)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[2].cost+(0,h.wp)(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost),!0,()=>this.variables[4].cost+(0,h.wp)(2.5)<Math.min(this.variables[1].cost,this.variables[3].cost)]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>!0]}getMilestoneTree(){return[[[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,1,3,0],[2,2,3,0],[2,3,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0],[2,1,3,0],[2,2,3,0],[2,3,3,0]],[[0,0,0,0],[1,0,0,0],[2,0,0,0],[2,0,1,0],[2,0,2,0],[2,0,3,0]],...new Array(3).fill([[0,0,0,0],[1,0,0,0],[2,0,0,0],[0,0,0,3],[1,0,3,0],[2,0,3,0],[2,0,3,1],[2,0,3,2],[2,0,3,3],[2,1,3,3],[2,2,3,3],[2,3,3,3]])]}getTotMult(t){return Math.max(0,.15*t)+(0,h.wp)(Math.pow(this.sigma/20,this.sigma<65?0:this.sigma<75?1:this.sigma<85?2:3))}updateMilestones(){const t=Math.min(11,Math.floor(Math.max(this.lastPub,this.maxRho)/20));this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}dn(t=this.x,s=this.y,i=this.z){0===this.milestones[0]&&(this.dx=10*(s-t),this.dy=t*(28-i)-s,this.dz=t*s-8*i/3),1===this.milestones[0]&&(this.dx=40*(s-t)*10,this.dy=10*(-12*t-t*i+28*s),this.dz=10*(t*s-3*i)),2===this.milestones[0]&&(this.dx=500*(-s-i),this.dy=500*(t+.1*s),this.dz=500*(.1+i*(t-14)))}simulate(){return y(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<220&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>8,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){this.dn();let t=this.x+.5*this.dx*this.dts[this.milestones[0]],s=this.y+.5*this.dy*this.dts[this.milestones[0]],i=this.z+.5*this.dz*this.dts[this.milestones[0]];this.dn(t,s,i),this.x+=this.dx*this.dts[this.milestones[0]],this.y+=this.dy*this.dts[this.milestones[0]],this.z+=this.dz*this.dts[this.milestones[0]],this.dn();let e=5*(this.bounds[this.milestones[0]][0][1]-this.bounds[this.milestones[0]][0][0])+this.bounds[this.milestones[0]][0][0],a=5*(this.bounds[this.milestones[0]][0][2]-this.bounds[this.milestones[0]][0][0])+this.bounds[this.milestones[0]][0][0],o=5*(this.bounds[this.milestones[0]][1][1]-this.bounds[this.milestones[0]][1][0])+this.bounds[this.milestones[0]][1][0],l=5*(this.bounds[this.milestones[0]][1][2]-this.bounds[this.milestones[0]][1][0])+this.bounds[this.milestones[0]][1][0],r=5*(this.bounds[this.milestones[0]][2][1]-this.bounds[this.milestones[0]][2][0])+this.bounds[this.milestones[0]][2][0],n=5*(this.bounds[this.milestones[0]][2][2]-this.bounds[this.milestones[0]][2][0])+this.bounds[this.milestones[0]][2][0];(this.x<e||this.x>a||this.y<o||this.y>l||this.z<r||this.z>n)&&(this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2]),this.dn(),this.msTimer++,335==this.msTimer&&10===this.stratIndex&&(this.x=this.defaultStates[this.milestones[0]][0],this.y=this.defaultStates[this.milestones[0]][1],this.z=this.defaultStates[this.milestones[0]][2],this.msTimer=0);let u=this.variables[2].value*(1+.05*this.milestones[1]),c=this.variables[3].value*(1+.05*this.milestones[2]),v=this.variables[4].value*(1+.05*this.milestones[3]),m=u+(0,h.wp)(this.dx*this.dx),b=c+(0,h.wp)(this.dy*this.dy),p=v+(0,h.wp)(this.dz*this.dz),d=(0,h.wp)(this.dt)+this.totMult+this.variables[0].value+this.variables[1].value+(0,h.IH)((0,h.IH)(m,b),p)/2-2;this.rho=(0,h.IH)(this.rho,d),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["c1","c2","c3","c4","c5"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[t].cost),this.variables[t].buy()}}}var I=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class C{constructor(t){var s;this.srK_helper=t=>{let s=t*t;return Math.log(s+1/6+1/120/s+1/810/s/s)/2-1},this.sineRatioK=(t,s,i=5)=>{if(t<1||s>=t+1)return 0;let e=t+1+i,h=s*s,a=this.srK_helper(e+s),o=this.srK_helper(e-s),l=e*(a+o-2*this.srK_helper(e))+s*(a-o)-Math.log(1-h/e/e)/2;for(let s=t+1;s<e;++s)l-=Math.log(1-h/s/s);return Math.LOG10E*l},this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="WSP",this.tauFactor=(0,h.IJ)(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.variables=[new a({cost:new l(10,.845,!0),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(1e3,10.14,!0),varBase:2}),new a({cost:new l(20,3.38,!0)}),new a({cost:new l(50,3.38/1.5,!0),stepwisePowerSum:{base:2,length:50}}),new a({cost:new l(1e10,33.8,!0),varBase:2})],this.S=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=0;this.lastPub>=25&&(t=(0,h.wp)(3)),this.lastPub>=40&&(t=1),this.lastPub>=200&&(t=(0,h.wp)(50)),this.lastPub>=400&&(t=3),this.lastPub>=700&&(t=1e4);let s=[[!0,!0,!0,!0,!0],[!0,!0,!0,()=>this.lastPub<450||this.t<15,!0],[()=>this.variables[0].cost+(0,h.wp)(8+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[2].cost,this.milestones[1]>0?this.variables[4].cost:1/0),!0,!0,()=>this.variables[3].cost+t<Math.min(this.variables[1].cost,this.variables[2].cost,this.milestones[1]>0?this.variables[4].cost:1/0)||this.t<15,!0]];return s=s.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),s}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getMilestoneTree(){return[...new Array(3).fill([[0,0,0],[0,0,1],[0,0,2],[0,0,3],[0,1,3],[1,1,3],[2,1,3],[3,1,3],[4,1,3]])]}getTotMult(t){return Math.max(0,t*this.tauFactor*1.5)}updateMilestones(){let t=0,s=[10,25,40,55,70,100,140,200];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)]}updateS(){let t=(0,h.wp)(this.variables[2].value),s=this.variables[3].value,i=Math.pow(10,(0,h.wp)(Math.PI)+s+t-(0,h.IH)(s,t-(0,h.wp)(3)*this.milestones[2]))+1;this.S=this.sineRatioK(this.variables[2].value,i/Math.PI)}simulate(){return I(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<200&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>8,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=this.variables[0].value*(1+.01*this.milestones[0]),s=Math.max(0,(0,h.wp)(this.dt)+this.S+this.variables[4].value);this.q=(0,h.IH)(this.q,s);let i=this.totMult+t+this.variables[1].value+this.q+(0,h.wp)(this.dt);this.rho=(0,h.IH)(this.rho,i),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<8||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.rho=(0,h.$X)(this.rho,this.variables[s].cost),this.maxRho+5>this.lastPub){let t=["q1","q2","n","c1","c2"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.variables[s].buy(),2!==s&&4!==s||(t=!0)}t&&this.updateS()}}var S=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class B{constructor(t){var s;this.updateInverseE_Gamma=t=>{let s=(0,h.wp)((0,h.wp)(2)/Math.LOG10E+t/Math.LOG10E+(0,h.wp)(Math.PI)/Math.LOG10E)-((0,h.wp)(2)+t);this.inverseE_Gamma=0-Math.LOG10E-(0,h.IH)((0,h.$X)(s,s+s-(0,h.wp)(2)),s+s+s+(0,h.wp)(6))},this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="SL",this.tauFactor=(0,h.IJ)(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.rho2=0,this.rho3=0,this.q=0,this.variables=[new a({cost:new l(1,.369*Math.log2(10),!0),stepwisePowerSum:{base:3.5,length:3},firstFreeCost:!0}),new a({cost:new l(175,10),varBase:2}),new a({cost:new l(500,.649*Math.log2(10),!0),stepwisePowerSum:{base:6.5,length:4}}),new a({cost:new l(1e3,.926*Math.log2(10),!0),varBase:2})],this.inverseE_Gamma=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0],[()=>this.curMult<4.5,()=>this.curMult<4.5,()=>this.curMult<6,()=>this.curMult<6],[()=>this.curMult<4.5&&this.variables[0].cost+(0,h.wp)(this.variables[0].lvl%3*2+1e-4)<this.variables[1].cost,()=>this.curMult<4.5,()=>this.curMult<6&&this.variables[2].cost+(0,h.wp)(this.variables[2].cost%4)<this.variables[3].cost,()=>this.curMult<6],[()=>this.curMult<4,()=>this.curMult<4,()=>this.curMult<7.5,()=>this.curMult<7.5],[()=>this.curMult<4&&this.variables[0].cost+(0,h.wp)(this.variables[0].lvl%3*2+1e-4)<this.variables[1].cost,()=>this.curMult<4,()=>this.curMult<7.5&&this.variables[2].cost+(0,h.wp)(this.variables[2].cost%4)<this.variables[3].cost,()=>this.curMult<7.5]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0]}getTotMult(t){return Math.max(0,t*this.tauFactor*1.5)}updateMilestones(){let t=Math.max(this.lastPub,this.maxRho),s=Math.min(13,Math.floor(t/25));this.milestones=[0,0,0,0];let i=[4,3,1,2];if(this.stratIndex>2&&t>=25&&t<=300){let s=5,e=4;t<50?(s=5,e=4):t<75?(s=7,e=6):t<100?(s=12,e=10):t<150?(s=20,e=15):t<175?(s=8,e=6):t<200?(s=1.5,e=1):t<275?(s=3,e=3):t<300&&(s=2,e=2);let a=Math.min(this.variables[2].cost,this.variables[3].cost);this.rho+(0,h.wp)(s)<a?i=[4,3,1,2]:this.curMult>4.5||this.rho+(0,h.wp)(e)>a?i=[1,2,4,3]:this.rho+(0,h.wp)(s)>a&&this.rho+(0,h.wp)(e)<a&&(i=[2,1,4,3])}const e=[3,5,2,2];for(let t=0;t<i.length;t++)for(;this.milestones[i[t]-1]<e[i[t]-1]&&s>0;)this.milestones[i[t]-1]++,s--}simulate(){return S(this,void 0,void 0,(function*(){let t=!1;for(;!t&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.lastPub<300&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),t=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.curMult>15)&&this.pubRho>10,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let s=(0,h.xo)(this,"");for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();return L.varBuy.push([s[7],this.boughtVars]),s}))}tick(){let t=this.variables[2].value*(1+.02*this.milestones[2])+this.variables[3].value*(1+.02*this.milestones[3]);this.rho3=(0,h.IH)(this.rho3,t+(0,h.wp)(this.dt)),this.updateInverseE_Gamma(Math.max(1,this.rho3));let s=Math.LOG10E*(this.variables[0].value/Math.LOG10E+this.variables[1].value/Math.LOG10E-Math.log(2-.008*this.milestones[1])*(Math.max(1,this.rho3)/Math.LOG10E));this.rho2=(0,h.IH)(this.rho2,Math.max(0,s)+(0,h.wp)(this.dt));let i=this.rho2*(1+.02*this.milestones[0])*.5+this.inverseE_Gamma;this.rho=(0,h.IH)(this.rho,i+this.totMult+(0,h.wp)(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){for(let t=this.variables.length-1;t>=0;t--)for(;this.rho>this.variables[t].cost&&this.conditions[this.stratIndex][t]()&&this.milestoneConditions[t]();){if(this.maxRho+5>this.lastPub){let s=["a1","a2","b1","b2"];this.boughtVars.push({variable:s[t],level:this.variables[t].lvl+1,cost:this.variables[t].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[t].cost),this.variables[t].buy()}}}var P=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};function R(t){return P(this,void 0,void 0,(function*(){let s=new q(t);return yield s.simulate(t)}))}class q{constructor(t){var s,i;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="EF",this.tauFactor=(0,h.IJ)(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.currencies=[0,0,0],this.maxRho=0,this.q=0,this.t_var=0,this.variables=[new a({cost:new l(1e6,1e6)}),new a({cost:new l(10,1.61328),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(5,60),varBase:2}),new a({cost:new l(20,200),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(100,2),varBase:1.1}),new a({cost:new l(20,200),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(100,2),varBase:1.1}),new a({cost:new l(2e3,2.2,!0),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(500,2.2,!0),value:1,stepwisePowerSum:{base:40,length:10}}),new a({cost:new l(500,2.2,!0),varBase:2})],this.recursionValue=null!==(i=t.recursionValue)&&void 0!==i?i:[1/0,0],this.lastA23=[0,0],this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0,0,0],this.nextMilestoneCost=1/0,this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.milestoneTree=this.getMilestoneTree(),this.updateMilestones()}getBuyingConditions(){let t=[[...new Array(10).fill(!0)],[!0,()=>this.curMult<1,!0,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1,()=>this.curMult<1||this.lastPub>150,!0,!0],[!0,()=>this.variables[1].cost+1<this.variables[2].cost,!0,!0,!0,!0,!0,()=>this.variables[6].cost+(0,h.wp)(2.5)<this.variables[2].cost,!0,!0],[!0,()=>this.variables[1].cost+(0,h.wp)(10+this.variables[1].lvl%10)<this.variables[2].cost&&this.variables[1].cost+(0,h.wp)(this.variables[1].lvl%10+5)<this.recursionValue[0],()=>this.variables[2].cost+.2<this.recursionValue[0],()=>this.variables[3].cost+(0,h.wp)(5)<this.variables[8].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[4].cost+(0,h.wp)(5)<this.variables[8].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[5].cost+(0,h.wp)(5)<this.variables[9].cost||this.milestones[1]<2||this.curMult<1,()=>this.variables[6].cost+(0,h.wp)(5)<this.variables[9].cost||this.milestones[1]<2||this.curMult<1,()=>(this.variables[7].cost+(0,h.wp)(4+this.variables[7].lvl%10/2)<this.variables[2].cost||this.variables[2].cost>this.recursionValue[0])&&this.variables[7].cost+(0,h.wp)(this.variables[7].lvl%10/3)<this.recursionValue[0],!0,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>this.variables[0].lvl<4&&this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.milestones[0]>0&&this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.milestones[0]>0&&this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.milestones[0]>1&&this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.milestones[0]>1&&this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.milestones[1]>0&&this.maxRho+(0,h.wp)(5)<this.nextMilestoneCost,()=>this.milestones[1]>1,()=>this.milestones[1]>2]}getMilestoneTree(){return[...new Array(4).fill([[0,0,0,0,0],[1,0,0,0,0],[2,0,0,0,0],[2,1,0,0,0],[2,2,0,0,0],[2,3,0,0,0],[2,3,1,0,0],[2,3,2,0,0],[2,3,3,0,0],[2,3,4,0,0],[2,3,5,0,0],[2,3,5,1,0],[2,3,5,2,0],[2,3,5,2,1],[2,3,5,2,2]])]}getTotMult(t){return Math.max(0,t*this.tauFactor*.387)}updateMilestones(){let t=0,s=[10,20,30,40,50,70,90,110,130,150,250,275,300,325];for(let i=0;i<s.length;i++)if(Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1),s[i]>Math.max(this.lastPub,this.maxRho)){this.nextMilestoneCost=s[i];break}Math.max(this.lastPub,this.maxRho)>325&&(this.nextMilestoneCost=1/0),this.milestones=this.milestoneTree[this.stratIndex][Math.min(this.milestoneTree[this.stratIndex].length-1,t)],this.variables[4].varBase!==1.1+.01*this.milestones[3]&&(this.variables[4].varBase=1.1+.01*this.milestones[3],this.variables[4].reCalculate()),this.variables[6].varBase!==1.1+.0125*this.milestones[4]&&(this.variables[6].varBase=1.1+.0125*this.milestones[4],this.variables[6].reCalculate())}evaluatePubConditions(){if(3!==this.stratIndex)return!1;let t=0,s=0,i=[10,20,30,40,50,70,90,110,130,150,250,275,300,325];for(let e=0;e<i.length;e++)Math.max(this.lastPub,this.maxRho)>=i[e]&&(t=e+1),this.lastPub>=i[e]&&(s=e+1);return this.lastPub<30&&this.maxRho>32.4||this.lastPub<40&&this.maxRho>42||this.lastPub<50&&this.maxRho>55||this.lastPub<70&&this.maxRho>72||this.lastPub<90&&this.maxRho>92||this.lastPub<110&&this.maxRho>113||this.lastPub<150&&this.maxRho>153||this.lastPub<130&&this.maxRho>134||this.lastPub<146&&this.lastPub>145&&this.curMult>2||this.lastPub<126&&this.lastPub>125&&this.curMult>2||this.lastPub<106&&this.lastPub>105&&this.curMult>3||this.lastPub<87&&this.lastPub>85&&this.curMult>3||this.lastPub<67&&this.lastPub>65&&this.curMult>3||this.lastPub<46.4&&this.lastPub>44.7&&this.curMult>3||this.lastPub<37&&this.lastPub>36&&this.curMult>3||this.lastPub<27&&this.lastPub>26&&this.curMult>3||this.lastPub<298.2&&this.maxRho>300||this.lastPub<323.2&&this.maxRho>325||t-s<1&&this.curMult>t-s+2.6&&this.recursionValue[1]<2&&3===this.stratIndex||2===this.recursionValue[1]&&this.pubRho>this.variables[7].cost+(0,h.wp)(4)&&this.variables[7].cost+(0,h.wp)(this.variables[7].lvl%10/3)>this.recursionValue[0]}forcedPubConditions(){return 3!==this.stratIndex||(this.lastPub<296||this.pubRho>300)&&(this.lastPub<321||this.pubRho>325)}evaluateTauHConditions(){return 3===this.stratIndex&&(this.lastPub<298.2&&this.lastPub>=296||this.lastPub>=321&&this.lastPub<323.2)}simulate(t){return P(this,void 0,void 0,(function*(){if(this.lastPub>=10&&null==t.recursionValue&&3===this.stratIndex){t.recursionValue=[1/0,0];let s=yield R(t);t.recursionValue=[s[9][0],1];let i=yield R(t);this.recursionValue=[i[9][0],2],this.recursionValue[0]>300&&this.recursionValue[0]<301&&(this.recursionValue[0]=299.2),this.recursionValue[0]>325&&this.recursionValue[0]<326&&(this.recursionValue[0]=324.2)}let s=!1;for(;!s&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.currencies[0]>this.maxRho&&(this.maxRho=this.currencies[0]),this.lastPub<325&&this.updateMilestones(),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),this.buyVariables(),s=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0]||this.evaluatePubConditions())&&this.pubRho>10&&this.forcedPubConditions(),this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let i=(0,h.xo)(this,3===this.stratIndex?` q1: ${this.variables[1].lvl} q2: ${this.variables[2].lvl} a1: ${this.variables[7].lvl}`+(L.showA23?` a2: ${this.lastA23[0]} a3: ${this.lastA23[1]}`:""):"");if(3!==this.stratIndex||2===this.recursionValue[1]){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();L.varBuy.push([i[7],this.boughtVars])}return i}))}tick(){let t=(0,h.wp)(this.dt)+this.totMult;this.q=(0,h.IH)(this.q,this.variables[1].value+this.variables[2].value+t),this.t_var+=this.dt*(this.variables[0].lvl/5+.2);let s=(this.variables[7].value+this.variables[8].value+this.variables[9].value)*(.1*this.milestones[2]+1),i=this.variables[3].value+this.variables[4].value,e=this.variables[5].value+this.variables[6].value,a=i+(0,h.wp)(Math.abs(Math.cos(this.t_var))),o=e+(0,h.wp)(Math.abs(Math.sin(this.t_var)));switch(this.currencies[1]=this.milestones[0]>0?(0,h.IH)(this.currencies[1],t+2*a):0,this.currencies[2]=this.milestones[0]>1?(0,h.IH)(this.currencies[2],t+2*o):0,this.milestones[0]){case 0:this.currencies[0]=(0,h.IH)(this.currencies[0],t+((0,h.wp)(this.t_var)+2*this.q)/2);break;case 1:this.currencies[0]=(0,h.IH)(this.currencies[0],t+(0,h.IH)((0,h.wp)(this.t_var)+2*this.q,2*this.currencies[1])/2);break;case 2:this.currencies[0]=(0,h.IH)(this.currencies[0],t+s+(0,h.IH)((0,h.IH)((0,h.wp)(this.t_var)+2*this.q,2*this.currencies[1]),2*this.currencies[2])/2)}this.t+=this.dt/1.5,this.dt*=3===this.stratIndex&&this.recursionValue[1]<2?Math.min(1.3,50*this.ddt):this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||L.forcedPubTime!==1/0||this.evaluateTauHConditions())&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho,this.lastA23=[this.variables[8].lvl,this.variables[9].lvl])}buyVariables(){let t=[0,0,0,1,1,2,2,0,1,2];for(let s=this.variables.length-1;s>=0;s--)for(;this.currencies[t[s]]>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub&&(3!==this.stratIndex||2===this.recursionValue[1])){let t=["t","q1","q2","b1","b2","c1","c2","a1","a2","a3"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.currencies[t[s]]=(0,h.$X)(this.currencies[t[s]],this.variables[s].cost),this.variables[s].buy()}}}var H=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};class V{constructor(t){var s,i;this.stratIndex=(0,h.cx)(t.strats,t.strat),this.strat=t.strat,this.theory="CSR2",this.tauFactor=(0,h.IJ)(this.theory),this.cap="number"==typeof t.cap&&t.cap>0?[t.cap,1]:[1/0,0],this.recovery=null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},this.lastPub=t.rho,this.sigma=t.sigma,this.totMult=this.getTotMult(t.rho),this.curMult=0,this.dt=L.dt,this.ddt=L.ddt,this.t=0,this.ticks=0,this.rho=0,this.maxRho=0,this.q=0,this.t_var=0,this.variables=[new a({cost:new l(10,5),stepwisePowerSum:{default:!0},firstFreeCost:!0}),new a({cost:new l(15,128),varBase:2}),new a({cost:new l(1e6,16),value:1,stepwisePowerSum:{default:!0}}),new a({cost:new l(50,Math.pow(2,3.346*Math.log2(256)))}),new a({cost:new l(1e3,Math.pow(10,5.65)),varBase:2})],this.recursionValue=null!==(i=t.recursionValue)&&void 0!==i?i:[1/0,0],this.bestCoast=[0,0],this.updateError_flag=!0,this.error=0,this.boughtVars=[],this.tauH=0,this.maxTauH=0,this.pubT=0,this.pubRho=0,this.milestones=[0,0,0],this.pubMulti=0,this.conditions=this.getBuyingConditions(),this.milestoneConditions=this.getMilestoneConditions(),this.updateMilestones()}getBuyingConditions(){let t=[[!0,!0,!0,!0,!0],[()=>this.variables[0].cost+(0,h.wp)(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),!0,()=>this.variables[2].cost+(0,h.wp)(15+this.variables[2].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),!0,!0],[()=>this.variables[0].cost+(0,h.wp)(7+this.variables[0].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),()=>this.variables[1].cost+(0,h.wp)(1.8)<this.variables[4].cost,()=>this.variables[2].cost+(0,h.wp)(15+this.variables[2].lvl%10)<Math.min(this.variables[1].cost,this.variables[3].cost,this.variables[4].cost),()=>this.variables[3].cost+(0,h.wp)(1.3)<this.variables[4].cost,!0]];return t=t.map((t=>t.map((t=>"function"==typeof t?t:()=>t)))),t}getMilestoneConditions(){return[()=>!0,()=>!0,()=>!0,()=>!0,()=>this.milestones[1]>0]}getTotMult(t){return Math.max(0,t*this.tauFactor*2.203-(0,h.wp)(200))}updateMilestones(){let t=0,s=[10,45,80,115,220,500];for(let i=0;i<s.length;i++)Math.max(this.lastPub,this.maxRho)>=s[i]&&(t=i+1);let i=[2,3,1];if(this.lastPub<500&&2===this.stratIndex){let t=0;this.lastPub>45&&(t=4),this.lastPub>80&&(t=8),this.lastPub>115&&(t=20),this.lastPub>220&&(t=40),i=(this.rho+(0,h.wp)(.5*t)>this.variables[3].cost||this.rho+(0,h.wp)(t)>this.variables[4].cost&&this.milestones[1]>0||this.curMult>1&&this.rho+(0,h.wp)(2)>this.variables[1].cost)&&this.rho<Math.min(this.variables[3].cost,this.variables[4].cost)||this.t>this.recursionValue[0]?[1,2,3]:[2,3,1]}this.milestones=[0,0,0];const e=[3,1,2];for(let s=0;s<i.length;s++)for(;this.milestones[i[s]-1]<e[i[s]-1]&&t>0;)this.milestones[i[s]-1]++,t--}updateError(t){if(t<6){let s=[0,(0,h.wp)(2.060660172040101),(0,h.wp)(12.010407635829813),(0,h.wp)(70.00178562229294),(0,h.wp)(408.0003059755347),(0,h.wp)(2378.000049517553)];return void(this.error=s[t])}let s=Math.SQRT2,i=(Math.pow(-(s-1),t)*(t%2?-1:1)+Math.pow(1+s,t))/2/s,e=Math.pow(s+1,t)*(t%2?-1:1);this.error=(0,h.wp)(Math.abs(i))+(0,h.wp)(Math.abs(e))}searchCoast(t){if(this.curMult>.7){let i=(s=this.lastPub)<45?Math.pow(s,2.1)/10:s<80?Math.pow(s,2.22)/40:s<220?Math.pow(s,2.7)/33e3+40:s<500?Math.pow(s,2.8)/92e3+40:5*Math.pow(1.5,Math.pow(s,.8475)/20);const e=(this.totMult+Math.log10(4)+Math.log10(200))/2.203*10;if(this.lastPub<500){{let s=(0,h.IH)(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),a=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<a&&(this.bestCoast[0]=a,this.bestCoast[1]=this.t)}i*=.8;{let s=(0,h.IH)(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),a=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<a&&(this.bestCoast[0]=a,this.bestCoast[1]=this.t)}i/=Math.pow(.8,2);{let s=(0,h.IH)(this.rho,t+this.variables[0].value*(this.maxRho>=10?this.maxRho>=45?this.maxRho>=80?1.15:1.1:1.05:1)+Math.log10(1.5*i)),a=(Math.min(e,s)-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<a&&(this.bestCoast[0]=a,this.bestCoast[1]=this.t)}}else{t=this.totMult+this.variables[0].value*(1+.05*this.milestones[0])+this.variables[1].value+this.q;let s=this.totMult+this.variables[2].value+1.15*this.variables[4].value+this.error,a=(0,h.IH)(this.q+(0,h.wp)(2),s+Math.log10(1.5*i))-(0,h.wp)(2),o=(0,h.IH)(this.rho,t-this.q+a+Math.log10(1.5*i)),l=(o-this.lastPub)/((this.t+i)/3600);this.bestCoast[0]<l&&o<e&&(this.bestCoast[0]=l,this.bestCoast[1]=this.t)}}var s}simulate(t){return H(this,void 0,void 0,(function*(){if(this.lastPub>=10&&null==t.recursionValue&&2===this.stratIndex){t.recursionValue=[1/0,0];let s=new V(t);yield s.simulate(t),this.recursionValue=[s.bestCoast[1],1]}let s=!1;for(;!s&&L.simulating;)(this.ticks+1)%5e5==0&&(yield(0,h._v)()),this.tick(),this.rho>this.maxRho&&(this.maxRho=this.rho),this.curMult=Math.pow(10,this.getTotMult(this.maxRho)-this.totMult),(null!=this.recursionValue&&this.t<this.recursionValue[0]||this.curMult<.7||0===this.recursionValue[1])&&this.buyVariables(),this.lastPub<500&&this.updateMilestones(),s=(L.forcedPubTime!==1/0?this.t>L.forcedPubTime:this.t>2*this.pubT||this.pubRho>this.cap[0])&&this.pubRho>10,this.ticks++;this.pubMulti=Math.pow(10,this.getTotMult(this.pubRho)-this.totMult);let i=0;for(let t=0;t<this.variables.length;t++){const s=[5,128,16,Math.pow(2,3.346*Math.log2(256)),Math.pow(10,5.65)];i=Math.max(i,this.variables[t].cost-(0,h.wp)(s[t]))}let e=(0,h.xo)(this,2===this.stratIndex?" "+Math.min(this.pubMulti,Math.pow(10,this.getTotMult(i)-this.totMult)).toFixed(2):"");if(1===this.recursionValue[1]||2!==this.stratIndex){for(;this.boughtVars[this.boughtVars.length-1].timeStamp>this.pubT;)this.boughtVars.pop();L.varBuy.push([e[7],this.boughtVars])}return e}))}tick(){let t=this.variables[0].value*(1+.05*this.milestones[0]),s=this.milestones[1]>0?this.variables[4].value*(1+.5*this.milestones[2]):0;if(this.updateError_flag){let t=this.milestones[1]>0?this.variables[4].lvl:0,s=this.variables[3].lvl+1+t;this.updateError(s),this.updateError_flag=!1}this.lastPub<500&&this.searchCoast(this.totMult+this.variables[1].value+this.q);let i=this.variables[2].value+s+this.error;this.q=(0,h.IH)(this.q,this.totMult+(0,h.wp)(this.dt)+i);let e=this.totMult+t+this.variables[1].value+this.q;this.rho=(0,h.IH)(this.rho,e+(0,h.wp)(this.dt)),this.t+=this.dt/1.5,this.dt*=this.ddt,this.maxRho<this.recovery.value&&(this.recovery.time=this.t),this.tauH=(this.maxRho-this.lastPub)/(this.t/3600),(this.maxTauH<this.tauH||this.maxRho>=this.cap[0]-this.cap[1]||this.pubRho<10||L.forcedPubTime!==1/0)&&(this.maxTauH=this.tauH,this.pubT=this.t,this.pubRho=this.maxRho)}buyVariables(){let t=!1;for(let s=this.variables.length-1;s>=0;s--)for(;this.rho>this.variables[s].cost&&this.conditions[this.stratIndex][s]()&&this.milestoneConditions[s]();){if(this.maxRho+5>this.lastPub||2!==this.stratIndex){let t=["q1","q2","c1","n","c2"];this.boughtVars.push({variable:t[s],level:this.variables[s].lvl+1,cost:this.variables[s].cost,timeStamp:this.t})}this.rho=(0,h.$X)(this.rho,this.variables[s].cost),this.variables[s].buy(),s>2&&(this.updateError_flag=!0),t=!0}t&&this.searchCoast(this.totMult+this.variables[1].value+this.q)}}var A=i(774),k=function(t,s,i,e){return new(i||(i=Promise))((function(h,a){function o(t){try{r(e.next(t))}catch(t){a(t)}}function l(t){try{r(e.throw(t))}catch(t){a(t)}}function r(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(o,l)}r((e=e.apply(t,s||[])).next())}))};const O=(0,h.qs)(".output"),L={dt:1.5,ddt:1.0001,stratFilter:!0,simulating:!1,forcedPubTime:1/0,showA23:!1,varBuy:[[0,[{variable:"var",level:0,cost:0,timeStamp:0}]]],customVal:null},$={lastStrat:null,simEndTimestamp:0};function F(t){return k(this,void 0,void 0,(function*(){if(L.simulating)return L.simulating=!1,"Sim stopped.";if((performance.now()-$.simEndTimestamp)/1e3<1)return null;try{let s=function(t){const s={theory:t.theory,strat:t.strat,mode:t.mode,hardCap:t.hardCap,modeInput:t.modeInput,simAllInputs:t.simAllInputs,sigma:0,rho:0,cap:1/0,recovery:null};if("All"!==t.mode&&"Time diff."!==t.mode){if(t.sigma.length>0&&null!==t.sigma.match(/^[0-9]+$/)&&parseInt(t.sigma)>=0&&parseFloat(t.sigma)%1==0)s.sigma=parseInt(t.sigma);else if("T"===t.theory.charAt(0))throw"Invalid sigma value. Sigma must be an integer that's >= 0";if(!(t.rho.length>0))throw"Input value cannot be empty.";if(s.rho=(0,A.RE)(t.rho,s.theory,s.sigma),"Chain"===t.mode||"Steps"===t.mode){if(!(t.cap.length>0))throw"Cap value cannot be empty.";s.cap=(0,A.RE)(t.cap,s.theory,s.sigma)}}return"Single sim"!==t.mode&&"Chain"!==t.mode&&("Time diff."===t.mode&&(t.modeInput=JSON.stringify(t.timeDiffInputs)),s.modeInput=(0,A.AX)(t.modeInput,t.mode)),s}(t),i=[];switch(L.simulating=!0,s.mode){case"Single sim":i=[yield E(s)];break;case"Chain":i=yield function(t){return k(this,void 0,void 0,(function*(){let s=t.rho,i=0;const e=t.rho,a=[];let o=(0,h.Ti)(t.cap),l=0;for(;s<t.cap;){let e=performance.now();e-l>250&&(l=e,O.textContent=`Simulating ${(0,h.Ti)(s,0)}/${o}`,yield(0,h._v)());let r=yield E(Object.assign({},t));if(!L.simulating)break;"string"==typeof r[6]&&($.lastStrat=r[6].split(" ")[0]),a.push(r),s=r[r.length-1][0],t.rho=s,i+=r[r.length-1][1]}$.lastStrat=null,a.push(["","","","","Tau Total","","",'Average <span style="font-size:0.9rem; font-style:italics">&tau;</span>/h',"Total Time"]);const r=(t.rho-e)*(0,h.IJ)(t.theory);return a.push(["","","","",(0,h.Ti)(r,2),"","",(0,h.uf)(r/(i/3600),5),(0,h.rJ)(i)]),a}))}(s);break;case"Steps":i=yield function(t){return k(this,void 0,void 0,(function*(){let s=0;t.rho;const i=[];let e=(0,h.Ti)(t.cap),a=0;for(;t.rho<t.cap+1e-5;){let o=performance.now();o-a>250&&(a=o,O.textContent=`Simulating ${(0,h.Ti)(t.rho,0)}/${e}`,yield(0,h._v)());let l=yield E(Object.assign({},t));if(!L.simulating)break;"string"==typeof l[6]&&($.lastStrat=l[6].split(" ")[0]),i.push(l),t.rho+=t.modeInput,s+=l[l.length-1][1]}return $.lastStrat=null,i}))}(s);break;case"All":i=yield function(t){return k(this,void 0,void 0,(function*(){const s=t.modeInput[0],i=t.modeInput.slice(1,t.modeInput.length);let e=[];for(let o=0;o<i.length;o++){if(0===i[o])continue;if(O.innerText=`Simulating ${(0,h.k7)(o)}/${(0,h.k7)(i.length-1)}`,yield(0,h._v)(),!L.simulating)break;let l=["Best Semi-Idle","Best Overall"];null!=t.simAllInputs&&(l=[t.simAllInputs[0]?"Best Semi-Idle":"Best Idle",t.simAllInputs[1]?"Best Overall":"Best Active"]);let r=[];for(let t=0;t<l.length;t++){let e={theory:(0,h.k7)(o),strat:l[t],sigma:s,rho:i[o],cap:1/0,mode:"Single Sim"};r.push(yield E(e))}e.push([(a=r)[0][0],a[0][2],a[1][7],a[0][7],(0,h.uf)(a[1][7]/a[0][7],4),a[1][5],a[0][5],a[1][6],a[0][6],a[1][8],a[0][8],a[1][4],a[0][4]])}var a;return e.push([s]),e}))}(s)}return $.simEndTimestamp=performance.now(),i}catch(t){return String(t)}}))}function E(t){var s;return k(this,void 0,void 0,(function*(){if(-1!==(0,h.cx)(["Best Overall","Best Active","Best Semi-Idle","Best Idle"],t.strat))return function(t){return k(this,void 0,void 0,(function*(){const s=function(t,s,i){let a=[];switch(t){case"T1":a=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<850,"Best Overall"!==i&&"Best Active"!==i&&s>625,"Best Semi-Idle"!==i&&"Best Idle"!==i&&("Best Active"===i||s<250),"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i];break;case"T2":a=["Best Semi-Idle"!==i&&"Best Active"!==i&&"Best Overall"!==i||s<25,"Best Idle"!==i&&("Best Active"!==i&&"Best Overall"!==i||s>=250),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<250,"Best Active"!==i&&"Best Overall"!==i&&"Best Idle"!==i&&s<250];break;case"T3":a=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s<150,"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i&&s>=175&&s<300,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<175,"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i&&s>=175&&s<300,"Best Overall"!==i&&"Best Active"!==i&&s>=260&&(s<500||"Best Semi-Idle"!==i),"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>=150,"Best Overall"!==i&&"Best Idle"!==i&&"Best Semi-Idle"!==i&&s>=275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<150,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<350,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<350,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<175,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=150&&s<225,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=200&&s<375,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=250];break;case"T4":a=[s<30,"Best Overall"!==i&&"Best Active"!==i&&s<600&&"T4C3"!==$.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>200,"Best Overall"!==i&&"Best Active"!==i&&s<125,"Best Overall"!==i&&"Best Active"!==i&&s<150,"Best Overall"!==i&&"Best Active"!==i&&s<275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<700&&"T4C3d66"!==$.lastStrat&&"T4C123d"!==$.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<700&&s>175&&("T4C3d66"!==$.lastStrat||s<225),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=75&&s<200,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=175&&s<300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<275,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>240];break;case"T5":a=[s<25||"Best Overall"!==i&&"Best Active"!==i&&"Best Semi-Idle"!==i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Idle"!==i&&"Best Semi-Idle"!==i];break;case"T6":a=[s<25,"Best Overall"!==i&&"Best Active"!==i&&s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<100,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<1100&&"T6noC1234"!==$.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<750&&"T6noC34"!==$.lastStrat&&"T6noC1234"!==$.lastStrat,"Best Overall"!==i&&"Best Active"!==i&&s>800,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>400,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<25,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=25&&s<100,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=100&&s<1100&&"T6noC1234"!==$.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=100&&s<750&&"T6noC34"!==$.lastStrat&&"T6noC1234"!==$.lastStrat,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>800,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s>=100];break;case"T7":a=[!1,"Best Overall"!==i&&"Best Active"!==i&&(s<25||s>=75&&s<100),"Best Overall"!==i&&"Best Active"!==i&&s>=25&&s<75,"Best Overall"!==i&&"Best Active"!==i&&s<550&&s>=100,"Best Overall"!==i&&"Best Active"!==i&&s<625&&s>500,"Best Overall"!==i&&"Best Active"!==i&&s>525,"Best Semi-Idle"!==i&&"Best Idle"!==i&&(s<25||s>=75&&s<150),"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=25&&s<75,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=100];break;case"T8":a=["Best Overall"!==i&&"Best Active"!==i&&("Best Semi-Idle"!==i||s<100),"Best Overall"!==i&&"Best Active"!==i&&s<25,"Best Overall"!==i&&"Best Active"!==i&&s>=160&&s<220,"Best Overall"!==i&&"Best Active"!==i&&s>=100&&s<160,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<60,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=160&&s<220,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=100&&s<160,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=40&&s<100,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s>=220,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i];break;case"WSP":a=["Best Overall"!==i&&"Best Active"!==i&&s<525,"Best Overall"!==i&&"Best Active"!==i&&s>475,"Best Semi-Idle"!==i&&"Best Idle"!==i];break;case"SL":a=[s<25||"Best Idle"===i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i&&s>=300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s>=300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Overall"!==i&&s<300,"Best Semi-Idle"!==i&&"Best Idle"!==i&&"Best Active"!==i&&s<300];break;case"EF":a=[s<10||"Best Idle"===i,"Best Overall"!==i&&"Best Active"!==i&&"Best Idle"!==i,"Best Semi-Idle"!==i&&"Best Idle"!==i&&s<10,"Best Semi-Idle"!==i&&"Best Idle"!==i];break;case"CSR2":a=[s<10||"Best Idle"===i||"Best Semi-Idle"===i,"Best Active"===i&&s<500,("Best Overall"===i||"Best Active"===i&&s>=500)&&s>10];break;case"RZ":a=[!0,!0,!0,!0]}let o=[];switch(t){case"T1":o=[!0,s>=25,s>=50,!0,!0];break;case"T2":case"EF":case"RZ":o=[!0,!0,!0,!0];break;case"T3":o=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];break;case"T4":o=[!0,!0,!0,s>=25,s>=50,s>=50,!0,!0,s>=25,s>=75,s>=50,!0];break;case"T5":case"WSP":case"CSR2":o=[!0,!0,!0];break;case"T6":o=[!0,!0,!0,!0,!0,s>=125,!0,!0,!0,!0,!0,s>=125,!0];break;case"T7":o=[!0,!0,s>=25,s>=25,s>=75,s>=75,!0,s>=25,s>=100];break;case"T8":o=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];break;case"SL":o=[!0,!0,!0,!0,!0]}if(0===a.length)throw"No strats found";let l=[];for(let s=0;s<a.length;s++)!a[s]&&L.stratFilter||!o[s]||l.push(e.S3[(0,h.ZA)(t)][s]);return l}(t.theory,t.rho,t.strat);let i=new Array(9).fill(0);for(let e=0;e<s.length;e++){t.strat=s[e];let h=yield E(t);i[7]<h[7]&&(i=h)}return i}))}(t);const i={strat:t.strat,strats:e.S3[(0,h.ZA)(t.theory)],sigma:t.sigma,rho:t.rho,recursionValue:null,recovery:null!==(s=t.recovery)&&void 0!==s?s:{value:0,time:0,recoveryTime:!1},cap:t.hardCap?t.cap:null};switch(t.theory){case"T1":return yield function(t){return r(this,void 0,void 0,(function*(){let s=new n(t);return yield s.simulate()}))}(i);case"T2":return yield function(t){return u(this,void 0,void 0,(function*(){let s=new c(t);return yield s.simulate()}))}(i);case"T3":return yield function(t){return v(this,void 0,void 0,(function*(){let s=new m(t);return yield s.simulate()}))}(i);case"T4":return yield function(t){return b(this,void 0,void 0,(function*(){let s=new p(t);return yield s.simulate(t)}))}(i);case"T5":return yield function(t){return d(this,void 0,void 0,(function*(){let s=new f(t);return yield s.simulate()}))}(i);case"T6":return yield function(t){return w(this,void 0,void 0,(function*(){let s=new g(t);return yield s.simulate()}))}(i);case"T7":return yield function(t){return M(this,void 0,void 0,(function*(){let s=new x(t);return yield s.simulate()}))}(i);case"T8":return yield function(t){return y(this,void 0,void 0,(function*(){let s=new T(t);return yield s.simulate()}))}(i);case"WSP":return yield function(t){return I(this,void 0,void 0,(function*(){let s=new C(t);return yield s.simulate()}))}(i);case"SL":return yield function(t){return S(this,void 0,void 0,(function*(){let s=new B(t);return yield s.simulate()}))}(i);case"EF":return yield R(i);case"CSR2":return yield function(t){return H(this,void 0,void 0,(function*(){let s=new V(t);return yield s.simulate(t)}))}(i)}throw`Theory ${t.theory} is not defined in singleSim() function. Please contact the author of the sim.`}))}},774:(t,s,i)=>{i.d(s,{AX:()=>r,NB:()=>u,RE:()=>a});var e=i(434),h=i(297);function a(t,s,i,h="r"){if("string"==typeof t){const s=t.charAt(t.length-1);if(null!==s.match(/[r/t/m]/))o(t=t.slice(0,-1))&&(t=[t,s]);else{if(!s.match(/[0-9]/))throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;o(t)&&(t=[t,h])}}if("string"==typeof t[0]&&Array.isArray(t)&&(t[0]=l(t[0])),"number"!=typeof t[0])throw`Cannot parse value ${t[0]}. Please contact the author of the sim.`;if("r"===t[1])return t[0];if("t"===t[1])return t[0]/(0,e.IJ)(s);if("m"===t[1])return function(t,s,i){let e=()=>i<65?0:i<75?1:i<85?2:3,h=(t,h)=>(s-Math.log10(Math.pow(i/20,e()))+Math.log10(h))*(1/t),a=t=>(s-Math.log10(Math.pow(i/20,e())))*(1/t);switch(t){case"T1":return h(.164,3);case"T2":return h(.198,100);case"T3":return o=.147,l=3,(s-Math.log10(Math.pow(i/20,e()))-Math.log10(l))*(1/o);case"T4":return h(.165,4);case"T5":return a(.159);case"T6":return h(.196,50);case"T7":return a(.152);case"T8":return a(.15);case"WSP":case"SL":return s/.15;case"EF":return s*(1/.387)*2.5;case"CSR2":return(s+Math.log10(200))*(1/2.203)*10}var o,l;throw"Failed parsing multiplier. Please contact the author of the sim."}(s,t[0],i);throw`Cannot parse value ${t[0]} and ${t[1]}. Please contact the author of the sim.`}function o(t){if(null===t.match(/^[0-9/e/.]+$/))throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;let s=0;for(let i=0;i<t.length;i++)"e"===t[i]&&s++;if(s>1)throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;let i=0;for(let s=0;s<t.length;s++)"."===t[s]&&i++;if(i>1)throw`Invalid currency value ${t}. Currency value must be in formats <number>, <exxxx> or <xexxxx>.`;return!0}function l(t){return/[e]/.test(t)?(0,e.mv)(t):parseFloat(t)}function r(t,s){if("Steps"===s&&"string"==typeof t&&o(t))return l(t);if("Amount"===s&&"string"==typeof t){if(null!==t.match(/[0-9]/))return parseFloat(t);throw s+" input must be a number."}if("All"===s)return function(t){let s=t.split(" ");for(let t=0;t<s.length;t++)s[t]=s[t].replace(" ",""),s[t]=s[t].replace("\n","");if(s=s.filter((t=>""!==t)),s.length<2)throw"Student count and at least one theory value that is not 0 is required.";if(s.length-1>h.Jp.length)throw`Invalid value ${s[h.Jp.length+1]} does not match any theory.`;let i=[];if(o=s[0],!/^\d+$/.test(o))throw`Invalid student value ${s[0]}.`;var o;i.push(parseInt(s[0]));for(let t=1;t<s.length;t++)i.push(a(s[t],(0,e.k7)(t-1),i[0],"t"));return i}(t);if("Time diff."===s)return n(t);if("Time diff."===s||"Single sim"===s||"Chain"===s)return t;throw`Couldnt parse mode ${s}. Please contact the author of the sim.`}function n(t){const s=JSON.parse(t),i={sigma:[0,0],ct:!1};let h=0;s[2]=s[2].split(" ");for(let t=0;t<s[2].length;t++)0!==s[2][t].length&&(h<2?i.sigma[h]=Math.max(0,parseInt(s[2][t])):i.ct="y"===s[2][t],h++);const o=[];for(let t=0;t<2;t++){const h=s[t].split(","),l=[];for(let s=0;s<h.length;s++){const o=h[s].split(" "),r=[];for(let h=0;h<o.length;h++)0!==o[h].length&&r.push(a(o[h],(0,e.k7)(s+8*Number(i.ct)),i.sigma[t],"t"));l.push(r)}o.push(l)}return o}function u(){const t=(0,e.uJ)(".timeDiffInput"),s=(0,e.qs)(".timeDiffTable"),i=[];for(const s of t)i.push(s.value);for(n(JSON.stringify(i));s.firstChild;)s.firstChild.remove();const h=document.createElement("th"),a=document.createElement("td");a.innerHTML="Hello world",h.appendChild(a),s.appendChild(h)}},936:(t,s,i)=>{var e=i(434);const h=(0,e.qs)(".clear"),a=(0,e.qs)(".imageC"),o=(0,e.qs)(".imageD");let l;const r=(0,e.qs)(".output");function n(t){html2canvas((0,e.qs)(".simTable")).then((s=>s.toBlob((i=>{if("download"===t){const t=document.createElement("a");t.href=s.toDataURL("image/png"),t.download="output.png",t.click()}else navigator.clipboard.write([new ClipboardItem({"image/png":i})]).then((()=>{console.log("Sucsessfully created image!")})).catch((()=>console.log("Failed creating image.")))}))))}(0,e.B)(h,"pointerdown",(()=>{for(l=(0,e.qs)("tbody");l.firstChild;)l.firstChild.remove();r.textContent="",console.clear()})),(0,e.B)(a,"pointerdown",(()=>n(""))),(0,e.B)(o,"pointerdown",(()=>n("download")));const u=(0,e.qs)(".saveDist"),c=(0,e.qs)(".getDist"),v=(0,e.qs)("textarea");(0,e.B)(u,"pointerdown",(()=>{0!==v.value.replace(" ","").length&&(u.classList.add("animate"),setTimeout((()=>u.classList.remove("animate")),550),localStorage.setItem("savedDistribution",v.value))})),(0,e.B)(c,"pointerdown",(()=>{var t;v.value=null!==(t=localStorage.getItem("savedDistribution"))&&void 0!==t?t:v.value}))},179:(t,s,i)=>{var e=i(434),h=i(473);const a=(0,e.qs)(".settingsBtn"),o=(0,e.qs)(".settingsCloseBtn"),l=(0,e.qs)(".settings");(0,e.B)(a,"pointerdown",(()=>{l.showModal(),document.body.style.overflow="hidden"})),(0,e.B)(o,"pointerdown",(()=>{l.close(),document.body.style.overflow="auto"}));const r=(0,e.qs)(".dt"),n=(0,e.qs)(".dtOtp"),u=(0,e.qs)(".ddt"),c=(0,e.qs)(".ddtOtp");(0,e.B)(r,"input",(()=>n.textContent="0"===r.value?"0.15":"10"===r.value?"5":String((0,e.uf)(.15+Math.pow(2,parseFloat(r.value))*(4.9/(1+Math.pow(2,parseFloat(r.max)))),4)))),(0,e.B)(u,"input",(()=>c.textContent="0"===u.value?"1":"10"===u.value?"1.3":String((0,e.NM)(1+Number((0,e.uf)(Math.pow(3,parseFloat(u.value))*(.3/Math.pow(3,parseFloat(u.max))),2)),7))));const v=(0,e.qs)(".setState"),m=(0,e.qs)(".getState");(0,e.B)(v,"pointerdown",(()=>(0,h.t)())),(0,e.B)(m,"pointerdown",(()=>(0,h.P)())),(0,e.B)((0,e.qs)(".resetSettings"),"pointerdown",(()=>{r.value="8.1943",n.textContent="1.5",u.value="2.71233",c.textContent="1.0001"}))},93:(t,s,i)=>{var e=i(301),h=i(434),a=i(473);const o=(0,h.qs)(".theory"),l=(0,h.qs)(".strat"),r=(0,h.qs)(".sigma"),n=(0,h.qs)(".input"),u=(0,h.qs)(".cap"),c=(0,h.qs)(".mode"),v=(0,h.qs)("textarea"),m=(0,h.uJ)(".timeDiffInput"),b=(0,h.qs)(".hardCap"),p=(0,h.qs)(".semi-idle"),d=(0,h.qs)(".hard-active"),f=(0,h.qs)(".output");let w=(0,h.qs)(".simTable"),g=(0,h.qs)(".simTable > thead"),M=(0,h.qs)(".simTable > tbody");const x=(0,h.qs)(".simulate"),y=(0,h.qs)(".dtOtp"),T=(0,h.qs)(".ddtOtp"),I=(0,h.qs)(".a23");let C="All";const S='<span style="font-size:0.9rem; font-style:italics">&tau;</span>',B={current:"All",single:`<th style="padding-inline: 0.5rem !important">Theory</th><th><span style="font-size:0.9rem;">&sigma;</span><sub>t</sub></th><th>Last Pub</th><th>Max Rho</th><th>&Delta;${S}</th><th>Multi</th><th>Strat</th><th>${S}/h</th><th>Pub Time</th>`,all:`<th>&emsp;</th><th>Input</th><th>${S}/h Active</th><th>${S}/h Idle</th><th>Ratio</th><th>Multi Active</th><th>Multi Idle</th><th>Strat Active</th><th>Strat Idle</th><th>Time Active</th><th>Time Idle</th><th>&Delta;${S} Active</th><th>&Delta;${S} Idle</th>`};function P(t){document.body.style.overflow="hidden",(0,h.qs)(".boughtVars").showModal();const s=(0,h.qs)(".boughtVarsOtp");for(;s.firstChild;)s.firstChild.remove();for(let i=0;i<t.length;i++){const e=document.createElement("tr"),a=document.createElement("td");a.innerText=t[i].variable,e.appendChild(a);const o=document.createElement("td");o.innerText=t[i].level.toString(),e.appendChild(o);const l=document.createElement("td");l.innerText=(0,h.Ti)(t[i].cost,2),e.appendChild(l);const r=document.createElement("td");r.innerText=(0,h.rJ)(t[i].timeStamp),e.appendChild(r),s.appendChild(e)}}function R(){for(;M.firstChild;)M.firstChild.remove()}g.innerHTML=B.all,w.classList.add("big"),"true"===localStorage.getItem("autoSave")&&setTimeout((()=>(0,a.P)()),500),(0,h.B)(x,"click",(()=>{return t=void 0,s=void 0,S=function*(){var t,s;e.C.dt=parseFloat(null!==(t=y.textContent)&&void 0!==t?t:"1.5"),e.C.ddt=parseFloat(null!==(s=T.textContent)&&void 0!==s?s:"1.0001"),e.C.stratFilter=!0,e.C.showA23=I.checked,localStorage.setItem("simAllSettings",JSON.stringify([p.checked,d.checked]));const i={theory:o.value,strat:l.value,sigma:r.value.replace(" ",""),rho:n.value.replace(" ",""),cap:u.value.replace(" ",""),mode:c.value,modeInput:v.value,simAllInputs:[p.checked,d.checked],timeDiffInputs:[],hardCap:b.checked};for(let t of m)i.timeDiffInputs.push(t.value);f.textContent="",x.textContent="Stop simulating",yield(0,h._v)();let S=yield(0,e.m)(i);f.textContent="string"==typeof S?S:"",null!==S&&"string"!=typeof S&&function(t){C!==c.value&&R(),C=c.value,w=(0,h.qs)(".simTable"),g=(0,h.qs)(".simTable > thead"),M=(0,h.qs)(".simTable > tbody"),"All"===c.value?(w.classList.add("big"),w.classList.remove("small"),g.innerHTML=B.all,g.children[0].children[0].innerHTML=t[t.length-1][0].toString()+'<span style="font-size:0.9rem;">&sigma;</span><sub>t</sub>',t.pop()):(w.classList.remove("big"),w.classList.add("small"),g.innerHTML=B.single),(M.children.length>1&&(t.length>1||""===M.children[M.children.length-1].children[0].innerHTML)||"All"===c.value)&&R();for(let s=0;s<t.length;s++){const i=(0,h.ce)("tr");for(let e=0;e<g.children[0].children.length;e++){const a=(0,h.ce)("td");a.innerHTML=String(t[s][e]),i.appendChild(a)}M.appendChild(i)}!function(){M=(0,h.qs)(".simTable > tbody");for(let t=0;t<e.C.varBuy.length;t++)for(let s=0;s<(null==M?void 0:M.children.length);s++){const i=null==M?void 0:M.children[s];if(parseFloat(null==i?void 0:i.children[7].innerHTML)===parseFloat(e.C.varBuy[t][0])){let s=e.C.varBuy[t][1];(null==i?void 0:i.children[8]).onclick=()=>{P(s)},(null==i?void 0:i.children[8]).style.cursor="pointer"}}e.C.varBuy=[]}()}(S),x.textContent="Simulate",e.C.simulating=!1,(0,a.t)()},new((i=void 0)||(i=Promise))((function(e,h){function a(t){try{l(S.next(t))}catch(t){h(t)}}function o(t){try{l(S.throw(t))}catch(t){h(t)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(a,o)}l((S=S.apply(t,s||[])).next())}));var t,s,i,S})),(0,h.B)((0,h.qs)(".boughtVarsCloseBtn"),"pointerdown",(()=>{(0,h.qs)(".boughtVars").close(),document.body.style.overflow="auto"}))},473:(t,s,i)=>{i.d(s,{P:()=>$,t:()=>L});var e=i(434),h=i(297),a=i(774);const o=(0,e.qs)(".theory"),l=(0,e.qs)(".strat"),r=((0,e.qs)(".sigma"),(0,e.qs)(".input"),(0,e.qs)(".cap")),n=(0,e.qs)(".mode"),u=(0,e.qs)("textarea"),c=(0,e.qs)(".hardCap"),v=(0,e.qs)(".semi-idle"),m=(0,e.qs)(".hard-active"),b=(0,e.uJ)(".timeDiffInput"),p=(0,e.qs)(".extraInputs"),d=(0,e.qs)(".timeDiffWrapper"),f=(0,e.uJ)(".controls")[0],w=(0,e.qs)(".simAllInputs"),g=(0,e.qs)(".extraInputDescription");function M(){f.style.display="none",p.style.display="none",d.style.display="none",c.style.display="none",w.style.display="none",g.style.display="inline",u.style.height="1.8em",u.style.width="6rem",r.style.display="none",(0,e.qs)(".capDesc").style.display="none","Chain"!==n.value&&"Steps"!==n.value||(r.style.display="inline",(0,e.qs)(".capDesc").style.display="inline"),"Single sim"!==n.value&&"Time diff."!==n.value&&"Chain"!==n.value&&(p.style.display="flex"),"Time diff."===n.value&&(d.style.display="grid"),"All"!==n.value&&"Time diff."!==n.value&&(f.style.display="grid"),"All"===n.value&&(w.style.display="grid",g.style.display="none",u.style.height="3rem",u.style.width="20rem"),u.placeholder=h.CN[(0,e.cx)(h.Sw,n.value)],g.textContent=h.xy[(0,e.cx)(h.Sw,n.value)]}function x(){for(;l.firstChild;)l.firstChild.remove();const t=["Best Overall","Best Active","Best Semi-Idle","Best Idle"];for(let s=0;s<4;s++){const i=(0,e.ce)("option");i.value=t[s],i.textContent=t[s],l.appendChild(i)}const s=(0,e.cx)(h.Jp,o.value);for(let t=0;t<h.S3[s].length;t++){const i=(0,e.ce)("option");i.value=h.S3[s][t],i.textContent=h.S3[s][t],l.appendChild(i)}}window.onload=()=>{var t;for(let t=0;t<h.Jp.length;t++){const s=(0,e.ce)("option");s.value=h.Jp[t],s.textContent=h.Jp[t],o.appendChild(s)}for(let t=0;t<h.S3[0].length;t++){const s=(0,e.ce)("option");s.value=h.S3[0][t],s.textContent=h.S3[0][t],l.appendChild(s)}for(let t=0;t<h.Sw.length;t++){const s=(0,e.ce)("option");s.value=h.Sw[t],s.textContent=h.Sw[t],n.appendChild(s)}M(),(0,e.B)(n,"input",M),(0,e.B)(o,"change",x);const s=JSON.parse(null!==(t=localStorage.getItem("simAllSettings"))&&void 0!==t?t:"[true, false]");v.checked=s[0],m.checked=s[1];for(const t of b)(0,e.B)(t,"input",(()=>{(0,a.NB)()}))};const y=(0,e.qs)(".theory"),T=(0,e.qs)(".strat"),I=(0,e.qs)(".sigma"),C=(0,e.qs)(".input"),S=(0,e.qs)(".cap"),B=(0,e.qs)(".mode"),P=(0,e.qs)("textarea"),R=(0,e.qs)(".hardCap"),q=(0,e.qs)(".output"),H=(0,e.qs)(".simTable"),V=(0,e.qs)(".dtOtp"),A=(0,e.qs)(".ddtOtp"),k=(0,e.qs)(".a23"),O='{"controls1":{"theory":{"value":"T1","innerHTML":"<option value=\\"T1\\">T1</option><option value=\\"T2\\">T2</option><option value=\\"T3\\">T3</option><option value=\\"T4\\">T4</option><option value=\\"T5\\">T5</option><option value=\\"T6\\">T6</option><option value=\\"T7\\">T7</option><option value=\\"T8\\">T8</option><option value=\\"WSP\\">WSP</option><option value=\\"SL\\">SL</option><option value=\\"EF\\">EF</option><option value=\\"CSR2\\">CSR2</option><option value=\\"PD\\">PD</option><option value=\\"FI\\">FI</option>"},"strat":{"value":"Best Overall","innerHTML":"\\n            <option value=\\"Best Overall\\">Best Overall</option>\\n            <option value=\\"Best Active\\">Best Active</option>\\n            <option value=\\"Best Semi-Idle\\">Best Semi-Idle</option>\\n            <option value=\\"Best Idle\\">Best Idle</option>\\n          <option value=\\"T1\\">T1</option><option value=\\"T1C34\\">T1C34</option><option value=\\"T1C4\\">T1C4</option><option value=\\"T1Ratio\\">T1Ratio</option><option value=\\"T1SolarXLII\\">T1SolarXLII</option>"},"sigma":"","input":"","cap":false},"controls2":{"mode":"All","modeInput":"","extraInputDescription":"","hardCap":"on","timeDiffInputs":["","",""]},"output":"","table":"\\n<thead><tr><th></th><th>Input</th><th>/h Active</th><th>/h Idle</th><th>Ratio</th><th>Multi Active</th><th>Multi Idle</th><th>Strat Active</th><th>Strat Idle</th><th>Time Active</th><th>Time Idle</th><th> Active</th><th> Idle</th></tr></thead>\\n        <tbody></tbody>\\n      ","settings":{"dt":"1.5","ddt":"1.0001"}}';function L(){localStorage.setItem("simState",JSON.stringify({controls1:{theory:{value:y.value,innerHTML:y.innerHTML},strat:{value:T.value,innerHTML:T.innerHTML},sigma:I.value,input:C.value,cap:S.value},controls2:{mode:B.value,modeInput:P.value,extraInputDescription:(0,e.qs)(".extraInputDescription").textContent,hardCap:R.checked,timeDiffInputs:[(0,e.qs)(".timeDiffWrapper").children[0].value,(0,e.qs)(".timeDiffWrapper").children[1].value,(0,e.qs)(".timeDiffWrapper").children[2].value]},output:q.textContent,table:H.innerHTML,settings:{dt:V.textContent,ddt:A.textContent,showA23:k.checked}}))}function $(){var t;const s=JSON.parse(null!==(t=localStorage.getItem("simState"))&&void 0!==t?t:O);y.innerHTML=s.controls1.theory.innerHTML,y.value=s.controls1.theory.value,T.innerHTML=s.controls1.strat.innerHTML,T.value=s.controls1.strat.value,I.value=s.controls1.sigma,C.value=s.controls1.input,S.value=s.controls1.cap,B.value=s.controls2.mode,P.value=s.controls2.modeInput,(0,e.qs)(".extraInputDescription").textContent=s.controls2.extraInputDescription,R.checked=s.controls2.hardCap,(0,e.qs)(".timeDiffWrapper").children[0].value=s.controls2.timeDiffInputs[0],(0,e.qs)(".timeDiffWrapper").children[1].value=s.controls2.timeDiffInputs[1],(0,e.qs)(".timeDiffWrapper").children[2].value=s.controls2.timeDiffInputs[2],q.textContent=s.output,H.innerHTML=s.table,V.textContent=s.settings.dt,A.textContent=s.settings.ddt,k.checked=s.settings.showA23,(0,e.qs)(".dt").value="8.1943",(0,e.qs)(".ddt").value="2.71233",M(),H.classList.remove("big"),H.classList.remove("small"),"All"!==s.controls2.mode?H.classList.add("small"):H.classList.add("big")}},434:(t,s,i)=>{i.d(s,{$X:()=>g,B:()=>l,IH:()=>w,IJ:()=>c,NM:()=>f,Ti:()=>b,ZA:()=>u,_v:()=>n,ce:()=>o,cx:()=>r,k7:()=>v,mv:()=>m,qs:()=>h,rJ:()=>p,uJ:()=>a,uf:()=>d,wp:()=>M,xE:()=>x,xo:()=>y});var e=i(297);const h=t=>document.querySelector(t),a=t=>document.querySelectorAll(t),o=t=>document.createElement(t),l=(t,s,i)=>t.addEventListener(s,(t=>i(t)));function r(t,s){for(let i=0;i<t.length;i++)if(s===t[i])return i;return-1}function n(t=0){return new Promise((s=>setTimeout(s,t)))}function u(t){return r(e.Jp,t)}function c(t){switch(t){case"T1":case"T2":case"T3":case"T4":case"T5":case"T6":case"T7":case"T8":return 1;case"WSP":case"SL":case"CSR2":case"RZ":return.1;case"EF":return.4;case"FP":return.075}throw`Invalid theory ${t}. Please contact the author of the sim.`}function v(t){return e.Jp[t]}function m(t){const s=String(t).split("e"),i=Number(s[1])+Math.log10(Math.max(1,Number(s[0])));return Number(i)}function b(t,s=3){const i=Math.floor(t),e=t-i,h=f(Math.pow(10,e),s);return(h>=10?h/10:h)+"e"+(h>=10?i+1:i)}function p(t){let s=Math.floor(t/60%60),i=Math.floor(t/3600%24),e=Math.floor(t/86400%365),h=Math.floor(t/31536e3),a="";return h>0&&(a+=h<1e6?h:b(Math.log10(h)),a+="y"),e>0&&(a+=e+"d"),a+=(i<10?"0":"")+i+"h",0===h&&(a+=(s<10?"0":"")+s+"m"),a}function d(t,s=6){return t.toPrecision(s).replace(/[+]/,"")}function f(t,s){return Math.round(t*Math.pow(10,s))/Math.pow(10,s)}function w(t,s){const i=t>s?t:s,e=t>s?s:t,h=Math.floor(i),a=Math.pow(10,i-h),o=Math.floor(e),l=Math.pow(10,e-o);return h+Math.log10(a+l/Math.pow(10,h-o))}function g(t,s){const i=t>s?t:s,e=t>s?s:t,h=Math.floor(i),a=Math.pow(10,i-h),o=Math.floor(e),l=Math.pow(10,e-o);return h+Math.log10(a-l/Math.pow(10,h-o))}function M(t){return Math.log10(t)}const x=(()=>{let t=Math.random();for(;0===t;)t=Math.random();return t})();function y(t,s){return[t.theory,t.sigma,b(t.lastPub,2),b(t.pubRho,2),b((t.pubRho-t.lastPub)*c(t.theory),2),d(t.pubMulti),t.strat+s,0===t.maxTauH?0:Number(d(t.maxTauH*c(t.theory))),p(Math.max(0,t.pubT-t.recovery.time)),[t.pubRho,t.recovery.recoveryTime?t.recovery.time:Math.max(0,t.pubT-t.recovery.time)]]}},297:t=>{t.exports=JSON.parse('{"Jp":["T1","T2","T3","T4","T5","T6","T7","T8","WSP","SL","EF","CSR2","RZ","FP"],"S3":[["T1","T1C34","T1C4","T1Ratio","T1SolarXLII"],["T2","T2mc","T2ms","T2qs"],["T3","T3C11C12C21","T3noC11C13C21C33","T3noC13C32C33","T3noC13C33","T3noP1C13C33","T3Snax","T3Snax2","T3C11C12C21d","T3noC11C13C21C33d","T3noC11C13C33d","T3noC13C32C33d","T3noC13C33d","T3Play","T3Play2"],["T4","T4C12","T4C3","T4C4","T4C5","T4C56","T4C12d","T4C123d","T4C456dC12rcvMS","T4C356dC12rcv","T4C56d","T4C3d66"],["T5","T5Idle","T5AI2"],["T6","T6C3","T6C4","T6noC34","T6noC345","T6noC1234","T6snax","T6C3d","T6C4d","T6noC34d","T6noC345d","T6noC1234d","T6AI"],["T7","T7C12","T7C3","T7noC12","T7noC123","T7noC1234","T7C12d","T7C3d","T7PlaySpqcey"],["T8","T8noC3","T8noC5","T8noC35","T8snax","T8noC3d","T8noC5d","T8noC35d","T8d","T8Play","T8PlaySolarswap"],["WSP","WSPStopC1","WSPdStopC1"],["SL","SLStopA","SLStopAd","SLMS","SLMSd"],["EF","EFsnax","EFd","EFAI"],["CSR2","CSR2d","CSR2XL"],["RZ","RZd","RZdBH","RZSpiralswap","RZMS","RZnoB"],["FP"]],"Sw":["All","Single sim","Chain","Steps","Amount","Time","Time diff."],"xy":["","","","Step length: ","Amount of pubs (Chain): ","Total Time: "],"CN":["<sigma> <t1>* [t2]* ... [wsp]* ... [csr2]* \\n\\n*[r/t/m] = rho/tau/total multiplier | default tau","","","","<Number>","<Hours>","<t1> [t1], ... , <t8> [t8] or <wsp> [wsp], ... , <csr2> [csr2]","<t1> [t1], ... , <t8> [t8] or <wsp> [wsp], ... , <csr2> [csr2]","<sigma 1> <sigma 2> [ct y/n] [idle strats only y/n]"]}')}},s={};function i(e){var h=s[e];if(void 0!==h)return h.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.d=(t,s)=>{for(var e in s)i.o(s,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})},i.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),i(93),i(936),i(179),i(473),i(10)})();